<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on sexta-feira, fevereiro 22, 2019, 4:42  -->
<!-- MuClient version 5.05 -->

<!-- Plugin "Av6" generated by Plugin Wizard -->

<muclient>
<plugin
   name="Av6"
   author="X"
   id="3a023d177bc699161cab5075"
   language="Lua"
   save_state="y"
   date_written="2019-02-22 16:41:40"
   requires="5.05"
   version="1.0"
   >

</plugin>


<!--  Get our standard constants -->

<include name="constants.lua"/>

<!--  Triggers  -->

<triggers>
	<!--  areacaster  -->
  <trigger
   expand_variables="y"
   group="areacaster"
   keep_evaluating="y"
   match="* tell* the group 'off boss'"
   name="areacaster"
   send_to="12"
   sequence="100">
  <send>lag0Cast = true
EnableTimer("autocastarea", false)
SendNoEcho("s2")</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="areacaster"
   keep_evaluating="y"
   match="* tell* the group 'on boss'"
   send_to="12"
   sequence="110">
  <send>lag0Cast = false
SendNoEcho("s3")
EnableTimer ("autocastarea", true)
</send>
  </trigger>

   <!--  autoLogin  -->
  <trigger
   enabled="y"
   expand_variables="y"
   group="autoLogin"
   keep_evaluating="y"
   match="*Existing Character."
   send_to="12"
   sequence="100">
  <send>ResetTimer("antiafktimer")
resetLoggedChar()

do
  local f = assert (io.open ("password.txt", "r"),"Missing password.txt at mush main folder")
  local t = f:read ("*all")  -- read file in
  f:close ()
  --Send (t)  -- send to MUD
  SendNoEcho(t)
end

--Send("i")
--Send("i")</send>
  </trigger>

  <trigger
   enabled = "y"
   group="autoLogin"
   ignore_case="y"
   match="*ress *enter* continue*"
   send_to="12"
   sequence="100">
  <send>afterLogin()</send>
  </trigger>

  <trigger
   group="autoLogin"
   enabled = "y"
   ignore_case="y"
   keep_evaluating="y"
   match="*ress enter to continue*"
   send_to="12"
   sequence="100">
  <send>afterLogin()</send>
  </trigger>
  
  <trigger
   group="autoLogin"
   enabled = "y"
   ignore_case="y"
   keep_evaluating="y"
   match="*Please *vote for Avatar!*"
   send_to="12"
   sequence="100">
  <send>afterLogin()</send>
  </trigger>  

   <!--  autoalert  -->
  <trigger
   group="autoalert"
   keep_evaluating="y"
   match="You feel less perceptive."
   send_to="12"
   sequence="100">
  <send>addActionQueue("alert=alert")
Execute("alert")
Execute("alert")</send>
  </trigger>

  <trigger
   group="autoalert"
   keep_evaluating="y"
   match="You keep your eyes peeled and your ears to the ground!"
   send_to="12"
   sequence="100">
  <send>remActionQueue("alert=alert")</send>
  </trigger>

   <!--  autobow  -->
  <trigger
   expand_variables="y"
   group="autobow"
   keep_evaluating="y"
   match="xxx No such target can be seen in the specified direction."
   sequence="100">
  <send>gt No such target can be seen in the specified direction.</send>
  </trigger>

  <trigger
   group="autobow"
   keep_evaluating="y"
   match="* tell* the group 'ls * *'"
   sequence="100">
  <send>ls %3 %4</send>
  </trigger>

  <trigger
   custom_colour="8"
   group="autobow"
   match="You just shot your last (.+?) (.+)!"
   regexp="y"
   sequence="100">
  <send>wear %2</send>
  </trigger>

  <trigger
   group="autobow"
   match="You just shot your last *!"
   name="autoreloadbow"
   sequence="100"  >
  <send>wear %1</send>
  </trigger>

  <trigger
   group="autobow"
   match="* has fled *!"
   send_to="12"
   sequence="100">
  <send>longShotFleer("%2")</send>
  </trigger>

   <!--  autobrand  -->
  <trigger
   expand_variables="y"
   group="autobrand"
   keep_evaluating="y"
   match="* tell* the group 'bp'"
   send_to="10"
   sequence="100">
  <send>bp</send>
  </trigger>
   
  <trigger
   expand_variables="y"
   group="autobrand"
   keep_evaluating="y"
   match="* tell* the group 'idtyp'"
   send_to="10"
   sequence="100">
  <send>idtyp</send>
  </trigger>
   
  <trigger
   expand_variables="y"
   group="autobrand"
   keep_evaluating="y"
   match="* tell* the group 'typs'"
   send_to="10"
   sequence="100">
  <send>btyp</send>
  </trigger>
   
  <trigger
   expand_variables="y"
   group="autobrand"
   keep_evaluating="y"
   match="Has *(*) charges at level * 'heal'."
   send_to="12"
   sequence="100">
  <send>updateBrandStatus("%1", "%2")</send>
  </trigger>
   
  <trigger
   custom_colour="4"
   expand_variables="y"
   group="autobrand"
   keep_evaluating="y"
   match="Weight *, value *, level *."
   send_to="12"
   sequence="100">
  <send>updateBrandLevel("%3")</send>
  </trigger>
   
   <!--  autocast  -->
  <trigger
   custom_colour="3"
   group="autocast"
   keep_evaluating="y"
   match="Your mystical barrier shimmers and is gone."
   send_to="12"
   sequence="100">
  <send>addActionQueue("c 'mystical barrier'")</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="autocast"
   keep_evaluating="y"
   match="Your spell fizzles."
   send_to="12"
   sequence="100">
  <send>SendNoEcho("emo Spell fizzles")</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="autocast"
   keep_evaluating="y"
   match="* tell* the group 'off run'"
   send_to="12"
   sequence="100">
  <send>lag0Cast = false
EnableTimer("autocastarea", false)</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="autocast"
   keep_evaluating="y"
   match="Cast the spell on whom/?"
   name="autocast"
   omit_from_output="y"
   sequence="100">
  </trigger>

  <trigger
   custom_colour="3"
   group="autocast"
   keep_evaluating="y"
   match="You are surrounded by a mystical barrier."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'mystical barrier'")</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="autocast"
   keep_evaluating="y"
   match="* tell* the group 'on run'"
   send_to="12"
   sequence="100">
  <send>lag0Cast = true
EnableTimer("autocastarea", false)
--SendNoEcho("s2")
SendNoEcho("s1")
</send>
  </trigger>

  <trigger
   custom_colour="3"
   group="autocast"
   keep_evaluating="y"
   match="You already have a mystical barrier."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'mystical barrier'")</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="autocast"
   keep_evaluating="y"
   match="You punch a hole through the fabric of space, and a portal appears!"
   send_to="12"
   sequence="100">
  <send>SendNoEcho("emo portal is up")</send>
  </trigger>

   <!--  autodecept  -->
  <trigger
   group="autodecept"
   keep_evaluating="y"
   match="*A burly Earth Elemental scours the plane for impurities."
   omit_from_output="y"
   send_to="12"
   sequence="100">
  <send>decept("elemental")</send>
  </trigger>

  <trigger
   group="autodecept"
   keep_evaluating="y"
   match="*A burst of fire whirls around on burning wings."
   omit_from_output="y"
   send_to="12"
   sequence="100">
  <send>decept("mephit")</send>
  </trigger>

  <trigger
   group="autodecept"
   keep_evaluating="y"
   match="*A large magma mephit flirts dangerously close to the lava."
   omit_from_output="y"
   send_to="12"
   sequence="100">
  <send>decept("mephit")</send>
  </trigger>

  <trigger
   group="autodecept"
   keep_evaluating="y"
   match="*An elemental soldier saunters about, looking for trouble."
   omit_from_output="y"
   send_to="12"
   sequence="100">
  <send>decept("soldier")</send>
  </trigger>

  <trigger
   group="autodecept"
   keep_evaluating="y"
   match="*Burning violently a being of elemental fury moves towards you."
   omit_from_output="y"
   send_to="12"
   sequence="100">
  <send>decept("elemental")</send>
  </trigger>

  <trigger
   group="autodecept"
   keep_evaluating="y"
   match="*Flames flow violently in an attempt to consume you."
   omit_from_output="y"
   send_to="12"
   sequence="100">
  <send>decept("elemental")</send>
  </trigger>

  <trigger
   group="autodecept"
   keep_evaluating="y"
   match="*Impossibly large flames burn with a deadly rage."
   omit_from_output="y"
   send_to="12"
   sequence="100">
  <send>decept("elemental")</send>
  </trigger>

  <trigger
   group="autodecept"
   keep_evaluating="y"
   match="*Rare minerals have given this elemental the gift of telepathy."
   omit_from_output="y"
   send_to="12"
   sequence="100">
  <send>decept("telepath")</send>
  </trigger>

  <trigger
   group="autodecept"
   keep_evaluating="y"
   match="*This large Earth Elemental looks enraged."
   omit_from_output="y"
   send_to="12"
   sequence="100">
  <send>decept("elemental")</send>
  </trigger>

<!--  autogold  -->
  <trigger
   expand_variables="y"
   group="autogold"
   keep_evaluating="y"
   match="*A pile of gold coins."
   sequence="100">
  <send>get coins</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="autogold"
   keep_evaluating="y"
   match="You get * gold coins."
   sequence="100">
  <send>drop %1 coins</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="autogold"
   keep_evaluating="y"
   match="*One miserable gold coin."
   sequence="100">
  <send>get coin</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="autogold"
   keep_evaluating="y"
   match="You get a gold coin."
   sequence="100">
  <send>drop 1 coin</send>
  </trigger>

   <!--  autohammer  -->
  <trigger
   expand_variables="y"
   group="autohammer"
   match="* tells the group 'preach finished!'"
   send_to="12"
   sequence="100">
  <send>local plane = GetVariable("currentPlane")
if plane ~= nil and plane == "thorn"  then
  Execute("ham")
end
</send>
  </trigger>

   <!--  keeplogin  -->   
  <!--

  <trigger
   enabled="y"
   custom_colour="5"
   expand_variables="y"
   keep_evaluating="y"
   match="*Telnet: avatar.outland.org 3000*"
   send_to="10"
   sequence="100">
  <send>arvore</send>
  </trigger>
-->

   <!--  autonextlogin  -->   
  <trigger
   custom_colour="5"
   expand_variables="y"
   group="autonextlogin"
   keep_evaluating="y"
   match="*Telnet: avatar.outland.org 3000*"
   send_to="12"
   sequence="100">
  <send>logNextChar()</send>
  </trigger>
   
   <!--  autopick  -->   
  <trigger
   expand_variables="y"
   group="autopick"
   match="* tell* the group 'pick *'"
   sequence="100">
  <send>lp %3
open %3</send>
  </trigger>
   
   <!--  autoportal  -->   
  <trigger
   expand_variables="y"
   group="autoportal"
   keep_evaluating="y"
   match="* tell* the group 'pp *'"
   send_to="12"
   sequence="100">
  <send>SendNoEcho("pp %3")</send>
  </trigger>
   
   <!--  autorc  -->   
	<trigger
   group="autorc"
   keep_evaluating="y"
   match="* tells you 'rc'"
   name="autorctrigger"
   send_to="10"
   sequence="100">
  <send>c 'remove curse' %1</send>
  </trigger>

  <trigger
   group="autorc"
   keep_evaluating="y"
   match="You dream of * telling you 'rc'"
   send_to="10"
   sequence="100">
  <send>stand
c 'remove curse' %1
sleep</send>
  </trigger>

   <!--  autorescue  -->
  <trigger
   expand_variables="y"
   group="autorescue"
   ignore_case="y"
   keep_evaluating="y"
   match="*'s attack* haven't hurt *!"
   send_to="12"
   sequence="100">
  <send>avaliarRescue("%3")</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="autorescue"
   ignore_case="y"
   keep_evaluating="y"
   match="*'s attack* strike* * *, with *"
   send_to="12"
   sequence="100">
  <send>avaliarRescue("%4")</send>
  </trigger>

  <trigger
   custom_colour="6"
   expand_variables="y"
   group="autorescue"
   ignore_case="y"
   keep_evaluating="y"
   match="*'s backstab strike* with *"
   send_to="12"
   sequence="100">
  <send>avaliarRescue("%1")</send>
  </trigger>

  <trigger
   group="autorescue"
   match="* successfully rescues you from *!"
   send_to="12"
   sequence="100">
  <send>avaliarRemRescue("%1")</send>
  </trigger>

  <trigger
   custom_colour="6"
   expand_variables="y"
   group="autorescue"
   ignore_case="y"
   keep_evaluating="y"
   match="*'s pierce strike* with *"
   send_to="12"
   sequence="100">
  <send>avaliarRescue("%1")</send>
  </trigger>

  <trigger
   group="autorescue"
   keep_evaluating="y"
   match="You successfully rescue *"
   send_to="12"
   sequence="100">
  <send>canRescue = true

--if GetVariable("playername") == "Ica" then
 -- Send("ff")
--end
</send>
  </trigger>

  <trigger
   group="autorescue"
   match="You fail to rescue *"
   send_to="12"
   sequence="100">
  <send>canRescue = true</send>
  </trigger>

  <trigger
   group="autorescue"
   match="* doesn't NEED rescuing!"
   send_to="12"
   sequence="100">
  <send>canRescue = true</send>
  </trigger>

  <trigger
   group="autorescue"
   match="* doesn't need your help."
   send_to="12"
   sequence="100">
  <send>canRescue = true</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="autorescue"
   keep_evaluating="y"
   match="XXX Ica emits a flash of unholy light*"
   send_to="12"
   sequence="100">
  <send>Send("rescue Ica")</send>
  </trigger>

  <trigger
   group="autorescue"
   keep_evaluating="y"
   match="* tells you 'area *'"
   send_to="10"
   sequence="100">
  <send>%2
aa</send>
  </trigger>

  <trigger
   group="autorescue"
   keep_evaluating="y"
   match="* is DEAD!!"
   send_to="12"
   sequence="100">
  <send>canRescue = true
chainrescue = true</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="autorescue"
   match="* pokes you in the ribs."
   name="autorescue"
   sequence="100">
  <send>rescue %1</send>
  </trigger>

<!--
  <trigger
   expand_variables="y"
   group="autorescue"
   ignore_case="y"
   keep_evaluating="y"
   match="* is killing *."
   send_to="12"
   sequence="100">
  <send>avaliarRescue("%1")</send>
  </trigger>
  -->
  
  <trigger
   enabled="y"
   keep_evaluating="n"
   group="autorescue"
   expand_variables="y"
   lines_to_match="2"
   match="\A\w+ suddenly appears at .* back and attacks!\n(.*)!\Z"
   multi_line="y"
   regexp="y"
   sequence="1">
  </trigger>
  
   <trigger
   expand_variables="y"
   group="autorescue"
   ignore_case="y"
   keep_evaluating="y"
   match="* tells the group 'add me'"
   send_to="12"
   sequence="100">
  <send>if isMday() then
  addRescue("%1")
end</send>
  </trigger> 

   <!--  autorest  -->
  <trigger
   group="autorest"
   keep_evaluating="y"
   match="* tell* the group 'rest'"
   sequence="100">
  <send>rest</send>
  </trigger>
   
   <!--  autosalv  -->
  <trigger
   group="autosalv"
   keep_evaluating="y"
   match="* tells the group 'salv *'"
   send_to="12"
   sequence="100">
  <send>if isMday() then
  Send("cast salvation %2")
end</send>
  </trigger>

	<!--  autosend  -->
  <trigger
   enabled="y"
   expand_variables="y"
   group="autosend"
   keep_evaluating="y"
   match="* tells the group 'send * *'"
   send_to="12"
   sequence="100">
  <send>if isMday() and isPersonInGroup("%2") == true then
  Send("cast send %2 %3")
end</send>
  </trigger>

	<!--  autoskin  -->
  <trigger
   group="autoskin"
   keep_evaluating="y"
   match="* tell* the group 'skin *'"
   sequence="100">
  <send>skin %3</send>
  </trigger>

   <!--  autosneak  -->
  <trigger
   enabled="y"
   group="autosneak"
   keep_evaluating="y"
   match="You attempt to move in the shadows."
   send_to="12"
   sequence="100">
  <send>remActionQueue("shadow=shadow")</send>
  </trigger>

  <trigger
   enabled="y"
   group="autosneak"
   keep_evaluating="y"
   match="You have no idea how to sneak!"
   send_to="12"
   sequence="100">
  <send>remActionQueue("sneak=sneak")</send>
  </trigger>

  <trigger
   enabled="y"
   group="autosneak"
   keep_evaluating="y"
   match="You attempt to move silently."
   send_to="12"
   sequence="100">
  <send>remActionQueue("sneak=sneak")</send>
  </trigger>

  <trigger
   enabled="y"
   group="autosneak"
   keep_evaluating="y"
   match="You attempt to move while hidden."
   send_to="12"
   sequence="100">
  <send>remActionQueue("m=m")</send>
  </trigger>
  
  <trigger
   enabled="y"
   group="autosneak"
   keep_evaluating="y"
   match="You have no idea how to move hidden!"
   send_to="12"
   sequence="100">
  <send>remActionQueue("m=m")</send>
  </trigger>

  <trigger
   enabled="y"
   group="autosneak"
   keep_evaluating="y"
   match="You can't get any sneakier!"
   send_to="12"
   sequence="100">
  <send>remActionQueue("sneak=sneak")</send>
  </trigger>

  <trigger
   enabled="y"
   group="autosneak"
   keep_evaluating="y"
   match="You can't shadowform any more than you already are!"
   send_to="12"
   sequence="100">
  <send>remActionQueue("shadow=shadow")</send>
  </trigger>

  <trigger
   enabled="y"
   group="autosneak"
   keep_evaluating="y"
   match="You no longer feel stealthy."
   send_to="12"
   sequence="100">
  <send>addActionQueue("sneak=sneak")</send>
  </trigger>

  <trigger
   enabled="y"
   group="autosneak"
   keep_evaluating="y"
   match="You no longer move hidden."
   send_to="12"
   sequence="100">
  <send>addActionQueue("m=m")</send>
  </trigger>

  <trigger
   enabled="y"
   group="autosneak"
   keep_evaluating="y"
   match="You no longer move in the shadows."
   send_to="12"
   sequence="100">
  <send>addActionQueue("shadow=shadow")</send>
  </trigger>

  <trigger
   enabled="y"
   group="autosneak"
   keep_evaluating="y"
   match="You already move while hidden."
   send_to="12"
   sequence="100">
  <send>remActionQueue("m=m")</send>
  </trigger>

   <!--  autostab  -->
  <trigger
   expand_variables="y"
   group="autostab"
   keep_evaluating="y"
   match="What with, your bare hands?"
   send_to="12"
   sequence="100">
  <send>if isMday() then
  Execute("gt no bow")
end
</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="autostab"
   keep_evaluating="y"
   match="You are not alert enough to slip into a combat in a controlled manner."
   send_to="12"
   sequence="100">
  <send>Execute("alert")
Execute("alert")

if isMday() then
  Execute("gt slip failed")
end
</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="autostab"
   ignore_case="y"
   keep_evaluating="y"
   match="You follow @groupleader *."
   send_to="9"
   sequence="100"
   variable="lastdirmoved">
  <send>%1</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="autostab"
   keep_evaluating="y"
   match="How do you mean to sneak anywhere without sneaking?"
   sequence="100">
  <send>sneak=sneak=@lastdirmoved</send>
  </trigger>

   <!--  autostartsalv  -->
  <trigger
   group="autostartsalv"
   keep_evaluating="y"
   match="* tell* the group 'start salv *'"
   send_to="10"
   sequence="100">
  <send>c salvation %3</send>
  </trigger>
   
   <!--  autogetsteel  -->
  <trigger
   expand_variables="y"
   group="autogetsteel"
   keep_evaluating="y"
   match="* tell* the group 'on run'"
   send_to="12"
   sequence="100">
  <send>Send("tell cabeca steel")
Send("tell romulo bark")</send>
  </trigger>

<!--  autotrack  -->
  <trigger
   expand_variables="y"
   group="autotrack"
   match="You sense that * is near, but you have no idea where."
   sequence="100">
  <send>emo sense that %1 is near, but have no idea where.</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="autotrack"
   match="You have found your quarry!!"
   sequence="100">
  <send>emo found his quarry!!</send>
  </trigger>

  <trigger
   group="autotrack"
   match="* tell* the group 'track *'"
   sequence="100">
  <send>track %3</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="autotrack"
   keep_evaluating="y"
   match="You can't sense a trail to * from here."
   sequence="100">
  <send>emo cant sense trail to %1 from here</send>
  </trigger>

	<trigger
   group="autotrack"
   keep_evaluating="y"
   match="^You see your quarry\'s trail head (north|south|east|west|up|down) from here\!$"
   regexp="y"
   sequence="100">
  <send>emo track points |bc|%1</send>
  </trigger>

<!--  autotrackwalk  -->
  <trigger
   expand_variables="y"
   group="autotrackwalk"
   match="You have found your quarry!!"
   send_to="12"
   sequence="100">
  <send>EnableTriggerGroup ("autotrackwalk", false)</send>
  </trigger>
  
  <trigger
   group="autotrackwalk"
   keep_evaluating="y"
   match="^You see your quarry\'s trail head (north|south|east|west|up|down) from here\!$"
   regexp="y"
   sequence="100">
  <send>%1</send>
  </trigger>
  
   <!--  autowall  -->  
    <trigger
   group="autowall"
   keep_evaluating="y"
   match="* tells you 'wall *'"
   send_to="10"
   sequence="100">
  <send>c 'wall of thorns' %2</send>
  </trigger>

  <trigger
   group="autowall"
   keep_evaluating="y"
   match="You dream of * telling you 'wall *'"
   send_to="10"
   sequence="100">
  <send>stand
c 'wall of thorns' %2
sleep</send>
  </trigger>
  
   <!--  classbld  -->  
    <trigger
   custom_colour="3"
   group="classbld"
   keep_evaluating="y"
   match="You sink deeper into a bladetrance."
   send_to="12"
   sequence="100">
  <send>remActionQueue("bladetrance deepen")</send>
  </trigger>

  <trigger
   custom_colour="3"
   group="classbld"
   keep_evaluating="y"
   match="You sink into a bladetrance."
   send_to="12"
   sequence="100">
  <send>remActionQueue("bladetrance enter")
addActionQueue("bladetrance deepen")</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   group="classbld"
   keep_evaluating="y"
   match="You are already using veil of blades."
   send_to="12"
   sequence="100">
  <send>remActionQueue("stance veil")</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   group="classbld"
   keep_evaluating="y"
   match="One of your Exhaust timers has elapsed. (veil of blades)"
   send_to="12"
   sequence="100">
  <send>addActionQueue("stance veil")</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="classbld"
   keep_evaluating="y"
   match="* tell* the group 'off run'"
   send_to="12"
   sequence="100">
  <send>SendNoEcho("bladetrance break")</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="classbld"
   keep_evaluating="y"
   match="You stop using inspiring dance."
   sequence="100">
  <send>gt Inspire down</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   group="classbld"
   keep_evaluating="y"
   match="You stop using veil of blades."
   send_to="12"
   sequence="100">
  <send>Send("bladetrance break")</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="classbld"
   keep_evaluating="y"
   match="* tell* the group 'bt+'"
   send_to="12"
   sequence="100">
  <send>SendNoEcho("bladetrance deepen")</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="classbld"
   keep_evaluating="y"
   match="xxx You are not even in a bladetrance."
   sequence="100">
  <send>bladetrance enter
bladetrance deepen</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="classbld"
   keep_evaluating="y"
   match="* tell* the group 'on boss'"
   send_to="12"
   sequence="100">
  <send>SendNoEcho("bladetrance deepen")
SendNoEcho("bladetrance deepen")
SendNoEcho("nod")
</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="classbld"
   keep_evaluating="y"
   match="* tell* the group 'bt-'"
   send_to="12"
   sequence="100">
  <send>SendNoEcho("bladetrance lighten")</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="classbld"
   keep_evaluating="y"
   match="* tell* the group 'on run'"
   send_to="12"
   sequence="100">
  <send>SendNoEcho("stance veil")
SendNoEcho("bladetrance enter")
SendNoEcho("bladetrance deepen")
  </send>
  </trigger>

  <trigger
   expand_variables="y"
   group="classbld"
   keep_evaluating="y"
   match="* tell* the group 'off boss'"
   send_to="12"
   sequence="100">
  <send>SendNoEcho("bladetrance lighten")
SendNoEcho("bladetrance lighten")
</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   group="classbld"
   keep_evaluating="y"
   match="You emerge from your bladetrance into a vacant reality."
   send_to="12"
   sequence="100">
  <send>addActionQueue("bladetrance enter")</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   group="classbld"
   keep_evaluating="y"
   match="You adopt veil of blades."
   send_to="12"
   sequence="100">
  <send>remActionQueue("stance veil")
addActionQueue("bladetrance enter")
</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   group="classbld"
   keep_evaluating="y"
   match="You are already in a bladetrance."
   send_to="12"
   sequence="100">
  <send>remActionQueue("bladetrance enter")</send>
  </trigger>
  
   <!--  classbzk  -->  
    <trigger
   custom_colour="3"
   group="classbzk"
   keep_evaluating="y"
   match="You slowly come out of your rage."
   send_to="12"
   sequence="100">
  <send>addActionQueue("scar")</send>
  </trigger>

  <trigger
   custom_colour="3"
   group="classbzk"
   keep_evaluating="y"
   match="You are filled with rage."
   send_to="12"
   sequence="100">
  <send>remActionQueue("scar")</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="classbzk"
   keep_evaluating="y"
   match="* tell* the group 'on run'"
   send_to="12"
   sequence="100">
  <send>Execute("scar=scar")</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   group="classbzk"
   keep_evaluating="y"
   match="xxxSlowly dragging your blade across your chest, you leave a deep scar."
   send_to="12"
   sequence="100">
  <send>remActionQueue("scar=scar")</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   group="classbzk"
   keep_evaluating="y"
   match="xxxYou don a crimson mask as you slice open your own forehead!"
   send_to="12"
   sequence="100">
  <send>remActionQueue("scar=scar")</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   group="classbzk"
   keep_evaluating="y"
   match="xxxYou gouge deep into your arm with your weapon!"
   send_to="12"
   sequence="100">
  <send>remActionQueue("scar=scar")</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   group="classbzk"
   keep_evaluating="y"
   match="xxxYou slice your hand and raise your shaking fist as blood flows down your arm!"
   send_to="12"
   sequence="100">
  <send>remActionQueue("scar=scar")</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   group="classbzk"
   keep_evaluating="y"
   match="xxxYou slit yourself up a treat!"
   send_to="12"
   sequence="100"
  >
  <send>remActionQueue("scar=scar")</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   group="classbzk"
   keep_evaluating="y"
   match="You are already in a frenzy."
   send_to="12"
   sequence="100">
  <send>remActionQueue("scar")</send>
  </trigger>
  
  <!--  classcle  -->
  <trigger
   expand_variables="y"
   group="classcle"
   keep_evaluating="y"
   match="A protective aura surrounds yourself and your allies!"
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'protective vigil'")</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="classcle"
   keep_evaluating="y"
   match="Your unholy rampage comes to an end."
   sequence="100">
  <send>t self rampage (dmg) gone</send>
  </trigger>
  
  <trigger
   group="classcle"
   keep_evaluating="y"
   match="You have already invoked a powerful pantheon spell."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'artificer blessing'")
remActionQueue("c 'protective vigil'")</send>
  </trigger>
  
  <trigger
   group="classcle"
   keep_evaluating="y"
   match="The artificer blessing flickers and fades away."
   send_to="12"
   sequence="100">
  <send>if GetVariable("playername") == "Capelao" then
     addActionQueue("c 'artificer blessing'")
end
</send>
  </trigger>
  
  <trigger
   group="classcle"
   keep_evaluating="y"
   match="An emptiness replaces your feeling of glory."
   send_to="12"
   sequence="100">
  <send>addActionQueue("c 'glorious conquest'")</send>
  </trigger>
  
  <trigger
   group="classcle"
   keep_evaluating="y"
   match="You blaze with an aura of glory."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'glorious conquest'")</send>
  </trigger>
  
  <trigger
   group="classcle"
   keep_evaluating="y"
   match="An artificer blessing surrounds yourself and your allies!"
   name="classcle"
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'artificer blessing'")</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="classcle"
   keep_evaluating="y"
   match="The protective aura disappears."
   send_to="12"
   sequence="100">
  <send>if GetVariable("playername") == "Papapop" then
    addActionQueue("c 'protective vigil'")
end
</send>
  </trigger>
  
  <trigger
   group="classcle"
   keep_evaluating="y"
   match="You are already bathed in glory."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'glorious conquest'")</send>
  </trigger>
  
	<!--  classdru  -->  
    <trigger
   expand_variables="y"
   group="classdru"
   keep_evaluating="y"
   match="this is a trigger to identify a druid class"
   name="classdru"
   sequence="100">
  </trigger>

   <!--  classmag  -->
  <trigger
   expand_variables="y"
   group="classmag"
   keep_evaluating="y"
   match="bla bla bla"
   sequence="100">
  </trigger>
   
   <!--  classmnd  -->  
  <trigger
   expand_variables="y"
   group="classmnd"
   match="One of your Exhaust timers has elapsed. (psyphon)"
   sequence="10">
  </trigger>
  
   <!--  classmonshf  -->  
  <trigger
   group="classmonshf"
   keep_evaluating="y"
   match="Your counterattack knocks * down!"
   send_to="12"
   name="classmonshf"
   sequence="100">
  <send>if getTierChar() == "Lord" then
  SendNoEcho("ctr full crush stay")
end
</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   group="classmonshf"
   keep_evaluating="y"
   match="Your hands return to normal."
   send_to="12"
   sequence="100">
  <send>addActionQueue("c 'stone fist'")</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   group="classmonshf"
   keep_evaluating="y"
   match="You focus on the Dagger Hand technique."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'dagger hand'")</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   group="classmonshf"
   keep_evaluating="y"
   match="You focus on the Stone Fist technique."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'stone fist'")</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   group="classmonshf"
   keep_evaluating="y"
   match="You can only harness your Qi while unarmed."
   send_to="12"
   sequence="100">
  <send>if isMday() then
  Send("emote monk using weapons alert!")
else
  Send("t self monk using weapons alert!")
end
</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   group="classmonshf"
   keep_evaluating="y"
   match="You cannot perform this technique because your hands are already augmented."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'stone fist'")</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="classmonshf"
   keep_evaluating="y"
   match="* gasps with horror as you shatter *!"
   sequence="100">
  <send>counter crush stay</send>
  </trigger>
  
  <trigger
   group="classmonshf"
   keep_evaluating="y"
   match="* is DEAD!!"
   send_to="12"
   sequence="100">
  <send>if getTierChar() == "Lord" then
  SendNoEcho("ctr push stay")
end
</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="classmonshf"
   keep_evaluating="y"
   match="You wield *."
   send_to="12"
   sequence="100">
  <send>if isMday() then
Send("gt |BR|Monk type wielding a weapon, this doesn't look good|N|")
end</send>
  </trigger>
  
	<!--  classpal  -->  
  <trigger
   enabled="y"
   group="classpal"
   keep_evaluating="y"
   match="* tells you 'Your devotion to prayers is commendable, but I am not yet ready to aid you further.'"
   send_to="12"
   name="classpal"
   sequence="100">
  <send>if getTierChar() == "Hero" then
		remActionQueue("c prayer precision")
	else
        remActionQueue("c prayer 'Malice aura'")
	end</send>
  </trigger>
  
  <trigger
   enabled="y"
   group="classpal"
   keep_evaluating="y"
   match="*'s presence disappears."
   send_to="12"
   sequence="100">
  <send>if getTierChar() == "Hero" then
		addActionQueue("c prayer precision")
	else
        addActionQueue("c prayer 'Malice aura'")
	end</send>  
  </trigger>
  
  <trigger
   enabled="y"
   group="classpal"
   keep_evaluating="y"
   match="You are already zealous."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'holy zeal'")</send>
  </trigger>
  
  <trigger
   enabled="y"
   group="classpal"
   keep_evaluating="y"
   match="You are consumed by holy zeal."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'holy zeal'")</send>
  </trigger>
  
  <trigger
   enabled="y"
   group="classpal"
   keep_evaluating="y"
   match="You feel less zealous."
   send_to="12"
   sequence="100">
  <send>addActionQueue("c 'holy zeal'")</send>
  </trigger>
  
  <trigger
   enabled="y"
   group="classpal"
   keep_evaluating="y"
   match="The presence of * fills you, and you feel more astute with stunning blows."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c prayer Stupefy")</send>
  </trigger>
  
  <trigger
   enabled="y"
   group="classpal"
   keep_evaluating="y"
   match="* clears your thoughts, allowing you to focus on critical hits."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c prayer precision")</send>
  </trigger>
  
	<trigger
   enabled="y"
   group="classpal"
   keep_evaluating="y"
   match="* surrounds you with blinding light in response to your prayer."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c prayer 'Malice aura'")</send>
  </trigger>  
  
	<trigger
   enabled="y"
   group="classpal"
   keep_evaluating="y"
   match="You slowly come out of your rage."
   send_to="12"
   sequence="100">
  <send>addActionQueue("c fervor")</send>
  </trigger> 

	<trigger
   enabled="y"
   group="classpal"
   keep_evaluating="y"
   match="*'s fanatical blessing fades away."
   send_to="12"
   sequence="100">
  <send>addActionQueue("c fervor")</send>
  </trigger>   
  
	<trigger
   enabled="y"
   group="classpal"
   keep_evaluating="y"
   match="* causes you to rage in fanatical fervor."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c fervor")</send>
  </trigger>   
  
	<trigger
   enabled="y"
   group="classpal"
   keep_evaluating="y"
   match="* sees no need to bestow a blessing upon you."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c fervor")</send>
  </trigger>   
  
   <!--  classprs  -->  
  <trigger
   expand_variables="y"
   group="classprs"
   keep_evaluating="y"
   match="* pales as * sees * death before *."
   sequence="100">
  <send>c clarify %1
c clarify %1</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="classprs"
   keep_evaluating="y"
   match="You are blind!!!"
   sequence="100">
  <send>preach clarify</send>
  </trigger>  
  
  <trigger
   expand_variables="y"
   group="classprs"
   keep_evaluating="y"
   match="* tell* the group 'on boss'"
   send_to="12"
   sequence="100">
  <send>SendNoEcho("aug 2")
EnableTimer("autoheal", true)
</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="classprs"
   keep_evaluating="y"
   match="* tell* the group 'off boss'"
   send_to="12"
   sequence="100">
  <send>SendNoEcho("aug off")
EnableTimer("autoheal", false)
</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="classprs"
   match="The protective aura fades from around your body."
   keep_evaluating="y"
   send_to="12"
   sequence="100">
  <send>if isMday() then
Execute("quicken 9")
Execute("cast inno")
Execute("quicken off")
Execute("preach sanc")
end
</send>
  </trigger>
  
  <trigger
   group="classprs"
   keep_evaluating="y"
   match="* tells you 'div'"
   send_to="10"
   sequence="100">
  <send>c div %1</send>
  </trigger>
  
   <!--  classpsi  -->  
  <trigger
   group="classpsi"
   keep_evaluating="y"
   match="One of your Exhaust timers has elapsed. (kinetic chain)"
   send_to="12"
   sequence="100">
  <send>addActionQueue("c 'kinetic chain'")</send>
  </trigger>
  
  <trigger
   group="classpsi"
   keep_evaluating="y"
   match="xxx * gives you Diamante's Pointy Stick."
   send_to="12"
   sequence="100">
  <send>SendNoEcho("ww")</send>
  </trigger>
  
  <trigger
   group="classpsi"
   keep_evaluating="y"
   match="xxx * gives you Garra Stick."
   send_to="12"
   sequence="100">
  <send>SendNoEcho("ww")</send>
  </trigger>
  
  <trigger
   group="classpsi"
   keep_evaluating="y"
   match="xxx * gives you Graveto."
   send_to="12"
   sequence="100">
  <send>SendNoEcho("ww")</send>
  </trigger>
  
  <trigger
   group="classpsi"
   keep_evaluating="y"
   match="xxx * gives you Orion's Pointy Stick."
   send_to="12"
   sequence="100">
  <send>SendNoEcho("ww")</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="classpsi"
   keep_evaluating="y"
   match="You stop using Yorimandil's Blindfold."
   sequence="100">
  <send>c 'minds eye'</send>
  </trigger>

  <trigger
   custom_colour="3"
   expand_variables="y"
   group="classpsi"
   keep_evaluating="y"
   match="* surrounds * with a telekinetic sink."
   send_to="12"
   sequence="100">
  <send>lag0Cast = false
SetVariable("gravitasMob", "%1")
Note("Cast off, gravitas mob: " .. "%1")</send>
  </trigger>

  <trigger
   group="classpsi"
   keep_evaluating="y"
   match="xxx * gives you Selfie Stick."
   send_to="12"
   sequence="100">
  <send>SendNoEcho("ww")</send>
  </trigger>

  <trigger
   group="classpsi"
   keep_evaluating="y"
   match="xxx * gives you Unha Stick."
   send_to="12"
   sequence="100">
  <send>SendNoEcho("ww")</send>
  </trigger>

  <trigger
   group="classpsi"
   keep_evaluating="y"
   match="Your weapons already possess consciousness."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'conscious weapon'")</send>
  </trigger>

  <trigger
   group="classpsi"
   keep_evaluating="y"
   match="Your weapons already possess intelligence."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'intelligent weapon'")</send>
  </trigger>

  <trigger
   group="classpsi"
   keep_evaluating="y"
   match="Your weapons already possess the ability to disable."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'disabling weapon'")</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="classpsi"
   match="You have been KILLED!!"
   sequence="100">
  <send>stand
c 'minds eye'</send>
  </trigger>

  <trigger
   group="classpsi"
   keep_evaluating="y"
   match="Your weapons already possess the ability to fell."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'felling weapon'")</send>
  </trigger>

  <trigger
   group="classpsi"
   keep_evaluating="y"
   match="Your weapons already possess the ability to stun."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'stunning weapon'")</send>
  </trigger>

  <trigger
   group="classpsi"
   keep_evaluating="y"
   match="Your weapons lose the ability to disable."
   send_to="12"
   sequence="100">
  <send>addActionQueue("c 'disabling weapon'")</send>
  </trigger>

  <trigger
   group="classpsi"
   keep_evaluating="y"
   match="Your weapons lose the ability to fell."
   send_to="12"
   sequence="100">
  <send>addActionQueue("c 'felling weapon'")</send>
  </trigger>

  <trigger
   group="classpsi"
   keep_evaluating="y"
   match="Your weapons lose the ability to stun."
   send_to="12"
   sequence="100">
  <send>addActionQueue("c 'stunning weapon'")</send>
  </trigger>

  <trigger
   group="classpsi"
   match="One of your Exhaust timers has elapsed. (distracting weapon)"
   omit_from_output="y"
   sequence="10">
  </trigger>
    
	<trigger
   group="classpsi"
   match="One of your Exhaust timers has elapsed. (stunning weapon)"
   omit_from_output="y"
   sequence="10">
  </trigger> 

  <trigger
   group="classpsi"
   match="One of your Exhaust timers has elapsed. (felling weapon)"
   omit_from_output="y"
   sequence="10">
  </trigger>

  <trigger
   group="classpsi"
   keep_evaluating="y"
   match="You imbue your weapons with consciousness."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'conscious weapon'")</send>
  </trigger>

  <trigger
   group="classpsi"
   keep_evaluating="y"
   match="Your weapons lose their consciousness."
   send_to="12"
   sequence="100">
  <send>addActionQueue("c 'conscious weapon'")</send>
  </trigger>

  <trigger
   group="classpsi"
   keep_evaluating="y"
   match="Your weapons will no longer intelligently attack your opponents."
   send_to="12"
   sequence="100">
  <send>addActionQueue("c 'intelligent weapon'")</send>
  </trigger>

  <trigger
   group="classpsi"
   keep_evaluating="y"
   match="You imbue your weapons with intelligence."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'intelligent weapon'")</send>
  </trigger>

  <trigger
   group="classpsi"
   match="One of your Exhaust timers has elapsed. (restricting weapon)"
   omit_from_output="y"
   sequence="10">
  </trigger>

  <trigger
   group="classpsi"
   keep_evaluating="y"
   match="You imbue your weapons with the ability to disable."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'disabling weapon'")</send>
  </trigger>
  
  <trigger
   group="classpsi"
   keep_evaluating="y"
   match="You imbue your weapons with the ability to fell."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'felling weapon'")</send>
  </trigger>
  
  <trigger
   group="classpsi"
   keep_evaluating="y"
   match="You imbue your weapons with the ability to stun."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'stunning weapon'")</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="classpsi"
   match="You must be wielding two weapons to use this spell!"
   send_to="12"
   sequence="100">
  <send>if isMday() then
  Send("emo could be missing his |by|weapons")
end
Execute("ww")</send>
  </trigger>

  <trigger
   group="classpsi"
   keep_evaluating="y"
   match="You develop a strong kinetic link with your weapons."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'kinetic chain'")</send>
  </trigger>
  
  <trigger
   group="classpsi"
   keep_evaluating="y"
   match="* gives you several items."
   send_to="12"
   sequence="100">
  <send>SendNoEcho("ww")</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   expand_variables="y"
   group="classpsi"
   ignore_case="y"
   keep_evaluating="y"
   match="@gravitasMob is DEAD!!"
   send_to="12"
   sequence="100">
  <send>lag0Cast = true
SetVariable("gravitasMob", "")
Note("Cast back on")</send>
  </trigger>
  
  <trigger
   group="classpsi"
   match="One of your Exhaust timers has elapsed. (disabling weapon)"
   omit_from_output="y"
   sequence="10">
  </trigger>
  
  <trigger
   custom_colour="4"
   expand_variables="y"
   group="classpsi"
   keep_evaluating="y"
   match="Sparks fly as * force field absorbs the attack!"
   name="shattertrigger"
   send_to="12"
   sequence="100">
  <send>Send("c shatterspell")
EnableTrigger("shattertrigger", false)
scriptAfter(10, 'EnableTrigger("shattertrigger", true)')</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="classpsi"
   match="You wield *."
   name="psiwield"
   send_to="12"
   sequence="100">
  <send>scriptAfter(1, 'lag0Cast = true')</send>
  </trigger>
  
   <!--  classshf  -->
  <trigger
   group="classshf"
   match="*'s * chakra pulses with *"
   send_to="12"
   sequence="100">
  <send>SendNoEcho("qi drain %2")</send>
  </trigger>
   
  <trigger
   group="classshf"
   match="One of your Exhaust timers has elapsed. (vampire fang)"
   sequence="10">
  <send>t self vampire fang avaiable again</send>
   </trigger>
  
  <!--  classsor  -->
    <trigger
   group="classsor"
   keep_evaluating="y"
   match="You are already shrouded."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'death shroud'")</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="classsor"
   keep_evaluating="y"
   match="One of your Exhaust timers has elapsed. (tainted genius)"
   sequence="100">
  <send>t self |BW| tainted genius avaiable</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="classsor"
   keep_evaluating="y"
   match="Your mind drifts off onto the joy of killing!"
   send_to="12"
   sequence="100">
  <send>if isMday() then
  SendNoEcho("emo |BC| tainted")
end
</send>
  </trigger>
  
  <trigger
   group="classsor"
   keep_evaluating="y"
   match="The grey shroud of death fades."
   send_to="12"
   sequence="100">
  <send>addActionQueue("c 'death shroud'")</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="classsor"
   keep_evaluating="y"
   match="^Your gain is\: (.*?)\/(.*?) hp\, (.*?)\/(.*?) m\, (.*?)\/(.*?) mv (.*?)\/(.*?) prac\.$"
   regexp="y"
   send_to="12"
   sequence="100">
  <send>if isMday() then
  SendNoEcho("c taint")
end
</send>
  </trigger>
  
  <trigger
   group="classsor"
   keep_evaluating="y"
   match="You now have a death shroud."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'death shroud'")</send>
  </trigger>
  
   <!--  classstm  -->  
  <trigger
   expand_variables="y"
   group="classstm"
   keep_evaluating="y"
   match="* tell* the group 'off run'"
   send_to="12"
   sequence="100">
  <send>EnableTrigger("youfollowstm", false)</send>
  </trigger>
  
  <trigger
   group="classstm"
   keep_evaluating="y"
   match="Your spring rain stratum disperses!"
   send_to="12"
   sequence="100">
  <send>addActionQueue("ssr")</send>
  </trigger>
  
  <trigger
   group="classstm"
   keep_evaluating="y"
   match="You are surrounded by a warm spring rain stratum."
   send_to="12"
   sequence="100">
  <send>remActionQueue("ssr")</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="classstm"
   keep_evaluating="y"
   match="* tell* the group 'on run'"
   send_to="12"
   sequence="100">
  <send>SendNoEcho("ssr")
EnableTrigger("youfollowstm", true)</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="classstm"
   keep_evaluating="y"
   match="The rain dies down."
   sequence="100">
  <send>ssr</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="classstm"
   keep_evaluating="y"
   match="You follow *"
   name="youfollowstm"
   sequence="100">
  <send>sr</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="classstm"
   match="* tell* the group 'sleep'"
   sequence="10">
  <send>ssr=sr</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="classstm"
   match="* tell* the group 'sr'"
   sequence="10">
  <send>ssr</send>
  </trigger>

   <!--  classviz  -->
  <trigger
   expand_variables="y"
   group="classviz"
   keep_evaluating="y"
   match="*An eerie pool of blood has formed here!"
   name="vizpool"
   send_to="12"
   sequence="100">
  <send>castSanguenPax()</send>
  </trigger>

  <trigger
   group="classviz"
   keep_evaluating="y"
   match="* is DEAD!!"
   send_to="12"
   sequence="100">
  <send>vizFinalRiteCasted = false</send>
  </trigger>

	<!--  classwar  -->
  <trigger
   enabled="y"
   group="classwar"
   keep_evaluating="y"
   match="^(.*) leaves behind a perfect (.*) due to an artificer blessing!$"
   regexp="y"
   sequence="100">
  <send>emo |BC| Pgem popped from artificer blessing!</send>
  </trigger>

	<!--  classwzd  -->
  <trigger
   group="classwzd"
   match="One of your Exhaust timers has elapsed. (ether crash)"
   omit_from_output="y"
   sequence="10">
  </trigger>

  <trigger
   group="classwzd"
   match="One of your Exhaust timers has elapsed. (ether link)"
   omit_from_output="y"
   sequence="10">
  </trigger>

  <trigger
   group="classwzd"
   match="One of your Exhaust timers has elapsed. (ether warp)"
   omit_from_output="y"
   sequence="10">
  </trigger>

  <trigger
   group="classwzd"
   keep_evaluating="y"
   match="You manipulate the Ether to your advantage."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'ether link'")</send>
  </trigger>

  <trigger
   group="classwzd"
   keep_evaluating="y"
   match="You no are no longer linked to others through the Ether."
   send_to="12"
   sequence="100">
  <send>addActionQueue("c 'ether link'")</send>
  </trigger>

   <!--  corp_loot  -->
  <trigger
   custom_colour="12"
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   match="*A heap of gems shifts under its own weight."
   sequence="100">
  <send>get all pile</send>
  </trigger>

<trigger
   custom_colour="12"
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   match="*A jumbled pile of assorted jewels is ripe for the picking."
   sequence="100">
  <send>get all pile</send>
  </trigger>  
  
<trigger
   custom_colour="12"
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   match="Guanna is DEAD!!"
   sequence="100">
  <send>get rattle corpse
put rattle xmain</send>
  </trigger>  
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="A single white feather lies amongst the forest leaves."
   send_to="12"
   sequence="100">
  <send>getpassleader("feather", false)</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="The unlucky adventurer freezes, mid-step."
   send_to="12"
   sequence="100">
  <send>getpassleader("corpse", false)</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="*A clear ball of crystal stands here glowing softly."
   send_to="12"
   sequence="100">
  <send>getpassleader("ball", false)</send>
  </trigger>   
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="You get a small wooden lockbox from corpse of *"
   send_to="12"
   sequence="100">
  <send>SendNoEcho("drop lockbox")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="A trunk of stone is DEAD!!"
   send_to="12"
   sequence="100">
  <send>getpassleader("clump", true)</send>
  </trigger>  

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="You get a summons from Alastar from corpse of *"
   send_to="12"
   sequence="100">
  <send>passleader("summon")</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="You get a tooled bone from corpse of Rastar the Injestor."
   send_to="12"
   sequence="100">
  <send>passleader("bone")</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="You get an emblem of Tul-Sith from corpse of Granpater Laur."
   send_to="12"
   sequence="100">
  <send>passleader("emblem")</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="Screaming with rage, the fires wither and die. From within them"
   send_to="12"
   sequence="100">
  <send>getpassleader("amulet", false)</send>
  </trigger>
  
  <trigger
   custom_colour="12"
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="*A mix of various jewels and gems are jumbled into one big pile."
   sequence="100">
  <send>get all pile</send>
  </trigger>

  <trigger
   custom_colour="12"
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   match="*A pile of jewels has been scattered haphazardly."
   sequence="100">
  <send>get all pile</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="You get *key* from corpse of *"
   send_to="12"
   sequence="100">
  <send>passleader("key")</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   match="The Lord Typhus' shadow is DEAD!!"
   send_to="12"
   sequence="100">
  <send>getpassleader("staff", true)</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="All hail the new kzinti arena champion!"
   send_to="12"
   sequence="100">
  <send>getpassleader("insignia", false)</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="Captain Dieme is DEAD!!"
   send_to="12"
   sequence="100">
  <send>getpassleader("letter", true)</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="Congealed pain essence leaks from the dying leech."
   send_to="12"
   sequence="100">
  <send>getpassleader("essence", false)</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="Cyskadella is DEAD!!"
   send_to="12"
   sequence="100">
  <send>getpassleader("all.grub", true)</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="The Patriarch leaves behind a token of gratitude as he journeys to the afterlife."
   send_to="12"
   sequence="100">
  <send>getpassleader("scale", false)</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="The Rock Wyrm mother is DEAD!!"
   sequence="100">
  <send>get corpse
put corpse xmain</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   match="An elder mimic is DEAD!!"
   sequence="100">
  <send>get all.cash</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="The automaton falls to pieces"
   send_to="12"
   sequence="100">
  <send>getpassleader("bit", false)</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="An extremely well guarded merchant caravan is DEAD!!"
   sequence="100">
  <send>get all coins</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   match="An old fire pit is filled with partially charred wood and ash."
   send_to="12"
   sequence="100">
  <send>getpassleader("bracer", false)</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="Demon Lord Typhus is DEAD!!"
   send_to="12"
   sequence="100">
  <send>getpassleader("staff", true)</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="Foraging drops a cache of dead grubs."
   send_to="12"
   sequence="100">
  <send>getpassleader("grub", false)</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="The flames subside, leaving a crystalline wand in their wake."
   send_to="12"
   sequence="100">
  <send>getpassleader("wand", false)</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="You get a carved and polished diamond from corpse of Sellah the survivor."
   send_to="12"
   sequence="100">
  <send>passleader("diamond")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="The light catches on a silvery speck."
   send_to="12"
   sequence="100">
  <send>getpassleader("key", false)</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="As the last enemy falls, tiny shadows gather from each corpse."
   send_to="12"
   sequence="100">
  <send>getpassleader("shadow", false)</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="As the last guardian hits the floor, dead, you hear a CLANG,"
   send_to="12"
   sequence="100">
  <send>getpassleader("ann", false)</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="You get a halfling thief's decomposing arm from corpse of Hrjaa."
   send_to="12"
   sequence="100">
  <send>passleader("arm")</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="As your eyes adjust to the darkness, you are drawn to a single"
   send_to="12"
   sequence="100">
  <send>getpassleader("shard", false)</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="Foraging drops a couple of snail pieces."
   send_to="12"
   sequence="100">
  <send>getpassleader("snail", false)</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="Foraging drops a dry dirt fruit."
   send_to="12"
   sequence="100">
  <send>getpassleader("fruit", false)</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="Foraging drops honey-like goo."
   send_to="12"
   sequence="100">
  <send>getpassleader("honey", false)</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   match="A Chimerical griffon is DEAD!!"
   sequence="100">
  <send>get corpse
put corpse xmain</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="* drops a perfect *."
   send_to="12"
   sequence="100">
  <send>getpassleader("perfect", false)</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="^(.*) leaves behind a perfect (.*)!$"
   regexp="y"
   send_to="12"
   sequence="100">
  <send>getpassleader("perfect", false)</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="A Glacial Guardian is DEAD!!"
   send_to="12"
   sequence="100">
  <send>getpassleader("milk", true)</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="The shadow falls to pieces."
   send_to="12"
   sequence="100">
  <send>getpassleader("shadow", false)</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="advantage and put out brightly coloured berries."
   sequence="100">
  <send>get all bush</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="A crown falls to the ground as the Patriarch is vanquished."
   send_to="12"
   sequence="100">
  <send>getpassleader("crown", false)</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="A deep gnome recovery team is DEAD!!"
   send_to="12"
   sequence="100">
  <send>getpassleader("gem", true)</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="help but stop and give silent homage to this colossus of trees."
   sequence="100">
  <send>get bark</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="A family of goblins is DEAD!!"
   sequence="100">
  <send>get all.gem corp</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="A giant creature of Ice is DEAD!!"
   send_to="12"
   sequence="100">
  <send>getpassleader("clump", true)</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="A giant-shaped swirl of leaves is DEAD!!"
   send_to="12"
   sequence="100">
  <send>getpassleader("clump", true)</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="corp_loot"
   keep_evaluating="y"
   match="A githyanki lookout is DEAD!!"
   sequence="100">
  <send>get corpse
put corpse xmain</send>
  </trigger>

  <!--  Counters  -->
  <trigger
   group="Counters"
   match="*|*"
   name="GroupGrabDmg"
   send_to="12"
   sequence="100">
  <send>local nCheck = tonumber("%1")
local p = ""
local s = " " .. "%2"

if nCheck == nil then return end
p = string.sub(s, string.find(s, " ") + 1)
p = string.sub(p, string.find(p, " ") + 1)
p = string.sub(p, string.find(p, " ") + 1)
if string.sub(p, 0, string.find(p, " ") - 1) == "Hero" or string.sub(p, 0, string.find(p, " ") - 1) == "Lord" then
 p = string.sub(p, string.find(p, " ") + 1)
end
if tonumber(string.sub(p, 0, string.find(p, " ") - 1)) ~= nil then
p = string.sub(p, string.find(p, " ") + 1)
p = string.sub(p, string.find(p, " ") + 1)
end
p = string.sub(p, 0, string.find(p, " ") - 1)
counterCommand("add " .. p)</send>
  </trigger>

  <trigger
   custom_colour="3"
   expand_variables="y"
   group="Counters"
   ignore_case="y"
   keep_evaluating="y"
   match="^(@!monDamList)\'s (.*?) with (.*?)(@!dverbsShort)(.*?) (@!dverbsIntensity)(.*?)$"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100">
  <send>addDamage("%1", "%4")</send>
  </trigger>

  <trigger
   custom_colour="3"
   expand_variables="y"
   group="Counters"
   ignore_case="y"
   keep_evaluating="y"
   match="^(@!monDamList)\'s attacks haven't hurt (.*?)!$"
   omit_from_output="y"
   regexp="y"
   sequence="100">
  </trigger>
  
  <trigger
   custom_colour="4"
   expand_variables="y"
   group="Counters"
   ignore_case="y"
   keep_evaluating="y"
   match="^(you|your) (.*?) with (.*?)(@!dverbsShort)(.*?) (@!dverbsIntensity)(.*?)$"
   regexp="y"
   send_to="12"
   sequence="100">
  <send>addDamage("%1", "%4")</send>
  </trigger>
  
    <!--  detectClass  -->
  <trigger
   expand_variables="y"
   group="detectClass"
   keep_evaluating="y"
   match="Autopull: Demonbank:* Earplug:* Page Pause:*"
   send_to="12"
   sequence="100">
  <send>EnableTriggerGroup ("detectClass", false)</send>
  </trigger>
  
  <trigger
   custom_colour="6"
   expand_variables="y"
   group="detectClass"
   match="^Level \d+\(\d+\) .* (Sorcerer|Druid|Ranger|Warrior|Priest|Assassin|Bladedancer|Paladin|Wizard|Bodyguard|Archer|Psionicist|Mage|Monk|Mindbender|Stormlord|Black Circle Initiate|Berserker|Rogue|Fusilier|Shadowfist|Cleric|Vizier)    Exp/TNL:.*$"
   regexp="y"
   send_to="12"
   sequence="100">
  <send>detectClass("%1")</send>
  </trigger>
  
	<!--  groupDeathInfo  -->
  <trigger
   enabled="y"
   expand_variables="y"
   group="groupDeathInfo"
   match="[DEATH INFO]: * killed by * in *."
   send_to="12"
   sequence="100">
  <send>checkGroupDeathInfo("%1")</send>
  </trigger>
  
  <!--  GAG  -->
  <trigger
   enabled="y"
   expand_variables="y"
   group="GAG"
   match="A voice whispers '* is in perfect health.'"
   omit_from_output="y"
   sequence="100">
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="GAG"
   match="A voice whispers '* is perfectly healthy.'"
   omit_from_output="y"
   sequence="100">
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="GAG"
   match="* requires no panacea."
   omit_from_output="y"
   sequence="100">
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="GAG"
   match="* doesn't require Clarification."
   omit_from_output="y"
   sequence="100">
  </trigger>
  
    <!--  gurney  -->
  <trigger
   group="gurney"
   keep_evaluating="y"
   match="[LORD INFO]: * has just shifted to *!"
   send_to="12"
   sequence="100">
  <send>if isPersonInGroup("%1") == true then
  Execute("c gurney " .. "%1")
end
</send>
  </trigger>

   <!--  harvest  -->
  <trigger
   expand_variables="y"
   group="harvest"
   keep_evaluating="y"
   match="Your grim harvest comes to an end."
   sequence="100"
   send_to="12">
  <send>addActionQueue("gh1")</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="harvest"
   match="Shizaga surrounds you with a grim blessing. Let the harvest commence!"
   sequence="100"
   send_to="12">
  <send>remActionQueue("gh1")
executeAfter(120, "px addActionQueue gh2")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="harvest"
   match="Your grim blessing is unleashed!"
   sequence="100"
   send_to="12">
  <send>remActionQueue("gh2")</send>
  </trigger>
  
   <!--  hero_quest  -->
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="The Haruspex asks 'How many pillars does the room have?'"
   send_to="12"
   sequence="100">
  <send>executeAfter (1, "say 6")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="The Haruspex asks 'To which season does the minor sign of the amphora belong?'"
   send_to="12"
   sequence="100">
  <send>executeAfter (1, "say spring")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="The Haruspex asks 'To which season does the minor sign of the tower belong?'"
   send_to="12"
   sequence="100">
  <send>executeAfter (1, "say summer")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="A murky merman is DEAD!!"
   sequence="100">
  <send>TELL SELF Forage Site - EAST,SOUTH,SOUTH,SOUTH</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="The Haruspex asks 'Which of the four seasonal houses has a strong connection with wisdom?'"
   send_to="12"
   sequence="100">
  <send>executeAfter (1, "say winter")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="The Haruspex says 'How many of those stars are red?'"
   send_to="12"
   sequence="100">
  <send>executeAfter (1, "say two")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   lines_to_match="2"
   keep_evaluating="y"
   match="The Haruspex says 'Of autumn's major signs, the harvest and the fallen angel are two.'"
   send_to="12"
   sequence="100">
  <send>executeAfter (1, "say hand")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="The Haruspex says 'Of spring's major signs, the immortal bird and the gladius are two.'"
   send_to="12"
   sequence="100">
  <send>executeAfter (1, "say ship")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="The Haruspex says 'Of summer's major signs, the priest and the lovers are two.'"
   send_to="12"
   sequence="100">
  <send>executeAfter (1, "say unicorn")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   match="Seneca Rotberry says 'Bring me his dagger.'"
   sequence="100">
  <send>say done</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   match="Seneca Rotberry says 'Go ahead, you have my full attention.'"
   sequence="100">
  <send>give cowl seneca</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   match="Seneca Rotberry says 'It is done, then. Show me.'"
   sequence="100">
  <send>give dagger seneca</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="The Haruspex says 'Of winters's major signs, the magister and the burning man are two.'"
   send_to="12"
   sequence="100">
  <send>executeAfter (1, "say warhammer")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="The Haruspex says 'The pillars represent the wanderers, one of whom is Pandra of the Moon.'"
   send_to="12"
   sequence="100">
  <send>executeAfter (1, "say sandstone")</send>
  </trigger>
 
 <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="The Haruspex says 'To which season does the minor sign of the snake belong?'"
   send_to="12"
   sequence="100">
  <send>executeAfter (1, "say autumn")</send>
  </trigger>
 
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="The Haruspex says 'Which sign is a bad omen for sailors?'"
   send_to="12"
   sequence="100">
  <send>executeAfter (1, "say gaping maw")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   match="Seneca Rotberry says 'There is your assassination. Don't forget to bring me proof.'"
   sequence="100">
  <send>say returned</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="The preta is DEAD!!"
   sequence="100">
  <send>TELL SELF Forage Site - WEST, WEST</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="Grogbert Thunderbeard asks 'Thank yee fer tha key, bu', where's tha box?'"
   sequence="100">
  <send>give ornate grogbert</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="Grogbert Thunderbeard says 'Moore lights, p'eease.'"
   omit_from_output="y"
   sequence="100">
  <send>give limp grogbert
give baby grogbert
give torch grogbert</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   match="1. History of this place..."
   sequence="100">
  <send>say history</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="The shade of an ent is DEAD!!"
   sequence="100">
  <send>TELL SELF Forage Site - SOUTH, SOUTH, SOUTH</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="Better find four light sources then."
   sequence="100">
  <send>give lumin grogbert</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="Grogbert Thunderbeard smiles at you warmly."
   sequence="100">
  <send>give silver grogbert</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="Grogbert Thunderbeard thanks you heartily."
   sequence="100">
  <send>give steak grogbert</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="1. Light? Very well."
   sequence="100">
  <send>say light</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="1. One steak coming up."
   sequence="100">
  <send>say steak</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="1. Uh-huh."
   sequence="100">
  <send>say uh-huh</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   match="10. Actually, it is me who is convinced. The half-orcs deserve death at the hands of the undead horde..."
   sequence="100">
  <send>say mercenaries</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   match="10. The root of your problems lies with ulexite. You're using it to raise the dead and by extension all of you are doomed..."
   sequence="100">
  <send>say root</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="The shade of an executioner is DEAD!!"
   sequence="100">
  <send>TELL SELF Forage Site - WEST, WEST, NORTH</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="2. Anything for you, buddy."
   sequence="100">
  <send>say anything</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   match="4. Any quests?"
   sequence="100">
  <send>say quests</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   keep_evaluating="y"
   match="Ketos is DEAD!!"
   sequence="100">
  <send>TELL SELF Forage Site - UP, UP, SOUTH</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="hero_quest"
   match="5. Insane!"
   sequence="100">
  <send>say insane</send>
  </trigger>
  
	<!--  iskilling  -->
  <trigger
   custom_colour="4"
   enabled="y"
   expand_variables="y"
   group="iskilling"
   keep_evaluating="y"
   match="* is killing *."
   name="iskilling"
   send_to="12"
   sequence="100">
   <send>killAfterEmote("%1","%2")</send>
  </trigger>

   <!--  Lotto  -->  
  <trigger
   enabled="y"
   expand_variables="y"
   group="Lotto"
   keep_evaluating="y"
   match="The winners of the Lotto are:"
   send_to="12"
   sequence="100">
  <send>EnableTrigger ("multilottoadd", true)
</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="Lotto"
   keep_evaluating="y"
   match="  *!"
   name="multilottoadd"
   send_to="12"
   sequence="100">
  <send>addLotto("%1", false)</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="Lotto"
   keep_evaluating="y"
   match="* lotto is *"
   send_to="12"
   sequence="100">
  <send>addLotto("%2", false)</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="Lotto"
   keep_evaluating="y"
   match="The winner of the Lotto is:  *!"
   send_to="12"
   sequence="100">
  <send>addLotto("%1", true)</send>
  </trigger>
  
  <!--  mday  -->
  <trigger
   group="mday"
   keep_evaluating="y"
   match="XXXOne of your Exhaust timers has elapsed. (*)"
   send_to="12"
   sequence="100">
  <send>SendNoEcho("t self |br| Fatigue gone: %1")
SendNoEcho("emo |bw| Fatigue gone: %1")</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="mday"
   keep_evaluating="y"
   match="You are cursed and unable to recall!"
   sequence="100">
  <send>gt I'm cursed and unable to recall!</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="mday"
   keep_evaluating="y"
   match="*( Lloydable )*"
   sequence="100">
  <send>emo detected a Lloydable room</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="mday"
   keep_evaluating="y"
   match="XXX You wake and stand up."
   send_to="10"
   sequence="100">
  <send>xq</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="mday"
   keep_evaluating="y"
   match="You are now AFK."
   sequence="100">
  <send>time</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="mday"
   ignore_case="y"
   keep_evaluating="y"
   match="[LORD INFO]: @groupleader has just returned to Thorngate!"
   send_to="12"
   sequence="100">
  <send>offRun()</send>
  </trigger>
  
  <trigger
   group="mday"
   keep_evaluating="y"
   match="You failed your * due to lack of concentration!"
   send_to="12"
   sequence="100">
  <send>SendNoEcho("emo failed casting |br|%1")</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="mday"
   keep_evaluating="y"
   match="* belongs to *!"
   sequence="100">
  <send>give 1. %2</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="mday"
   match="You can't see anything!"
   sequence="100">
  <send>gt I'm blind!</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="mday"
   ignore_case="y"
   keep_evaluating="y"
   match="[LORD INFO]: @groupleader has just shifted to Thorngate!"
   send_to="12"
   sequence="100">
  <send>offRun()</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="mday"
   keep_evaluating="y"
   match="* tells the group 'xplane *'"
   sequence="100">
  <send>c plane %2</send>
  </trigger>
  
  <trigger
   group="mday"
   keep_evaluating="y"
   match="Bladetrance depth: *"
   send_to="12"
   sequence="100">
  <send>SendNoEcho ("emo |bc| BT Level: |bw|" .. %1)</send>
  </trigger>

  <trigger
   group="mday"
   keep_evaluating="y"
   match="Options: enter"
   send_to="12"
   sequence="100">
  <send>SendNoEcho ("emo |bc| BT Level: |bw|enter|n|")</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="mday"
   keep_evaluating="y"
   match="^.*?\/.*?Hp .*?\/(.*?)Ma .*?Mv .*?Xp .*?Lag .*?\:.*?\:.*? (.*?)\/.*?Hp (Motta|Letigo|Vizionary).*$"
   regexp="y"
   send_to="12"
   sequence="100">
  <send>checkVizHeal("%1","%2","%3")</send>
  </trigger>   

  <trigger
   custom_colour="3"
   expand_variables="y"
   group="mday"
   ignore_case="y"
   keep_evaluating="y"
   match="* tells you '@strOrder *'"
   name="mdayorder"
   send_to="10"
   sequence="100">
  <send>%2</send>
  </trigger>

  <trigger
   group="mday"
   keep_evaluating="y"
   match="* tells you 'bark'"
   sequence="100">
  <send>c bark %1</send>
  </trigger>
  
  <trigger
   group="mday"
   keep_evaluating="y"
   match="There is no rest for the cursed!"
   sequence="100">
  <send>gt Unrested!</send>
  </trigger>  

  <trigger
   expand_variables="y"
   group="mday"
   ignore_case="y"
   keep_evaluating="y"
   match="You dream of * telling you '@strOrder *'"
   send_to="10"
   sequence="100">
  <send>%2</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="mday"
   keep_evaluating="y"
   match="This ground is cursed, you cannot recall!"
   sequence="100">
  <send>gt This ground is cursed, I cannot recall!</send>
  </trigger>

  <trigger
   group="mday"
   keep_evaluating="y"
   match="*: you can't carry that * *."
   send_to="12"
   sequence="100">
  <send>SendNoEcho("emo |br| couldn't loot corpse!!!")</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="mday"
   keep_evaluating="y"
   match="^You failed your (homeshift|planeshift) due to lack of concentration!"
   regexp="y"
   send_to="12"
   sequence="100">
  <send>Send("emo failed %1")</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="mday"
   keep_evaluating="y"
   match="^xxxYou have been KILLED\!\!$"
   regexp="y"
   sequence="100">
  <send>stand
down
east
east
gt I died</send>
  </trigger>

  <trigger
   group="mday"
   keep_evaluating="y"
   match="* tells you 'steel'"
   sequence="100">
  <send>c steel %1</send>
  </trigger>

   <!--  Outros  -->  
  <trigger
   enabled="y"
   group="Outros"
   custom_colour="6"
   keep_evaluating="y"
   match="* is DEAD!!"
   send_to="12"
   sequence="100">
  <send>killing = false</send>
  </trigger>
  
  <trigger
   enabled="y"
   group="Outros"
   keep_evaluating="y"
   match="You are engulfed in black flames!"
   sequence="100">
  <send>emote got the big |R|D|N|.</send>
  </trigger>
  
  <trigger
   enabled="y"
   group="Outros"
   keep_evaluating="y"
   match="The demonfire extinguishes from around your body."
   sequence="100">
  <send>emote big |R|D|N| is gone.</send>
  </trigger>

  <trigger
   group="Outros"
   custom_colour="4"
   enabled="y"
   expand_variables="y"
   keep_evaluating="y"
   match="Your attack*"
   send_to="12"
   sequence="100">
   <send>killing = true</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="* is surrounded by *'s sanctuary."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c sanct %1")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="* moves to attack you, but * leaps in the way!"
   sequence="100">
  <send>kiss %2</send>
  </trigger>
  
 
  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="Your innate mental strength rejects your own frenzy spell!"
   send_to="12"
   sequence="100">
  <send>remActionQueue("frenzy")</send>
  </trigger>
  
  <trigger
   group="Outros"
   enabled="y"
   keep_evaluating="y"
   match="You feel less fatigued. (*)"
   send_to="12"
   sequence="100">
  <send>SendNoEcho("t self |br| Fatigue gone: %1")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="You feel more confidence in your ability with *."
   sequence="100">
  <send>emo tingled |BC|%1|N|!</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="* tell* the group 'off run'"
   send_to="12"
   sequence="100">
  <send>Execute("cq")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   match="*'s features fill with rage!"
   send_to="12"
   sequence="100">
  <send>remActionQueue("c frenzy %1")</send>
  </trigger>
  
  <trigger
   enabled="y"
   group="Outros"
   match="Panic stricken, you flee wildly, but trip and go down hard!"
   sequence="100">
  <send>stand</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="Allegaagse says 'Here is something for your trouble*"
   sequence="100">
  <send>insignia</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="Allegaagse says 'You have done such a good job that I have raised my estimation of your worth as a searcher*"
   sequence="100">
  <send>insignia</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="You have been KILLED!!"
   send_to="12"
   sequence="100">
  <send>Execute("stand")
Execute("quicken off")
killing = false</send>
  </trigger>
 
  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="Somewhere on a rather familiar plane, a door slams shut and locks."
   sequence="100">
  <send>beep self
beep self
beep self</send>
  </trigger>
  
  <trigger
   enabled="y"
   group="Outros"
   keep_evaluating="y"
   match="You have to stand up before you do that"
   sequence="100">
  <send>wake</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   ignore_case="y"
   keep_evaluating="y"
   match="You drop @playername xMainBag."
   sequence="100">
  <send>get xmain</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="*The corpse of @playername is lying here."
   sequence="100">
  <send>get all @playername
wear all</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="You fail to heighten your senses."
   sequence="100">
  <send>heig</send>
  </trigger>

  <trigger
   group="Outros"
   keep_evaluating="y"
   match="You successfully rescue *"
   name="flashrescue"
   sequence="100">
  <send>ff</send>
  </trigger>
  
  <trigger
   enabled="y"
   group="Outros"
   match="* disarms you and sends your weapon flying!"
   sequence="100">
  <send>get all
wear all</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   ignore_case="y"
   keep_evaluating="y"
   match="@groupleader enters swirl of chaotic energies."
   sequence="100">
  <send>enter swirl</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   ignore_case="y"
   keep_evaluating="y"
   match="@groupleader recalls!"
   send_to="12"
   sequence="100">
  <send>if getTierChar() == "Lord" then
  Send("recall")
end</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="* tell* the group 'wake'"
   sequence="100">
  <send>stand</send>
  </trigger>
  
   <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="You create * wall of thorns."
   sequence="100">
  <send>emo created |bc|%1 |N|wall.</send>
  </trigger>
  
  <trigger
   enabled="y"
   group="Outros"
   match="You disappear into the void."
   sequence="100">
  <send>time</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   match="The unlucky adventurer whispers the word &quot;*&quot;"
   send_to="10"
   sequence="100">
  <send>gt Password is: %1</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="The water evaporates into a golden light as it reaches the tattoo on your arms."
   sequence="100">
  <send>rem tattoo
put tattoo xmain
wear all
south
south</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="Ice spikes form when the water reaches the tattoo on your arms."
   sequence="100">
  <send>rem tattoo
put tattoo xmain
wear all
south
south</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="* tells the group 'sleep'"
   sequence="100">
  <send>sleep</send>
  </trigger>
  
  <trigger
   enabled="y"
   group="Outros"
   keep_evaluating="y"
   match="^You see your quarry\'s trail head (north|south|east|west|up|down) from here\!$"
   regexp="y"
   send_to="12"
   sequence="100">
  <send>ColourNote ("white", "red", "Track dir is " .. string.upper("%1"))</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="It is * o'clock*"
   sequence="100">
  <send>t self its %1 o'clock.</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="The winners of the Lotto are:"
   send_to="12"
   sequence="100">
  <send>clearLottoNames()</send>
  </trigger>
  
  <trigger
   enabled="y"
   group="Outros"
   keep_evaluating="y"
   match="* tells you 'cb'"
   sequence="100">
  <send>c 'cure blind' %1</send>
  </trigger>
  
  <trigger
   enabled="y"
   group="Outros"
   keep_evaluating="y"
   match="* tells you 'cd'"
   send_to="10"
   sequence="100">
  <send>cd %1</send>
  </trigger>
  
  <trigger
   enabled="y"
   group="Outros"
   keep_evaluating="y"
   match="* tells you 'cp'"
   send_to="10"
   sequence="100">
  <send>cp %1</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   expand_variables="y"
   group="Outros"
   ignore_case="y"
   match="You tell @playername *"
   omit_from_log="y"
   omit_from_output="y"
   sequence="1">
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="* is already in a frenzy."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c frenzy %1")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="* is already in sanctuary."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c sanct %1")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="* is hurt and suspicious ... you can't sneak up."
   send_to="12"
   sequence="100">
  <send>killCurrentTarget()</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="Mayflower, Explorer and Trailblazer exclaims 'Follow me for Ocean Transport!'"
   name="folmay"
   sequence="100">
  <send>fol mayf</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   ignore_case="y"
   keep_evaluating="y"
   match="@groupleader enters a long, * strand."
   sequence="100">
  <send>enter strand</send>
  </trigger>
  
  <trigger
   enabled="y"
   group="Outros"
   match="^You feel a slight headache growing stronger...$"
   regexp="y"
   sequence="100">
  <send>c water
c 'chill touch'
c 'cure light'</send>
  </trigger>
  
  <trigger
   enabled="y"
   group="Outros"
   keep_evaluating="y"
   match="* tells you 'frenzy'"
   send_to="12"
   sequence="100">
  <send>addActionQueue("c frenzy %1")
Execute("c frenzy %1")</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="* is hurt and suspicious ... you can't sneak up."
   send_to="12"
   sequence="100">
  <send>killCurrentTarget()
Execute("bbb")</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="Outros"
   match="^(You scan your surroundings|You concentrate and survey the area for danger)\.\.\.$"
   regexp="y"
   send_to="12"
   sequence="100"
   name="scanDisableStab">
  <send>disabledStabName = true
EnableTrigger("scanDisableStab",false)</send>
  </trigger>

  <trigger
   enabled="y"
   group="Outros"
   keep_evaluating="y"
   match="* tells you 'sanc'"
   send_to="12"
   sequence="100">
  <send>addActionQueue("c sanct %1")
Execute("c sanct %1")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="* is so disgusted with a lavabomb it tries to drop it!"
   sequence="100">
  <send>get lavabomb</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   match="With despair, you realize your hands are mortal again."
   send_to="12"
   sequence="100">
  <send>executeAfter(3, "hog")</send>
  </trigger>  
  
  <trigger
   enabled="y"
   group="Outros"
   expand_variables="y"
   keep_evaluating="y"
   match="* tells the group 'recall'"
   sequence="100">
  <send>stand
recall</send>
  </trigger>
  
  <trigger
   enabled="y"
   group="Outros"
   expand_variables="y"
   keep_evaluating="y"
   match="A HOGathon has just BEGUN!!!"
   sequence="100">
  <send>beep self
beep self
beep self
beep self
beep self
</send>
  </trigger>
  
  <trigger
   enabled="y"
   group="Outros"
   expand_variables="y"
   keep_evaluating="y"
   match="A chandler gives you a pair of wind-ravaged boots."
   sequence="100"
   send_to="12">
  <send>executeAfter (1, "give cloak chand")</send>
  </trigger>
  
  <trigger
   enabled="y"
   group="Outros"
   expand_variables="y"
   keep_evaluating="y"
   match="You give a special storm-skin cloak to A chandler."
   sequence="100">
  <send>buy cloak=i</send>
  </trigger>  
   
   <trigger
   enabled="y"
   group="Outros"
   expand_variables="y"
   keep_evaluating="y"
   match="A chandler gives you a blueish-white stone."
   sequence="100"
   send_to="12">
  <send>executeAfter (1, "give talis chand")</send>
  </trigger>
  
   <trigger
   enabled="y"
   group="Outros"
   expand_variables="y"
   keep_evaluating="y"
   match="You give a special devilish talisman to A chandler."
   sequence="100">
  <send>buy talis=i</send>
  </trigger>
  
  <trigger
   enabled="y"
   group="Outros"
   expand_variables="y"
   keep_evaluating="y"
   match="A haggler gives you panthrodrine-skin leggings."
   sequence="100"
   send_to="12">
  <send>executeAfter (1, "give disco haggler")</send>
  </trigger>
  
  <trigger
   enabled="y"
   group="Outros"
   expand_variables="y"
   keep_evaluating="y"
   match="You give the Special Blade of Discord to A haggler."
   sequence="100">
  <send>buy disco=i</send>
  </trigger>    

  <trigger
   enabled="y"
   group="Outros"
   expand_variables="y"
   keep_evaluating="y"
   match="A haggler gives you coarse leather boots."
   sequence="100"
   send_to="12">
  <send>executeAfter (1, "give iron haggler")</send>
  </trigger>
  
  <trigger
   enabled="y"
   group="Outros"
   expand_variables="y"
   keep_evaluating="y"
   match="You give a special iron web shield to A haggler."
   sequence="100">
  <send>buy iron=i</send>
  </trigger>  
  
  <trigger
   enabled="y"
   group="Outros"
   expand_variables="y"
   keep_evaluating="y"
   match="Maelstrom is too powerful for you to cast in shadow form."
   sequence="100">
  <send>c disint</send>
  </trigger>   
  
  <trigger
   enabled="y"
   group="Outros"
   expand_variables="y"
   keep_evaluating="y"
   match="Meteor swarm is too powerful for you to cast in shadow form."
   sequence="100">
  <send>c 'acid rain'</send>
  </trigger>    
  
  <trigger
   enabled="y"
   group="Outros"
   expand_variables="y"
   keep_evaluating="y"
   match="Fracture is too powerful for you to cast in shadow form."
   sequence="100">
  <send>c rupture</send>
  </trigger> 
  
  <trigger
   enabled="y"
   group="Outros"
   expand_variables="y"
   keep_evaluating="y"
   match="Brimstone is too powerful for you to cast in shadow form."
   sequence="100">
  <send>c torment</send>
  </trigger> 

  <trigger
   enabled="y"
   group="Outros"
   expand_variables="y"
   keep_evaluating="y"
   match="Fandango is too powerful for you to cast in shadow form."
   sequence="100">
  <send>c 'dancing weapon'</send>
  </trigger> 

  <!--  portal  -->
  <trigger
   expand_variables="y"
   group="portal"
   ignore_case="y"
   keep_evaluating="y"
   match="*@groupleader* tell* the group 'en po'"
   sequence="100"
   send_to="12">
  <send>Execute("enter portal")
SetVariable("lastdirmoved", "")</send>
  </trigger>
  
   <trigger
   enabled="y"
   expand_variables="y"
   group="portal"
   ignore_case="y"
   keep_evaluating="y"
   match="*@groupleader* tell* the group 'ent po'"
   sequence="100"
   send_to="12">
  <send>Execute("enter portal")
SetVariable("lastdirmoved", "")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="portal"
   ignore_case="y"
   keep_evaluating="y"
   match="*@groupleader* tell* the group 'enter port'"
   send_to="12"
   sequence="100">
  <send>Execute("enter portal")
SetVariable("lastdirmoved", "")</send>
  </trigger>  
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="portal"
   ignore_case="y"
   keep_evaluating="y"
   match="*@groupleader* tell* the group 'home'"
   send_to="10"
   sequence="100">
  <send>c home</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="portal"
   ignore_case="y"
   keep_evaluating="y"
   match="*@groupleader* tell* the group 'plane thorn'"
   send_to="10"
   sequence="100">
  <send>c plane thorn</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="portal"
   ignore_case="y"
   keep_evaluating="y"
   match="* the group 'en po'"
   sequence="100"
   send_to="12">
  <send>Execute("enter portal")
SetVariable("lastdirmoved", "")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="portal"
   ignore_case="y"
   keep_evaluating="y"
   match="@groupleader enters a silver pentagram."
   sequence="100">
  <send>enter penta</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="portal"
   ignore_case="y"
   match="@groupleader drinks *"
   sequence="100">
  <send>drink</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="portal"
   ignore_case="y"
   keep_evaluating="y"
   match="^@groupleader enters (a|an|the) (\w+)(.*?)\.$"
   regexp="y"
   sequence="100"
   send_to="12">
  <send>Execute("enter %2")
SetVariable("lastdirmoved", "")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="portal"
   ignore_case="y"
   match="@groupleader enters a dark patch."
   sequence="100">
  <send>enter patch</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="portal"
   ignore_case="y"
   match="@groupleader enters a dimly lit tunnel."
   sequence="100">
  <send>enter tunnel</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="portal"
   ignore_case="y"
   keep_evaluating="y"
   match="@groupleader enters a portal."
   sequence="100"
   send_to="12">
  <send>Execute("enter portal")
SetVariable("lastdirmoved", "")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="portal"
   ignore_case="y"
   match="@groupleader enters a screaming vortex."
   sequence="100">
  <send>enter vortex</send>
  </trigger>
  
  <!--  psiWeapons  -->
  <trigger
   custom_colour="14"
   enabled="y"
   expand_variables="y"
   group="psiWeapons"
   lines_to_match="4"
   keep_evaluating="y"
   match="\A(\w+) concentrates deeply\.\.\.\n(\w+)'s weapons dance through the air\!\n(.*) returns to .*'s hand\.\n(.*) returns to .*'s hand\.\Z"
   multi_line="y"
   regexp="y"
   send_to="12"
   sequence="100">
  <send>addWeaponsAlt("%1","%3")
addWeaponsAlt("%1","%4")</send>
  </trigger>
  
  <trigger
   custom_colour="14"
   enabled="y"
   expand_variables="y"
   group="psiWeapons"
   lines_to_match="4"
   keep_evaluating="y"
   match="\AYour weapons dance through the air\!\n.*\n(.*) returns to your hand\.\n(.*) returns to your hand\.\Z"
   multi_line="y"
   regexp="y"
   send_to="12"
   sequence="100">
  <send>addWeaponsAlt(GetVariable("playername"),"%1")
addWeaponsAlt(GetVariable("playername"),"%2")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="psiWeapons"
   keep_evaluating="y"
   match="* flies out of *'s hand to attack *"
   send_to="12"
   sequence="100">
  <send>addWeaponsAlt("%2","%1")</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="psiWeapons"
   keep_evaluating="y"
   match="You do not have that item."
   omit_from_output="y"
   sequence="100">
  </trigger>
  
  <trigger
   custom_colour="9"
   enabled="y"
   expand_variables="y"
   group="psiWeapons"
   keep_evaluating="y"
   match="^I see no \d* here\.$"
   omit_from_output="y"
   regexp="y"
   sequence="100">
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="psiWeapons"
   match="You send * to attack *"
   send_to="12"
   sequence="100">
  <send>addWeaponsAlt(GetVariable("playername"),"%1")</send>
  </trigger>
  
	<!--  q_frenzy  --> 
  <trigger
   custom_colour="3"
   group="q_frenzy"
   keep_evaluating="y"
   match="You slowly come out of your rage."
   send_to="12"
   sequence="100">
  <send>addActionQueue("c frenzy")</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   group="q_frenzy"
   keep_evaluating="y"
   match="You are filled with rage."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c frenzy")</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="q_frenzy"
   keep_evaluating="y"
   match="You now have Divine Awen."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c frenzy")</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   group="q_frenzy"
   keep_evaluating="y"
   match="You are already in a frenzy."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c frenzy")</send>
  </trigger>
  
  <!--  q_frenzy_quicken  -->
  <trigger
   custom_colour="3"
   enabled="y"
   group="q_frenzy_quicken"
   keep_evaluating="y"
   match="You slowly come out of your rage."
   send_to="12"
   sequence="100">
  <send>addActionQueue("quicken 9=c frenzy=quicken off")</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   enabled="y"
   group="q_frenzy_quicken"
   keep_evaluating="y"
   match="You are filled with rage."
   send_to="12"
   sequence="100">
  <send>remActionQueue("quicken 9=c frenzy=quicken off")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="q_frenzy_quicken"
   keep_evaluating="y"
   match="You now have Divine Awen."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c frenzy")</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   enabled="y"
   group="q_frenzy_quicken"
   keep_evaluating="y"
   match="You are already in a frenzy."
   send_to="12"
   sequence="100">
  <send>remActionQueue("quicken 9=c frenzy=quicken off")</send>
  </trigger>
  
  <!--  q_sanc  -->  
  <trigger
   custom_colour="3"
   group="q_sanc"
   keep_evaluating="y"
   match="You are already in sanctuary."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c sanct")</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   group="q_sanc"
   keep_evaluating="y"
   match="You are surrounded by a * aura."
   send_to="12"
   sequence="100">
  <send>if isTriggerOn("classmonshf") == true then
		remActionQueue("c 'iron monk'")
	else
		remActionQueue("c sanct")
	end</send>
  </trigger>
  
  <trigger
   custom_colour="3"
   group="q_sanc"
   keep_evaluating="y"
   match="The protective aura fades from around your body."
   send_to="12"
   sequence="100">
  <send>if isTriggerOn("classmonshf") == true then
		addActionQueue("c 'iron monk'")
	else
		addActionQueue("c sanct")
	end
  </send>
  </trigger>
  
  <trigger
   custom_colour="3"
   group="q_sanc"
   keep_evaluating="y"
   match="You concentrate on the Iron Monk style."
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'iron monk'")</send>
  </trigger>

  <trigger
   custom_colour="3"
   group="q_sanc"
   keep_evaluating="y"
   match="You are already Glowing!"
   send_to="12"
   sequence="100">
  <send>remActionQueue("c 'iron monk'")</send>
  </trigger>

  <trigger
   custom_colour="3"
   group="q_sanc"
   keep_evaluating="y"
   match="Your Iron Monk style fades."
   send_to="12"
   sequence="100">
  <send>addActionQueue("c 'iron monk'")</send>
  </trigger>

  <!--  queue  -->
  <trigger
   enabled="y"
   group="queue"
   keep_evaluating="y"
   match="* xp."
   send_to="12"
   sequence="100">
  <send>execActionQueue()</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="rampage"
   match="Your killing spree has come to an end."
   sequence="100"
   send_to="12">
<send>addActionQueue("ur1")</send>
  </trigger>

  <!--  RaceDRC  -->
  <trigger
   expand_variables="y"
   group="RaceDRC"
   match="You have been KILLED!!"
   send_to="12"
   sequence="100">
  <send>Execute("stand")
Execute("c eulo")
executeAfter(10,"look")
executeAfter(20,"sleep")</send>
  </trigger>

  <!--  RaceMiraar  -->
  <trigger
   expand_variables="y"
   group="RaceMiraar"
   keep_evaluating="y"
   match="Your body changes to match *'s!"
   send_to="12"
   sequence="100">
  <send>addShape("%1")
remActionQueue("rac shapeshift " .. "%1")</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="RaceMiraar"
   keep_evaluating="y"
   match="You can't shift your shape into nothing."
   send_to="12"
   sequence="100">
  <send>clearActionQueue()
shapeNext()</send>
  </trigger>
  
	<!--  rampage  -->  
  <trigger
   enabled="y"
   expand_variables="y"
   group="rampage"
   match="Tor surrounds you with a malevolent blessing."
   sequence="100"
   send_to="12">
  <send>remActionQueue("ur1")
  executeAfter(120, "px addActionQueue ur2")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="rampage"
   match="Your malevolent blessing is unleashed!"
   sequence="100"
   send_to="12">
  <send>remActionQueue("ur2")</send>
  </trigger>
  
    <!--  repeat  -->
  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your saving grace due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>cast 'saving grace'</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your glorious conquest due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>cast 'glorious conquest'</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your vile touch due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>cast 'vile touch'</send>
  </trigger>  
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your savvy due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>cast savvy</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your stone fist due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>cast 'stone fist'</send>
  </trigger>
	
  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your unholy rampage due to lack of concentration!"
   sequence="100">
  <send>cast 'unholy rampage'</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   match="You failed your water breathing due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>cast water</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your ablution due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>cast ablut</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your artificer blessing due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>cast 'artificer blessing'</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your concentrate due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>cast concen</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your conscious weapon due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>cast 'conscious weapon'</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your consummation due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>cast consummation</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your dark embrace due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>cast 'dark embrace'</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your death shroud due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>cast 'death shroud'</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your defiled flesh due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>cast defiled</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your ether link due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>cast 'ether link'</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your eulogy due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>cast eulogy</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your felling weapon due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>cast 'felling weapon'</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your frenzy due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>cast frenzy</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your holy zeal due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>cast 'holy zeal'</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your homeshift due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>c home</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your intelligent weapon due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>cast 'intelligent weapon'</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your kinetic chain due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>cast 'kinetic chain'</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your mystical barrier due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>c 'mystical barrier'</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your planeshift due to lack of concentration!"
   send_to="12"
   sequence="100">
  <send>local plane = GetVariable("currentPlane")

if plane ~= nil and string.len(plane) &gt; 0 then
  Execute("cast plane " .. plane)
end
</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your prayer due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>cast prayer 'malice aura'</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="repeat"
   keep_evaluating="y"
   match="You failed your protective vigil due to lack of concentration!"
   send_to="10"
   sequence="100">
  <send>cast 'protective vigil'</send>
  </trigger>
  
	<!--  rescuepusher  -->  
  <trigger
   group="rescuepusher"
   match="*'s counterattack knocks * down!"
   sequence="100">
  <send>rescue %1</send>
  </trigger>
  
    <!--  RoomCheck  --> 
  <trigger
   expand_variables="y"
   group="RoomCheck"
   match="trigger para identificar roomcheckplayers"
   name="roomcheckplayers"
   sequence="100">
  </trigger> 
  
	<!--  room_desc  -->
   <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="help but stop and give silent homage to this colossus of trees."
   send_to="12"
   sequence="100">
  <send>Note("(Get Bark)")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="obvious route to the higher slopes to the east."
   send_to="12"
   sequence="100">
  <send>Note("(Enter Canyon)")</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="On crumbling stone"
   send_to="12"
   sequence="100">
  <send>Note("(DONT GO DOWN)")</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   match="rise up the touch the sky itself, leaving you feeling very small."
   sequence="100">
  <send>look passage
look canyon</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="small pool at the cliff's base."
   sequence="100">
  <send>look defile</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="to western slopes."
   send_to="12"
   sequence="100">
  <send>Note("(Enter Defile)")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="The Altar of Kra"
   send_to="10"
   sequence="100">
  <send>linkrefresh group</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="A lone weirwood weeps blood-red tears."
   send_to="12"
   sequence="100" >
  <send>Note("(Meditate,Yes,No,Both,Neither)")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="A model of Thorngate"
   send_to="12"
   sequence="100">
  <send>Note("3e room")</send>
  </trigger>
  
   <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="Within the centre of the raging vortex"
   send_to="12"
   sequence="100">
  <send>Note("(North-Angelic Casters,South-Angelic Brutes,East-Demonic Brutes,West-Demonic Caster/ No Regain)")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="A single white feather lies amongst the forest leaves."
   send_to="12"
   sequence="100">
  <send>Note("(Get Feather)")</send>
  </trigger>
 
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   match="wild flowers grow here and there."
   sequence="100">
  <send>look riverbed
look pass</send>
  </trigger>
  
   <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="Outside Caerllong"
   send_to="12"
   sequence="100">
  <send>Note("(Push Rock)")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="Outside the Llonghouse"
   send_to="12"
   sequence="100">
  <send>Note("(Enter Structure)")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="Overlooking Patriarchs' gulch"
   send_to="12"
   sequence="100">
  <send>Note("Lloydable room")
 </send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="Padmasa's ruin"
   send_to="12"
   sequence="100">
  <send>Note("3e All s room")</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="A stillness settles upon you like the weight of a million feathers."
   send_to="12"
   sequence="100">
  <send>Note("(Follow Until Speaks,Say Both,Neither,Go South Type Die)")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="A tight cleft in the cliff wall leads steeply to the north."
   send_to="12"
   sequence="100">
  <send>Note("(Enter Cleft)")</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="*A small fire burns with particularly pungent smoke."
   send_to="12"
   sequence="100">
  <send>Note("(Turn Off Brief)")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="Alder, hickory, chestnut, cherry; so many trees are represented."
   send_to="12"
   sequence="100">
  <send>Note("(PP Kirkan, Get All Cavity,Item To Fungle Forest)")</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="Buried between the stones"
   send_to="12"
   sequence="100">
  <send>Note("(Up One Way)")</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="Shrine of Acilese"
   send_to="12"
   sequence="100">
  <send>Note("(Linkrefresh)")</send>
  </trigger>
   
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="Someone has made some effort to conceal this passage to the west."
   send_to="12"
   sequence="100">
  <send>Note("(Enter Passage)")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="Deep between the roots"
   send_to="12"
   sequence="100">
  <send>Note("(Open Tangle)")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="Squirrels scamper through the edging trees, staying in the branches."
   send_to="12"
   sequence="100">
  <send>Note("(torm Brew-Grandmother Ent,Abbaye Du Livre-Ent Book,Say-the young,heartache,spirit of the goddess)")</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="The ash and oak, and birch and yew are dressed in ribbons fair."
   send_to="12"
   sequence="100">
  <send>Note("(Get goose feather,vallenwood bark,handful of berries-DeepWoods)")</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="Deepening shadows among the boulders"
   send_to="12"
   sequence="100">
  <send>Note("(Enter Hole)")</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="Entrance to the caves"
   send_to="12"
   sequence="100">
  <send>Note("(Linkrefresh)")</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="Fallen leaves play upon the short grass forming patterns."
   send_to="12"
   sequence="100">
  <send>Note("(Say-Spruce Tree)")</send>
  </trigger> 

  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="At the cusp of the Necropolis"
   send_to="10"
   sequence="100">
  <send>linkrefresh group</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="At the end of a leaning trunk"
   send_to="12"
   sequence="100">
  <send>Note("(South One Way)")</send>
  </trigger>

  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="Atop a Dragon's skull"
   send_to="12"
   sequence="100">
  <send>Note("All S room")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="Before a living barrier"
   send_to="12"
   sequence="100">
  <send>Note("(Pull Bloom)")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="Before the Ultimate Nightmare"
   send_to="12"
   sequence="100">
  <send>Note("(Down No Exit)")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="A Dried-Up Ditch"
   send_to="12"
   sequence="100">
  <send>Note("(No Exit South)")</send>
  </trigger>
  
   <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="A Narrow Hallway"
   send_to="12"
   sequence="100">
  <send>Note("Maze n s 2e d u. To Fluent")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="A brugmansia has toppled here, its flowers freshly wilting."
   send_to="12"
   sequence="100">
  <send>Note("(Give Letter Ent Bank, Then Visit Edmuntrillion. Bring Back Coin)")</send>
  </trigger>
 
   <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="Immersed in Nightmares"
   send_to="12"
   sequence="100">
  <send>Note("(Main Road N-S)")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="Inside the Llonghouse"
   send_to="12"
   sequence="100">
  <send>Note("(Angh/Quest,s)")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="Inside the gates of Caerllong"
   send_to="12"
   sequence="100">
  <send>Note("(Pull Chain)")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="A disorderly office"
   send_to="12"
   sequence="100">
  <send>Note("(Enter Window)")</send>
  </trigger>
 
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="A dry riverbed provides a climbable route up the east slope."
   send_to="12"
   sequence="100">
  <send>Note("(Enter Riverbed)")</send>
  </trigger>
  
   <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="A faint break in the woods indicates the hint of a path leading south."
   send_to="12"
   sequence="100">
  <send>Note("(Kill 3 Trog Hunters In DarkWood,Then Return)")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="advantage and put out brightly coloured berries."
   send_to="12"
   sequence="100">
  <send>Note("(Berries)")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   keep_evaluating="y"
   match="climbs steeply up to the west."
   send_to="12"
   sequence="100">
  <send>Note("(Enter Pass)")</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   match="discolouration of yellow and white lichen clinging to the rock faces."
   sequence="100">
  <send>look cleft</send>
  </trigger>
  
  <trigger
   enabled="y"
   expand_variables="y"
   group="room_desc"
   match="Northwestern Shoreline (Water)"
   sequence="100">
  <send>config +brief</send>
  </trigger>
 
  <!--  runcounter  -->  
  <trigger
   enabled="y"
   expand_variables="y"
   group="runcounter"
   keep_evaluating="y"
   match="^Your gain is\: (.*?)\/(.*?) hp\, (.*?)\/(.*?) m\, (.*?)\/(.*?) mv (.*?)\/(.*?) prac\.$"
   regexp="y"
   send_to="12"
   sequence="100">
  <send>afterLevel("%1","%3","%7")</send>
  </trigger>
  
   <trigger
   enabled="y"
   expand_variables="y"
   group="runcounter"
   keep_evaluating="y"
   match="You receive * experience points."
   send_to="12"
   sequence="1">
  <send>addExp("%1")
execActionQueue()</send>
  </trigger>
 
  <!--  singlecaster  -->
  <trigger
   expand_variables="y"
   group="singlecaster"
   keep_evaluating="y"
   match="* tell* the group 'off boss'"
   send_to="12"
   sequence="100">
  <send>SendNoEcho("s2")</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="singlecaster"
   keep_evaluating="y"
   match="* tell* the group 'on boss'"
   send_to="12"
   sequence="100">
  <send>SendNoEcho("s5")</send>
  </trigger>

  <!--  tingle  -->
   <trigger
   expand_variables="y"
   group="tingle"
   keep_evaluating="y"
   match="You are already standing.*"
   sequence="100">
  <send>cast inno</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="tingle"
   keep_evaluating="y"
   match="The tranquility of this place prevents your action.*"
   sequence="100">
  <send>stand</send>
  </trigger>

   <trigger
   expand_variables="y"
   group="tingle"
   keep_evaluating="y"
   match="You sleep.*"
   send_to="12"
   sequence="100">
  <send>Execute("save")
executeAfter (300, "stand=stand")</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="tingle"
   keep_evaluating="y"
   match="You feel more confidence in your ability with innocence.*"
   sequence="100">
  <send>slearn innocence
stand</send>
  </trigger>

  <trigger
   expand_variables="y"
   group="tingle"
   keep_evaluating="y"
   match="You have practiced innocence to * percent.*"
   sequence="100">
  <send>t self |BW|tingled innocence to %1 percent</send>
  </trigger>
  
  <trigger
   expand_variables="y"
   group="tingle"
   keep_evaluating="y"
   match="You failed your innocence due to lack of concentration!"
   sequence="100">
  <send>stand</send>
  </trigger>
 
   <trigger
   expand_variables="y"
   group="tingle"
   keep_evaluating="y"
   match="You do not have enough mana to cast flash.*"
   sequence="100">
  <send>sleep</send>
  </trigger>
 
  <trigger
   expand_variables="y"
   group="tingle"
   keep_evaluating="y"
   match="Everything turns negative for a second!*"
   sequence="100">
  <send>stand</send>
  </trigger>
 
</triggers>

<!--  Aliases  -->

<aliases>
  <alias
   match="autologin"
   enabled="y"
   expand_variables="y"
   group="autologin"
   send_to="12"
   keep_evaluating="y"
   sequence="100">
  <send>Execute(GetInfo(2))</send>
  </alias>

  <alias
   match="disco"
   enabled="y"
   expand_variables="y"
   group="Outros"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>Disconnect()
  Connect()</send>
  </alias>

  <alias
   match="go * *"
   enabled="y"
   group="Outros"
   sequence="100"
  >
  <send>grouporder %1 %2</send>
  </alias>

  <alias
   match="gga"
   enabled="y"
   group="Outros"
   sequence="100"
  >
  <send>get all
give 1. alleg</send>
  </alias>

  <alias
   match="setclass *"
   enabled="y"
   group="Outros"
   sequence="100"
   send_to="12"
  >
  <send>setClass("%1")</send>
  </alias>

  <alias
   match="settier *"
   enabled="y"
   expand_variables="y"
   group="Outros"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>tierChar = "%1"
Note("Tier set to %1")</send>
  </alias>

  <alias
   match="setwf"
   expand_variables="y"
   group="mday"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>scriptToAllWorlds("setWindowFilter")</send>
  </alias>
  
  <alias
   match="settarget *"
   group="mday"
   ignore_case="y"
   send_to="12"
   sequence="100"
  >
  <send>targetWorld = "%1"
  Note("TargetWorld set to %1")
  </send>
  </alias>
  
  <alias
   match="openWorlds *"
   expand_variables="y"
   ignore_case="y"
   group="mday"
   send_to="12"
   keep_evaluating="y"
   sequence="100">
  <send>openWorlds("%1")</send>
  </alias>

  <alias
   match="healmon *"
   expand_variables="y"
   group="mday"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>scriptToAllWorlds("setHealMon %1")</send>
  </alias>

  <alias
   match="shapeadd *"
   expand_variables="y"
   group="RaceMiraar"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>addShape("%1")</send>
  </alias>

  <alias
   match="offstab"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   sequence="100"
  >
  <send>offStab()
Note("stab off")
</send>
  </alias>

  <alias
   match="shapeclear"
   expand_variables="y"
   group="RaceMiraar"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>shapeNames = {}
ColourNote("red", "white", "Shape List cleared")</send>
  </alias>

  <alias
   match="offtarget"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup ("iskilling", false)
Note("iskilling off")</send>
  </alias>

  <alias
   match="shaperem *"
   expand_variables="y"
   group="RaceMiraar"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>remShape("%1")</send>
  </alias>

  <alias
   match="offtingle"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>setGroupValue("tingle", false)
Note("Tingle off")</send>
  </alias>

  <alias
   match="offtrack"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup ("autotrack", false)
Note("autotrack off")</send>
  </alias>

  <alias
   match="offtrackwalk"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup ("autotrackwalk", false)
Note("autotrackwalk off")</send>
  </alias>

  <alias
   match="ondmg"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>addTableCounter("You")
EnableTriggerGroup ("Counters", true)
EnableTrigger("GroupGrabDmg", false)
Send("config +battlenone")
Note("Counters enabled to self only")</send>
  </alias>

  <alias
   match="ondmgall"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>Execute("dmg populate")
Send("config -battlenone")
Note("Counters enabled to whole group")</send>
  </alias>

  <alias
   match="onfilter"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>SendNoEcho("filter +roomindiv")
SendNoEcho("filter +spellother")
SendNoEcho("filter +lookother")
SendNoEcho("filter +positionother")
Note("filters on")</send>
  </alias>

  <alias
   match="gorder"
   enabled="y"
   expand_variables="y"
   group="GroupList"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>orderGroupList()</send>
  </alias>

  <alias
   match="gpass *"
   enabled="y"
   expand_variables="y"
   group="GroupList"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>passItemGroup("%1")</send>
  </alias>

  <alias
   match="onfrenzy"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup ("q_frenzy", true)
Note("keepFrenzy on")</send>
  </alias>

  <alias
   match="grem *"
   enabled="y"
   expand_variables="y"
   group="GroupList"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>offWindow()
remGroupie("%1")
ColourNote("red", "white", "%1 removed from groupList!")</send>
  </alias>

  <alias
   match="gtyp"
   enabled="y"
   group="brand"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>storeTyphus()</send>
  </alias>

  <alias
   match="shapeshow"
   expand_variables="y"
   group="RaceMiraar"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>ColourNote("red", "white", "Shape List:")

if shapeNames == nil then
  shapeNames = {}
end

for i = 1, #shapeNames do
  if shapeNames[i] ~= nil then
    ColourNote("red", "white", shapeNames[i])
  end
end</send>
  </alias>

  <alias
   match="lottogt"
   enabled="y"
   expand_variables="y"
   group="Lotto"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>Send("gt Lotto list is: " ..  listToString(lottoNames))</send>
  </alias>

  <alias
   match="showpsi"
   enabled="y"
   expand_variables="y"
   group="Outros"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>showPsiWeapons()</send>
  </alias>

  <alias
   match="showrescue"
   expand_variables="y"
   group="autorescue"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>ColourNote("red", "white", "Rescue List:")

if rescuelist == nil then
  rescuelist = {}
end

for i = 1, #rescuelist do
  if rescuelist[i] ~= nil then
    ColourNote("red", "white", rescuelist[i])
  end
end</send>
  </alias>

  <alias
   match="sq"
   enabled="y"
   group="queue"
   send_to="12"
   sequence="100"
  >
  <send>showActionQueue()</send>
  </alias>

  <alias
   match="offvizdmg"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>vizDmgOn = false
Note("vizdmg off")</send>
  </alias>

  <alias
   match="lottoshow"
   enabled="y"
   expand_variables="y"
   group="Lotto"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>&#9;ColourNote("red", "white", "Lotto list")

&#9;for k,v in pairs(lottoNames) do
&#9;&#9;ColourNote("red", "white", v)
&#9;end</send>
  </alias>

  <alias
   match="ssv"
   expand_variables="y"
   group="mday"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>scriptToAllWorlds("ssv")
</send>
  </alias>

  <alias
   match="offvizfr"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>vizFrOn = false
Note("vizfr off")</send>
  </alias>

  <alias
   match="offvizheal"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>vizHealOn = false
Note("vizheal off")</send>
  </alias>

  <alias
   match="offvizpool"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>showVizPool = false
Note("show viz pool off")</send>
  </alias>

  <alias
   match="ongold"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup ("autogold", true)
Note("pickup gold on")</send>
  </alias>

  <alias
   match="ongurney"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup ("gurney", true)
Note("autogurney on")</send>
  </alias>

  <alias
   match="onidstab*"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>onStabById("%1")
Note("StabById trigger on")</send>
  </alias>

  <alias
   match="idtyp"
   enabled="y"
   group="brand"
   keep_evaluating="y"
   sequence="100"
  >
  <send>get xbrand xmain=g typhus xbrand=c id typhus=put typhus xbrand=put xbrand xmain
</send>
  </alias>

  <alias
   match="onmday"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>setGroupValue("mday", true)
Note("mday on")</send>
  </alias>

  <alias
   match="igu"
   enabled="y"
   group="Outros"
   keep_evaluating="y"
   sequence="100"
  >
  <send>say i give up</send>
  </alias>

  <alias
   match="onmir"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>setGroupValue("RaceMiraar", true)
Note("Miraar on")</send>
  </alias>

  <alias
   match="inf"
   enabled="y"
   group="Outros"
   sequence="100"
  >
  <send>sanctum
d
w</send>
  </alias>

  <alias
   match="insureaddall"
   enabled="y"
   group="Outros"
   sequence="100"
  >
  <send>
insure add 1.
insure add 2.
insure add 3.
insure add 4.
insure add 5.
insure add 6.
insure add 7.
insure add 8.
insure add 9.
insure add 10.
insure add 11.
insure add 12.
insure add 13.
insure add 14.
insure add 15.
insure add 16.
insure add 17.
insure add 18.
insure add 19.
insure add 20.
insure add 21.
insure add 22.
insure add 23.
insure add 24.
insure add 25.
insure add 26.
insure add 27.
insure add 28.
insure add 29.
insure add 30.
</send>
  </alias>

  <alias
   match="insureremall"
   enabled="y"
   group="Outros"
   sequence="100"
  >
  <send>
insure cancel 1.
insure cancel 2.
insure cancel 3.
insure cancel 4.
insure cancel 5.
insure cancel 6.
insure cancel 7.
insure cancel 8.
insure cancel 9.
insure cancel 10.
insure cancel 11.
insure cancel 12.
insure cancel 13.
insure cancel 14.
insure cancel 15.
insure cancel 16.
insure cancel 17.
insure cancel 18.
insure cancel 19.
insure cancel 20.
insure cancel 21.
insure cancel 22.
insure cancel 23.
insure cancel 24.
insure cancel 25.
insure cancel 26.
insure cancel 27.
insure cancel 28.
insure cancel 29.
insure cancel 30.
insure add xmain</send>
  </alias>

  <alias
   match="take"
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   sequence="100"
  >
  <send>
leadership switch take cover</send>
  </alias>

  <alias
   match="makevault"
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   sequence="100"
  >
  <send>get bravery vau
get bravery vau
get bravery vau
get bravery vau
get bravery vau
get powder vau
get powder vau
get powder vau
get powder vau
get powder vau
get cryst vau
get cryst vau
get treat vau
get treat vau
get treat vau
get cat vau
get cat vau
get cat vau
get sarong vau
get sarong vau
get sarong vau
get jade vau
get rod vau
get rod vau
get fae vau
get fae vau
get iguana vau
get book vau
get book vau
get wind vau
get gith vau
get gith vau
get gith vau
get unsee vau
get mirror vau
get choker vau
get blindf vau
get sandb vau
get sandb vau
get crop vau</send>
  </alias>

  <alias
   match="master"
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   sequence="100"
  >
  <send>
leadership switch mastermind</send>
  </alias>

  <alias
   match="ug *"
   enabled="y"
   group="Outros"
   keep_evaluating="y"
   sequence="100"
  >
  <send>ungroup %1</send>
  </alias>

  <alias
   match="mm"
   expand_variables="y"
   group="mday"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>scriptToAllWorlds("castmm")
</send>
  </alias>

  <alias
   match="vizlimit * *"
   expand_variables="y"
   group="classviz"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>setVizLimits("%1","%2")</send>
  </alias>

  <alias
   match="mm*"
   expand_variables="y"
   group="classviz"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>if getTierChar() == "Hero" then
&#9;castPhlebotomize("%1")
else
&#9;castEnervate("%1")
end&#9;</send>
  </alias>

  <alias
   match="wakeresc"
   expand_variables="y"
   group="mday"
   keep_evaluating="y"
   sequence="100"
  >
  <send>wake Ica
wake Bid
wake Sombrero
wake Maybe
wake Raposao
wake Xingu
wake Ravengar</send>
  </alias>

  <alias
   match="mra"
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   sequence="100"
  >
  <send>morgue retrieve all</send>
  </alias>

  <alias
   match="onportal"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup("autoportal",true)
Note("autoportal on")</send>
  </alias>

  <alias
   match="onpsi"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup ("psi", true)
Note("psi grabbing on")</send>
  </alias>

  <alias
   name="RescueListRemoveCurrentSelection"
   match="remCurSelRescue"
   group="autorescue"
   send_to="12"
   menu="y"
   keep_evaluating="y"
   sequence="100"
  >
  <send>remCurSelRescue()</send>
  </alias>

  <alias
   match="onpsisolo"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>psiSolo(true)
Note("psi solo on")</send>
  </alias>

  <alias
   match="invgt"
   enabled="y"
   expand_variables="y"
   group="InvList"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>Send("gt " .. listToString(inventoryList))</send>
  </alias>

  <alias
   match="onpsiwield"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTrigger ("psiwield", true)
Note("psiwield true")</send>
  </alias>

  <alias
   match="invlist"
   enabled="y"
   expand_variables="y"
   group="InvList"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>Note(listToString(inventoryList))</send>
  </alias>

  <alias
   match="onrepeat"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>setGroupValue ("repeat", true)
Note("repeat true")</send>
  </alias>

  <alias
   match="ip *"
   expand_variables="y"
   group="classprs"
   keep_evaluating="y"
   sequence="100"
  >
  <send>quicken 9
preach inno
%1
quicken off
cast pardon</send>
  </alias>

  <alias
   match="lastall"
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   sequence="100"
  >
  <send>last Lais
last Luccian
last Cagao
last Tinna
last Ravengar
last Xing
last Tele
last Noone
last Lud
last Indio
last Williamtell
last Feiticeiro
last Bom
last Flecha
last Cabeca
last Remo
last Juvenal
last Bid
last Xingu
last Zingu
last Ica
last Lollis
last Raposao
last Capelao
last Mecao
last Tuazd
last Kubrick
last Dois
last Pequeno
last Duno
last Romulo
last Uno
last Grande
last Boi
last Papapop
last Yay
last Vinyl
last Opa
last Way
last Quatro
last Larin
last Motta
last Fido
last Zup
last Maybe
last Mal
last Iforgot
last Aff
last Letigo
last Diniz
last Rang
last Belo
last Amenadiel
last Vizionary
</send>
  </alias>

  <alias
   match="wtat"
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   sequence="100"
  >
  <send>get watermark xmain
wear watermark
n
n
spit</send>
  </alias>

  <alias
   match="ms"
   expand_variables="y"
   group="mday"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>scriptToAllWorlds("castms")
</send>
  </alias>

  <alias
   match="xq"
   enabled="y"
   group="queue"
   send_to="12"
   sequence="100"
  >
  <send>execActionQueue()</send>
  </alias>

  <alias
   match="offalert"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup ("autoalert", false)
Note("keep alert off")</send>
  </alias>

  <alias
   match="offawful"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>awfulCast = false
Note("awfulCast off")
lag0Cast = true</send>
  </alias>

  <alias
   match="offbash"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>setBash(false)
Note("autobash false")</send>
  </alias>

  <alias
   match="offboss"
   group="mday"
   sequence="100"
  >
  <send>gt off boss</send>
  </alias>

  <alias
   match="onrescue"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>setGroupValue("autorescue", true)
Note("autorescue on")</send>
  </alias>

  <alias
   match="onrite"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTrigger("vizfinalrites",true)
Note("vizfinalrites on")</send>
  </alias>

  <alias
   match="autorescue"
   enabled="y"
   expand_variables="y"
   group="Outros"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>autoSetRescue()</send>
  </alias>

  <alias
   match="onrun"
   group="mday"
   send_to="10"
   sequence="100"
   expand_variables="y"
  >
  <send>ooo @prsName preachup
gt on run
oo self
gt rest
</send>
  </alias>

  <alias
   match="prepmday"
   group="mday"
   send_to="10"
   keep_evaluating="y"
   sequence="100"
   expand_variables="y"
  >
  <send>
setwf
oo autorescue
oo setBuffer 10000
setbuffer 200000
oo buddyset reset
oo s-
oo chats hide
chats show
master
gorder
</send>
  </alias>

  <alias
   match="skin"
   group="mday"
   send_to="10"
   sequence="100"
   expand_variables="y"
  >
  <send>ooo williamtell skin corpse
</send>
  </alias>

  <alias
   match="lieut"
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   sequence="100"
  >
  <send>leadership switch LIEUTENANT</send>
  </alias>

  <alias
   match="cnb"
   enabled="y"
   group="Outros"
   keep_evaluating="y"
   sequence="100"
  >
  <send>cast nexus bo'vul</send>
  </alias>

  <alias
   match="b *"
   enabled="y"
   group="Outros"
   keep_evaluating="y"
   sequence="100"
  >
  <send>buddy |w|%1</send>
  </alias>

  <alias
   match="onsanc"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup ("q_sanc", true)
Note("keepSanc on")</send>
  </alias>

  <alias
   match="link"
   enabled="y"
   group="Outros"
   keep_evaluating="y"
   sequence="100"
  >
  <send>linkrefresh group</send>
  </alias>

  <alias
   match="setprs *"
   enabled="y"
   group="mday"
   send_to="12"
   ignore_case="y"
   keep_evaluating="y"
   sequence="100"
  >
  <send>SetVariable("prsName" ,"%1")
  Note("Priest set to %1")</send>
  </alias>

  <alias
   match="onsend *"
   expand_variables="y"
   group="mday"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>
Send("gt send raposao %1")
Send("gt send xingu %1")

Send("gt send indio %1")
Send("gt send lollis %1")
Send("gt send quatro %1")
Send("gt send larin %1")

Send("gt send grande %1")
Send("gt send boi %1")
Send("gt send zup %1")
Send("gt send iforgot %1")
Send("gt send diniz %1")

sendOrder("ica","c plane %1") 
sendOrder("bid","c plane %1") 
sendOrder("ravengar","c plane %1")   

executeAfter(10,"oo c plane %1")
</send>
  </alias>

  <alias
   match="alt *"
   enabled="y"
   expand_variables="y"
   group="Outros"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>defineNextChar("%1")</send>
  </alias>
  
   <alias
   match="chl"
   enabled="y"
   expand_variables="n"
   group="Outros"
   send_to="10"
   keep_evaluating="y"
   sequence="100"
  >
  <send>channelhi hero
channelhi lord</send>
  </alias>
  
  <alias
   match="bt"
   expand_variables="y"
   group="mday"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>scriptToAllWorlds("bt")
</send>
  </alias>

  <alias
   match="lottoadd *"
   enabled="y"
   expand_variables="y"
   group="Lotto"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>addLotto("%1")</send>
  </alias>

  <alias
   match="lottoclear"
   enabled="y"
   expand_variables="y"
   group="Lotto"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>clearLottoNames()
ColourNote("red", "white", "Lotto list cleared")</send>
  </alias>

  <alias
   match="offbrand"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup ("autobrand", false)
Note("brand off")</send>
  </alias>

  <alias
   match="offcast"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup ("autocast", false)
  Note("offcast")</send>
  </alias>

  <alias
   match="offchain"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>chainrescue = false
Note("chainrescue false")</send>
  </alias>

  <alias
   match="offcounter"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup ("Counters", false)
Note("Dmg counter off")</send>
  </alias>

  <alias
   match="onshape"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>setGroupValue("RaceMiraar", true)</send>
  </alias>

  <alias
   match="bte"
   expand_variables="y"
   group="mday"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>scriptToAllWorlds("bte")
</send>
  </alias>

  <alias
   match="onslip"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   sequence="100"
  >
  <send>canSlip = true
Note("slip on")</send>
  </alias>

  <alias
   match="btyp"
   enabled="y"
   group="brand"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>executeBrandish()</send>
  </alias>

  <alias
   match="onstab*"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   sequence="100"
  >
  <send>onStab("%1")
Note("stab on")
</send>
  </alias>

  <alias
   match="staball*"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   sequence="100"
  >
  <send>onStabAll("%1")
</send>
  </alias>

  <alias
   match="offstaball"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   sequence="100"
  >
  <send>offStabAll()
</send>
  </alias>

  <alias
   match="c home"
   enabled="y"
   expand_variables="y"
   group="repeat"
   variable="currentPlane"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>SetVariable("currentPlane", "thorn")
Execute("cast homeshift")</send>
  </alias>

  <alias
   match="ontarget"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup ("iskilling", true)
Note("iskilling on")</send>
  </alias>

  <alias
   match="c plane *"
   enabled="y"
   expand_variables="y"
   group="repeat"
   variable="currentPlane"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>planeTo("%1")</send>
  </alias>

  <alias
   match="ontingle"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>setGroupValue("tingle", true)
Note("Tingle on")
Execute("stand")</send>
  </alias>

  <alias
   match="calm"
   enabled="y"
   group="Outros"
   sequence="100"
  >
  <send>quicken 9
c calm
quicken off</send>
  </alias>

  <alias
   match="ps"
   expand_variables="y"
   group="mday"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>scriptToAllWorlds("castps")
</send>
  </alias>

  <alias
   match="r *"
   enabled="y"
   group="Outros"
   sequence="100"
  >
  <send>
rescue %1</send>
  </alias>

  <alias
   match="ral *"
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   sequence="100"
  >
  <send>enter nexus
south
south
up
retrieve %1
down
north
north
enter nexus
drop %1</send>
  </alias>

  <alias
   match="raln *"
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   sequence="100"
  >
  <send>enter nexus
up
retrieve %1
down
enter nexus
drop %1</send>
  </alias>

  <alias
   match="offdmg"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup ("Counters", false)
Note("dmg counter off")
SendNoEcho("config +battlenone")</send>
  </alias>

  <alias
   match="offfilter"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>SendNoEcho("filter -roomindiv")
SendNoEcho("filter -spellother")
SendNoEcho("filter -lookother")
SendNoEcho("filter -positionother")
Note("filters off")</send>
  </alias>

  <alias
   match="repairall"
   enabled="y"
   group="Outros"
   send_to="12"
   sequence="100"
  >
  <send>if GetVariable("playername") == "Mecao" then
 Execute("repair 1.")
 Execute("repair 2.")
 Execute("repair 3.")
 Execute("repair 4.")
 Execute("repair 5.")
 Execute("repair 6.")
 Execute("repair 7.")
 Execute("repair 8.")
 Execute("repair 9.")
 Execute("repair 10.")
 Execute("repair 11.")
 Execute("repair 12.")
 Execute("repair 13.")
 Execute("repair 14.")
 Execute("repair 15.")
 Execute("repair 16.")
 Execute("repair 17.")
 Execute("repair 18.")
 Execute("repair 19.")
 Execute("repair 20.")
 Execute("repair 21.")
 Execute("repair 22.")
 Execute("repair 23.")
 Execute("repair 24.")
 Execute("repair 25.")
 Execute("repair 26.")
 Execute("repair 27.")
 Execute("repair 28.")
 Execute("repair 29.")
 Execute("repair 30.")
else
 Execute("say nono")
end

</send>
  </alias>

  <alias
   match="offfrenzy"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup ("q_frenzy", false)
Note("keepFrenzy off")</send>
  </alias>

  <alias
   match="^inv$"
   enabled="y"
   expand_variables="y"
   group="InvList"
   regexp="y"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>clearInventoryList()
Send("inventory")
Execute("sendgmcp Char.Items.Inv")
</send>
  </alias>

  <alias
   match="offgold"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup ("autogold", false)
Note("pickup gold off")</send>
  </alias>

  <alias
   match="^onbash\s?(\w*?)$"
   enabled="y"
   group="triggertoggler"
   regexp="y"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>setBash(true, "%1")
Note("autobash on")</send>
  </alias>

  <alias
   match="aff *"
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   sequence="100"
  >
  <send>aff ?%1</send>
  </alias>

  <alias
   match="alleg"
   enabled="y"
   expand_variables="y"
   group="Outros"
   send_to="11"
   keep_evaluating="y"
   sequence="100"
  >
  <send>7susw</send>
  </alias>

  <alias
   match="ontrack"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup ("autotrack", true)
Note("autotrack on")</send>
  </alias>

  <alias
   match="casa"
   enabled="y"
   group="Outros"
   keep_evaluating="y"
   sequence="100"
  >
  <send>sanctum
w
u
</send>
  </alias>

  <alias
   match="ontrackwalk"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup ("autotrackwalk", true)
Note("autotrackwalk true")</send>
  </alias>

  <alias
   match="cc *"
   expand_variables="y"
   group="mday"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>scriptToAllWorlds("castcc %1")
</send>
  </alias>

  <alias
   match="cfr*"
   expand_variables="y"
   group="classviz"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>castFinalRites("%1")</send>
  </alias>

  <alias
   match="onvizdmg"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>vizDmgOn = true
Note("vizdmg on")</send>
  </alias>

  <alias
   match="cla"
   expand_variables="y"
   group="mday"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>scriptToAllWorlds("castcla")
</send>
  </alias>

  <alias
   match="onvizfr"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>vizFrOn = true
Note("vizfr on")</send>
  </alias>

  <alias
   match="clearpsi"
   enabled="y"
   expand_variables="y"
   group="Outros"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>clearPsiWeapons()</send>
  </alias>

  <alias
   match="rescueadd *"
   expand_variables="y"
   group="autorescue"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>addRescue("%1")</send>
  </alias>

  <alias
   match="rescuerem *"
   expand_variables="y"
   group="autorescue"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>remRescue("%1")</send>
  </alias>

  <alias
   match="offgurney"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup ("gurney", false)
Note("autogurney off")</send>
  </alias>

  <alias
   match="offidstab"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>offStabById()
Note("StabById trigger off")</send>
  </alias>

  <alias
   match="rs"
   enabled="y"
   group="Outros"
   sequence="100"
  >
  <send>recall set</send>
  </alias>

  <alias
   match="offmday"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>setGroupValue("mday", false)
Note("mday off")</send>
  </alias>

  <alias
   match="allnex"
   enabled="y"
   group="Outros"
   keep_evaluating="y"
   sequence="100"
  >
  <send>enter nexus
deposit all
withdraw ruby
enter nexus
give ruby alleg</send>
  </alias>

  <alias
   match="allnexn"
   enabled="y"
   group="Outros"
   keep_evaluating="y"
   sequence="100"
  >
  <send>enter nexus
north
north
deposit all
withdraw ruby
south
south
enter nexus
give ruby alleg</send>
  </alias>

  <alias
   match="offmir"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>setGroupValue("RaceMiraar", false)
Note("Miraar off")</send>
  </alias>

  <alias
   match="allrc"
   expand_variables="y"
   group="mday"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>scriptToAllWorlds("castrc @playername")</send>
  </alias>

  <alias
   match="offportal"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup("autoportal",false)
Note("autoportal off")</send>
  </alias>

  <alias
   match="ann *"
   enabled="y"
   group="Outros"
   send_to="12"
   omit_from_output="y"
   sequence="100"
  >
  <send>Execute("lord |bw|%1")
Execute("hero |bw|%1")
Execute("chat |bw|%1")
Note("Set leadership")
Note("Set leadership")
Note("Set leadership")
</send>
  </alias>

  <alias
   match="aug *"
   expand_variables="y"
   group="mday"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>scriptToAllWorlds("aug %1")
</send>
  </alias>

  <alias
   match="onvizheal"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>vizHealOn = true
Note("vizheal on")</send>
  </alias>

  <alias
   match="clearrescue"
   expand_variables="y"
   group="autorescue"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>rescuelist = {}
ColourNote("red", "white", "Rescue List cleared")</send>
  </alias>

  <alias
   match="onvizpool"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>showVizPool = true
Note("show viz pool on")</send>
  </alias>

  <alias
   match="cq"
   enabled="y"
   group="queue"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>clearActionQueue()
ColourNote("red", "white", "Queue list cleared!")</send>
  </alias>

  <alias
   match="onvizss"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>vizSsOn = true
Note("vizss on")</send>
  </alias>

  <alias
   match="cr"
   enabled="y"
   expand_variables="y"
   group="Outros"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>clearRoomList()
EnableTrigger ("roomcheckplayers", true)
SendNoEcho("look")
</send>
  </alias>

  <alias
   match="onwalking*"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>onWalking("%1")
Send("filter -walkother")
Note("Kill walking trigger on")</send>
  </alias>

  <alias
   match="csp"
   expand_variables="y"
   group="classviz"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>castSanguenPax()</send>
  </alias>

  <alias
   match="onwindow"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   sequence="100"
  >
  <send>onWindow()
Note("windowMon on")</send>
  </alias>

  <alias
   match="d1"
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   sequence="100"
  >
  <send>drop 1.</send>
  </alias>

  <alias
   name="RescueListAddCurrentSelection"
   match="addCurSelRescue"
   expand_variables="y"
   group="autorescue"
   send_to="12"
   menu="y"
   keep_evaluating="y"
   sequence="100"
  >
  <send>addCurSelRescue()</send>
  </alias>

  <alias
   match="runreport"
   enabled="y"
   group="runcounter"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>runreport()</send>
  </alias>

  <alias
   match="runreset"
   enabled="y"
   group="runcounter"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>runreset()</send>
  </alias>

  <alias
   match="offpsi"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup ("psi", false)
Note("psi grabbing off")</send>
  </alias>

  <alias
   match="s+"
   enabled="y"
   group="Outros"
   keep_evaluating="y"
   sequence="100"
  >
  <send>config +savespell</send>
  </alias>

  <alias
   match="offpsisolo"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>psiSolo(false)
Note("psi solo off")</send>
  </alias>

  <alias
   match="s-"
   enabled="y"
   group="Outros"
   keep_evaluating="y"
   sequence="100"
  >
  <send>
config -savespell</send>
  </alias>

  <alias
   match="offpsiwield"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTrigger ("psiwield", false)
Note("psiwield false")</send>
  </alias>

  <alias
   match="offrescue"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>setGroupValue("autorescue", false)
Note("autorescue off")</send>
  </alias>

  <alias
   match="offvizss"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>vizSsOn = false
Note("vizss off")</send>
  </alias>

  <alias
   match="offwalking"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>offWalking()
Send("filter +walkother")
Note("Kill walking trigger off")</send>
  </alias>

  <alias
   name="SelectionRemoveGroupList"
   match="remCurSelGroup"
   enabled="y"
   expand_variables="y"
   group="GroupList"
   send_to="12"
   menu="y"
   keep_evaluating="y"
   sequence="100"
  >
  <send>offWindow()
remCurSelGroup()</send>
  </alias>

  <alias
   match="oo *"
   group="mday"
   send_to="12"
   sequence="100"
  >
  <send>sendToAllWorlds("%1")
</send>
  </alias>

  <alias
   match="offwindow"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   sequence="100"
  >
  <send>offWindow()
Note("windowMon off")</send>
  </alias>

  <alias
   match="dc *"
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   sequence="100"
  >
  <send>drop %1 coins</send>
  </alias>

  <alias
   match="ooo * *"
   group="mday"
   send_to="12"
   sequence="100"
  >
  <send>sendOrder("%1","%2")</send>
  </alias>

  <alias
   match="onalert"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup ("autoalert", true)
Note("keep alert on")</send>
  </alias>

  <alias
   match="dd *"
   expand_variables="y"
   group="mday"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>scriptToAllWorlds("castdd %1")
</send>
  </alias>

  <alias
   match="p1"
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   sequence="100"
  >
  <send>put 1. xmain</send>
  </alias>

  <alias
   match="onawful"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>awfulCast = true
Note("awfulCast on")
lag0Cast = false</send>
  </alias>

  <alias
   match="detectClass"
   ignore_case="y"
   enabled="y"
   expand_variables="y"
   group="Outros"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>resetLoggedChar()
EnableTriggerGroup ("detectClass", true)
Execute("score")</send>
  </alias>

  <alias
   match="pan"
   expand_variables="y"
   group="mday"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>scriptToAllWorlds("castpan")
</send>
  </alias>

  <alias
   match="dmg *"
   enabled="y"
   group="Counters"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>counterCommand("%1")</send>
  </alias>

  <alias
   match="pc"
   expand_variables="y"
   group="mday"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>scriptToAllWorlds("castpc")
</send>
  </alias>

  <alias
   match="eulo *"
   expand_variables="y"
   send_to="12"
   group="mday"
   keep_evaluating="y"
   sequence="100">
  <send>Execute("ooo %1 stand=ooo %1 down=ooo %1 east=ooo %1 east=ooo %1 c eulogy")
executeAfter(20,"ooo %1 look")
executeAfter(30,"ooo %1 sleep")
</send>
  </alias>

  <alias
   match="salv *"
   expand_variables="y"
   group="mday"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>Send("gt start salv %1")
executeAfter(5, "gt salv %1")

</send>
  </alias>

  <alias
   match="setbuffer *"
   enabled="y"
   expand_variables="y"
   ignore_case="y"
   group="Outros"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>SetOption ("max_output_lines", "%1") 
Note("Buffer size set to " .. "%1" .. " (min 200, max 500.000)")
</send>
  </alias>

  <alias
   match="offrite"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTrigger("vizfinalrites",false)
Note("vizfinalrites off")</send>
  </alias>
  
  <alias
   match="offrun"
   group="mday"
   send_to="12"
   sequence="100"
  >
  <send>offRun()</send>
  </alias>

  <alias
   match="setstab *"
   enabled="y"
   expand_variables="y"
   group="Outros"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>stabAction = "%1"</send>
  </alias>

  <alias
   match="offsanc"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup ("q_sanc", false)
Note("keepSanc off")</send>
  </alias>

  <alias
   match="offshape"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>setGroupValue("RaceMiraar", false)
</send>
  </alias>

  <alias
   match="offslip"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   sequence="100"
  >
  <send>canSlip = false
Note("slip off")</send>
  </alias>

  <alias
   match="onboss"
   group="mday"
   sequence="100"
  >
  <send>gt on boss</send>
  </alias>

  <alias
   match="onbrand"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup ("autobrand", true)
Note("brand on")</send>
  </alias>

  <alias
   match="oncast"
   enabled="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>EnableTriggerGroup ("autocast", true)
lag0Cast = true  
awfulCast = false
  Note("oncast")</send>
  </alias>

  <alias
   match="g1"
   enabled="y"
   expand_variables="y"
   group="Outros"
   keep_evaluating="y"
   sequence="100"
  >
  <send>get 1. xmain</send>
  </alias>

  <alias
   match="onchain"
   enabled="y"
   expand_variables="y"
   group="triggertoggler"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>chainrescue = true
Note("chainrescue on")</send>
  </alias>

  <alias
   match="gac"
   enabled="y"
   expand_variables="y"
   group="Outros"
   send_to="12"
   keep_evaluating="y"
   sequence="100"
  >
  <send>SendNoEcho("get all 1.corpse")
SendNoEcho("get all 2.corpse")
SendNoEcho("get all 3.corpse")
SendNoEcho("get all 4.corpse")
SendNoEcho("get all 5.corpse")
SendNoEcho("get all 6.corpse")
SendNoEcho("get all 7.corpse")
SendNoEcho("get all 8.corpse")
SendNoEcho("get all 9.corpse")
SendNoEcho("get all 10.corpse")</send>
  </alias>
</aliases>

<!--  Timers  -->

<timers>
  <timer name="autocastarea" second="6.00" offset_second="0.00" group="autoCastArea" send_to="12">
  <send>if killing == true then
killing = false
Send("ms")
end</send>
  </timer>
  
  <timer name="autoheal" second="8.00" offset_second="0.00" group="autoHeal" send_to="12">
  <send>if killing == true then
Send("p comf")
end</send>
  </timer>

  <timer name="antiafktimer" enabled="y" minute="3" second="0.00" offset_second="0.00"    send_to="12"
group="antiafk" >
  <send>Execute('sendgmcp Core.KeepAlive')</send>

  </timer>
  <timer name="autopsyphon" minute="1" second="0.00" offset_second="0.00" group="autopsyphon" >
  <send>c psyphon</send>

  </timer>
  <timer name="groupStatsUpdate" second="5.00" offset_second="0.00"    send_to="12"
group="groupStatsUpdate" >
  <send>groupStatsUpdateAction()</send>

  </timer>
</timers>


<!--  Variables  -->

<variables>
  <variable name="gravitasMob"></variable>
  <variable name="monDamList">You</variable>
  <variable name="mw_statusAlts_windowmode">0</variable>
  <variable name="groupleader">Maybe</variable>
  <variable name="lastdirmoved"></variable>
  <variable name="dverbsShort">pathetic|weak|punishing|surprising|amazing|astonishing|mauling|decimating|devastating|pulverizing|maiming|eviscerating|mutilating|disemboweling|dismembering|massacring|mangling|demolishing|obliterating|annihilating|eradicating|vaporizing|destructive|extreme|porcine|divine|daunting|terminal</variable>
  <variable name="strOrder">xxxorder</variable>
  <variable name="playerclass">PAL</variable>
  <variable name="playername">Xing</variable>
  <variable name="mw_statusAlts_windowflags">2</variable>
  <variable name="dverbsIntensity">intensity|viciousness|strength|passion|force|power|might|ferocity|rage|savagery|brutality</variable>
  <variable name="currentPlane"></variable>
</variables>

<!--  Script  -->


<script>
<![CDATA[
require "tprint"
require "movewindow"

--class to control Avatar
--author: Xing

-- begin variables

tierChar = ""
gmcpsanctime = ""
gmcpspellstime = ""
gmcpmoblvl = ""
gmcpmobname = ""
gmcpmobhealth = ""
gmcphp = ""
gmcpmaxhp = ""
gmcplag = ""
gmcpmonhp = ""
gmcpmaxmonhp = ""

currentTarget = ""
stabAction = ""
offhandName = ""
nextPlayer = ""
nextComm = ""
targetWorld = ""

shapeNames = {}
damList = {}
roomList = {}
groupList = {}
sortedGroupList = {}
triggerStatusList = {}
inventoryList = {}
lottoNames = {}
weaponsWithIdOwnerList = {}
actionQueue = {}

brandcurrent = 0
brandlevel = 0
brandmax = 0
totalDamNum = 0
gainedxp = 0
expKills = 0
gainedlevel = 0
timesanc = 0
lastRefresh = 0

mwFontSize = 8
mwLineSize = 12
MIN_SIZE = 50
leftBarBegin = 214
rightBarBegin = leftBarBegin + 147
barWidth = 40
upBarShift = 4
barHeight = 7
text1Begin = 1
text2Begin = leftBarBegin + 44
text3Begin = leftBarBegin + 193
text4Begin = leftBarBegin + 275
lowVizHealthLimit = 30
highVizHealthLimit = 70

win = "statusAlts"
winTrigger = "statusTriggers"
mwBgColor = "black"
mwFont = "Courier New"
mwFontColor = "cyan"
mwFontSecondColor = "lightcyan"
mwPositiveColorBar = "green"
mwNegativeColorBar = "red"
nameFormat = "%14s"
statsFormat = "%5s/%5s"
levelFormat = "%3s"

dvalues = {"2","4","8","10","14","18","22","26","30","34","38","42","46","49","55","60","65","70","75","80","85","90","95","100","110","120","130","140","150","160","170","180","190","200","225","250","275","300","325","350","375","400","425","450","475","500","540","574","606","675","730","769","810","884","915","1000","1100","1200","1300","1400","1500","1600","1700","1800","1900","2000","2200","2400","2600","2800","3000","3200","3400","3600","3800","4100","4500","5007","5901","5902","6200","6500","7000","7500","7800","8200","8500","9000","9500","10000","11000","12000","13000","14000","15000","16500","18000","19000","20000","21000","22000","23000","24000","25000","26000","27000","28000","29000","30000","31000","32000","33000","34000","35000","36000","37000","38000","39000","40000","41000","42000","43000","44500","47000","48000","50000","51000","53000","55000","57000","59000","61000","65000","70000","75000","80000","100000","0"}
dverbs = {"pathetic","weak","punishing","surprising","amazing","astonishing","mauling","MAULING","MAULING*","MAULING**","MAULING***","decimating","DECIMATING","DECIMATING*","DECIMATING**","DECIMATING***","devastating","DEVASTATING","DEVASTATING*","DEVASTATING**","DEVASTATING***","pulverizing","PULVERIZING","PULVERIZING*","PULVERIZING**","PULVERIZING***","maiming","MAIMING","MAIMING*","MAIMING**","MAIMING***","eviscerating","EVISCERATING","EVISCERATING*","EVISCERATING**","EVISCERATING***","mutilating","MUTILATING","MUTILATING*","MUTILATING**","MUTILATING***","disemboweling","DISEMBOWELING","DISEMBOWELING*","DISEMBOWELING**","DISEMBOWELING***","dismembering","DISMEMBERING","DISMEMBERING*","DISMEMBERING**","DISMEMBERING***","massacring","MASSACRING","MASSACRING*","MASSACRING**","MASSACRING***","mangling","MANGLING","MANGLING*","MANGLING**","MANGLING***","demolishing","DEMOLISHING","DEMOLISHING*","DEMOLISHING**","DEMOLISHING***","obliterating","OBLITERATING","OBLITERATING*","OBLITERATING**","OBLITERATING***","annihilating","ANNIHILATING","ANNIHILATING*","ANNIHILATING**","ANNIHILATING***","ANNIHILATING***<","ANNIHILATING***<<","ANNIHILATING***<<<","ANNIHILATING***<<<<","eradicating","ERADICATING","ERADICATING*","ERADICATING**","ERADICATING***","ERADICATING***<","ERADICATING***<<","ERADICATING***<<<","ERADICATING***<<<<","vaporizing","VAPORIZING","VAPORIZING*","VAPORIZING**","VAPORIZING***","VAPORIZING***<","VAPORIZING***<<","VAPORIZING***<<<","VAPORIZING***<<<<","destructive","DESTRUCTIVE","DESTRUCTIVE*","DESTRUCTIVE**","DESTRUCTIVE***","DESTRUCTIVE****","DESTRUCTIVE****<","DESTRUCTIVE****<<","DESTRUCTIVE****<<<","DESTRUCTIVE****<<<<","DESTRUCTIVE***<<<<=","DESTRUCTIVE**<<<<==","DESTRUCTIVE*<<<<===","DESTRUCTIVE<<<<====","extreme","EXTREME","EXTREME*","EXTREME**","EXTREME***","EXTREME****","EXTREME****<","EXTREME****<<","EXTREME****<<<","EXTREME****<<<<","EXTREME***<<<<=","EXTREME**<<<<==","EXTREME*<<<<===","EXTREME<<<<====","porcine","PORCINE","PORCINE*","PORCINE**","PORCINE***","PORCINE***<","PORCINE***<<","PORCINE***<<<","PORCINE***<<<<","divine","daunting","terminal"}

vizFinalRiteCasted = false
disabledStabName = false
canRescue = true
chainrescue = false
canStab = false
canSlip = false
stabAll = false
killing = false
isKillingWalking = false
isStabingById = false
isBashOn = false
showVizPool = false
vizDmgOn = false
vizHealOn = false
vizFrOn = false
vizSsOn = false
lag0Cast = false
awfulCast = false

theme = {
    WINDOW_BACKGROUND = ColourNameToRGB ("#000000"), -- for miniwindow body
    WINDOW_BORDER = ColourNameToRGB("#E8E8E8"), -- for miniwindow body
    
    HIGHLIGHT=ColourNameToRGB("#FFFFFF"), -- for 3D surfaces
    FACE=ColourNameToRGB("#D4D0C8"), -- for 3D surfaces
    INNERSHADOW=ColourNameToRGB("#808080"), -- for 3D surfaces
    OUTERSHADOW = ColourNameToRGB("#404040"), -- for 3D surfaces
   
    BACK_FACE = ColourNameToRGB ("#E8E8E8"), -- for contrasting details
    DETAIL = ColourNameToRGB ("#000000"), -- for contrasting details

    TITLE_HEIGHT = 17, -- for miniwindow title area
    SUBTITLE_HEIGHT = 17, -- for miniwindow title area
    TITLE_FONT_NAME = "Dina", -- for miniwindow title area
    TITLE_FONT_SIZE = 8 -- for miniwindow title area
}

-- end variables

-- Initial setup function

function OnPluginInstall ()
	setup()
end

function setup()
	addWeaponsAlt("Bom", "UNHA STICK")
	addWeaponsAlt("Bom", "GARRA STICK")

	addWeaponsAlt("Medo", "SELFIE STICK")
	addWeaponsAlt("Medo", "GRAVETO")

	addWeaponsAlt("Cagao", "DIAMANTE'S POINTY STICK")
	addWeaponsAlt("Cagao", "ORION'S POINTY STICK")
	
	addWeaponsAlt("Opa", "AN ENORMOUS ANT CHAKRAM")
	addWeaponsAlt("Opa", "A BIG ANT CHAKRAM")
	
	addWeaponsAlt("Fido", "CUNNO'S TRICK")
	addWeaponsAlt("Fido", "KENT'S LOVE")
	
	addWeaponsAlt("Aff", "AFFS")
	addWeaponsAlt("Aff", "AFFZ")
	
	setupWin()
end

function setupWin()
	local mwWidth = 500
	local mwHeight = 500
	local mwFlag = miniwin.create_transparent --use 6 on production, 2 on tests

    if windowinfo == nil then
		windowinfo = movewindow.install (win, miniwin.pos_top_right, miniwin.create_transparent, false, nil, nil,{x=1, y=1})
	end
	
	WindowCreate (win, windowinfo.window_left, windowinfo.window_top, mwWidth, mwHeight, miniwin.pos_top_center, bit.bor (windowinfo.window_flags, mwFlag), ColourNameToRGB(mwBgColor))  -- create window
	
	--WindowCreate (win, 10, 10, mwWidth, mwHeight, 20, mwFlag, ColourNameToRGB(mwBgColor))  -- create window
	
	WindowFont (win, "f", mwFont, mwFontSize, true, false, false, false) -- define font
	movewindow.add_drag_handler (win, 0, 0, 0, 0, miniwin.cursor_both_arrow) 
end

--Clear lists functions

function clearDamList()
	damList = {}
end

function clearGroupList()
	groupList = {}
end

function clearRoomList()
	roomList = {}
end

function clearInventoryList()
	inventoryList = {}
end

function clearLottoNames()
	lottoNames = {}
end

function clearShapeNames()
	shapeNames = {}
end

function clearPsiWeapons()
	weaponsWithIdOwnerList = {}
	Note("clearPsiWeapons")
end

function clearActionQueue()
	actionQueue = {}
	Note("clearActionQueue")
end

-- Brandish functions

function emoteBrandStatus()
	Send("emote brand status: " .. brandcurrent .. "/" .. brandmax .. " Lvl " .. brandlevel)
end

function updateBrandStatus(p_brandmax, p_brandcurrent)
	brandmax = p_brandmax
	brandcurrent = p_brandcurrent
	UpdateInfoBar()
	--emoteBrandStatus()
end

function updateBrandLevel(p_brandlevel)
	brandlevel = p_brandlevel
end

function executeBrandish()
	Send("get xbrand xmain=g typhus xbrand=wear typhus=brandish=rem typhus=put typhus xbrand=put xbrand xmain=wear all")
    brandcurrent = brandcurrent - 1

	if brandcurrent == 1 and tonumber(brandlevel) and tonumber(brandlevel) < 53 then
		storeTyphus()
	end

	UpdateInfoBar()
end

function storeTyphus()
	Send("get xbrand xmain=g typhus xbrand=put typhus xmain=put xbrand xmain")
	brandcurrent = -1
	UpdateInfoBar()
end

-- Reset functions

function resetLoggedChar()
	resetClasses()
	resetAliases()
	resetTriggers()
	resetTimers()
	resetVars()
	onWindow()
end

function resetClasses()
	setGroupValue("classsor", false)
	setGroupValue("classdru", false)
	setGroupValue("classran", false)
	setGroupValue("classwar", false)
	setGroupValue("classprs", false)
	setGroupValue("classasn", false)
	setGroupValue("classbld", false)
	setGroupValue("classpal", false)
	setGroupValue("classwzd", false)
	setGroupValue("classbod", false)
	setGroupValue("classarc", false)
	setGroupValue("classpsi", false)
	setGroupValue("classmag", false)
	setGroupValue("classmon", false)
	setGroupValue("classmnd", false)
	setGroupValue("classstm", false)
	setGroupValue("classbci", false)
	setGroupValue("classbzk", false)
	setGroupValue("classrog", false)
	setGroupValue("classfus", false)
	setGroupValue("classshf", false)
	setGroupValue("classcle", false)
	setGroupValue("classviz", false)
	
	setGroupValue("classmonshf", false)
end

function resetAliases()
	EnableAliasGroup ("autorescue", false)
	EnableAlias ("grcommand", false)
	EnableAliasGroup ("RaceMiraar", false)
end

function resetTriggers()
	EnableTriggerGroup ("areacaster", false)
	EnableTriggerGroup ("singlecaster", false)
	EnableTriggerGroup ("autobow", false)
	EnableTriggerGroup ("autobrand", false)
	EnableTriggerGroup ("autocast", false)
	EnableTriggerGroup ("autodecept", false)
	EnableTriggerGroup ("autohammer", false)
	EnableTriggerGroup ("autopick", false)
	EnableTriggerGroup ("autorc", false)
	EnableTriggerGroup ("autorescue", false)
	EnableTriggerGroup ("autoskin", false)
	EnableTriggerGroup ("autotrack", false)
	EnableTriggerGroup ("autotrackwalk", false)
	EnableTriggerGroup ("autosalv", false)
	EnableTriggerGroup ("autosend", false)
	EnableTriggerGroup ("autostartsalv", false)
	EnableTriggerGroup ("autostab", false)
	EnableTriggerGroup ("autowall", false)
	EnableTriggerGroup ("gurney", false)
	EnableTriggerGroup ("iskilling", false)
	EnableTriggerGroup ("q_frenzy", false)
	EnableTriggerGroup ("q_frenzy_quicken", false)
	EnableTriggerGroup ("q_sanc", false)
	EnableTriggerGroup ("rescuepusher", false)
	EnableTriggerGroup ("autoalert", false)
	EnableTriggerGroup ("autoportal", false)
	EnableTriggerGroup ("autogetsteel", false)
	EnableTriggerGroup ("autorest", false)
	EnableTriggerGroup ("GroupList", false)
	EnableTriggerGroup ("Counters", false)
	EnableTriggerGroup ("RaceMiraar", false)
	EnableTriggerGroup ("RaceDRC", false)
	EnableTriggerGroup ("detectClass", false)
	EnableTriggerGroup ("autonextlogin", false)
	EnableTriggerGroup ("rampage", false)
	EnableTriggerGroup ("harvest", false)
	
	EnableTrigger("flashrescue",false)
	EnableTrigger("folmay",false)
	
end

function resetTimers()
	EnableTimer("autopsyphon", false)
	EnableTimer("autocastarea", false)
	EnableTimer("autoheal", false)
	EnableTimer("groupStatsUpdate", false)
end

function resetVars()
	canStab = false
	canSlip = false
	isStabingById = false
	SetVariable("lastdirmoved", "") 
	SetVariable("currentPlane", "thorn") 
	clearActionQueue()
	clearGroupList()
	clearInventoryList()
	clearLottoNames()
	--clearDamList()
	clearShapeNames()
	totalDamNum = 0
	brandcurrent = 0
	brandlevel = 0
	brandmax = 0
	tierChar = ""
	nextPlayer = ""
	stabAction = ""
    targetWorld = ""
	killing = false
	stabAll = false
	isKillingWalking = false
	lag0Cast = false
	
	gmcpsanctime = ""
	gmcpspellstime = ""
	gmcpmoblvl = ""
	gmcpmobname = ""
	gmcpmobhealth = ""
	gmcphp = ""
	gmcpmaxhp = ""
	gmcplag = ""
	gmcpmonhp = ""
	gmcpmaxmonhp = ""
	
	awfulCast = false
	vizFinalRiteCasted = false
	showVizPool = false
	vizDmgOn = false
	vizHealOn = false
	vizSsOn = false
	
	canRescue = true
	chainrescue = false
    
    setBash(false)
end

-- Setup race/class functions
function detectClass(className)
	if className == "Sorcerer" then setupClassSOR()
	elseif className == "Druid" then setupClassDRU()
	elseif className == "Ranger" then setupClassRAN()
	elseif className == "Warrior" then setupClassWAR()
	elseif className == "Priest" then setupClassPRS()
	elseif className == "Assassin" then setupClassASN()
	elseif className == "Bladedancer" then setupClassBLD()
	elseif className == "Paladin" then setupClassPAL()
	elseif className == "Wizard" then setupClassWZD()
	elseif className == "Bodyguard" then setupClassBOD()
	elseif className == "Archer" then setupClassARC()
	elseif className == "Psionicist" then setupClassPSI()
	elseif className == "Mage" then setupClassMAG()
	elseif className == "Monk" then setupClassMON()
	elseif className == "Mindbender" then setupClassMND()
	elseif className == "Stormlord" then setupClassSTM()
	elseif className == "Black Circle Initiate" then setupClassBCI()
	elseif className == "Berserker" then setupClassBZK()
	elseif className == "Rogue" then setupClassROG()
	elseif className == "Fusilier" then setupClassFUS()
	elseif className == "Shadowfist" then setupClassSHF()
	elseif className == "Cleric"  then setupClassCLE()
	elseif className == "Vizier"  then setupClassVIZ()
	end	
end

function detectRace(raceName)
	if raceName == "Draconian" then setupRaceDRC() 
	elseif raceName == "Miraar" then setupRaceMIR()
	
	end	
end

function setupRaceDRC()
	setGroupValue ("RaceDRC", true)
end

function setupRaceMIR()
	setGroupValue ("RaceMiraar", true)
end

function setClass(clazz)
	Execute("px setupClass" .. clazz)
end

function setupClassSOR()
	Note("setupClassSOR")
	SetVariable("playerclass","SOR")
	setGroupValue("classsor", true)
	EnableTriggerGroup ("autosalv", true)
	EnableTriggerGroup ("autosend", true)
	EnableTriggerGroup ("autorc", true)
	EnableTriggerGroup ("singlecaster", true)
	EnableTriggerGroup ("iskilling", true)
	EnableTriggerGroup ("autocast", true)

	if (GetVariable("playername") == "Hoje" and isMday() == false) then
		lag0Cast = false
		EnableTriggerGroup ("iskilling", false)
	else
		lag0Cast = true
	end
end

function setupClassDRU()
	Note("setupClassDRU")
	SetVariable("playerclass","DRU")
	setGroupValue ("classdru", true)
	EnableTriggerGroup ("iskilling", true)
	EnableTriggerGroup ("autobow", true)
	EnableTriggerGroup ("autorc", true)
	EnableTriggerGroup ("autosalv", true)
	EnableTriggerGroup ("autosend", true)
	EnableTriggerGroup ("autowall", true)
end

function setupClassPRS()
	Note("setupClassPRS")
	SetVariable("playerclass","PRS")
	setGroupValue ("classprs", true)
	EnableTriggerGroup ("autosend", true)
	EnableTriggerGroup ("autostartsalv", true)
end

function setupClassASN()
	Note("setupClassASN")
	SetVariable("playerclass","ASN")
	setGroupValue ("classasn", true)
	EnableTriggerGroup ("iskilling", true)
	EnableTriggerGroup ("autobow", true)
	
	if GetVariable("playername") == "Juvenal" then
		EnableTriggerGroup ("autohammer", true)
	end
	
	if getTierChar() == "Hero" then
		EnableTriggerGroup ("q_frenzy", true)
	else
		EnableTriggerGroup ("q_frenzy_quicken", true)
	end
	
	EnableTriggerGroup ("autoalert", true)
	canStab = true
	EnableTriggerGroup ("autostab", true)
	EnableTrigger("scanDisableStab", true)
end

function setupClassBLD()
	Note("setupClassBLD")
	SetVariable("playerclass","BLD")
	setGroupValue ("classbld", true)
	EnableTriggerGroup ("iskilling", true)
	EnableTriggerGroup ("autopick", true)
	EnableTriggerGroup ("autotrack", true)
	EnableTriggerGroup ("autoalert", true)
	EnableTriggerGroup ("autosalv", true)
end

function setupClassWZD()
	Note("setupClassWZD")
	SetVariable("playerclass","WZD")
	setGroupValue ("classwzd", true)
	EnableTriggerGroup ("iskilling", true)
	EnableTriggerGroup ("autocast", true)
	lag0Cast = true
	EnableTriggerGroup ("areacaster", true)
	EnableTriggerGroup ("autosalv", true)
	EnableTriggerGroup ("autosend", true)
	EnableTriggerGroup ("autowall", true)
end

function setupClassARC()
	Note("setupClassARC")
	SetVariable("playerclass","ARC")
	setGroupValue ("classarc", true)
	EnableTriggerGroup ("iskilling", true)
	EnableTriggerGroup ("autobow", true)
	EnableTriggerGroup ("autoskin", true)
	
	if getTierChar() == "Hero" then
		EnableTriggerGroup ("q_frenzy", true)
	else
		EnableTriggerGroup ("q_frenzy_quicken", true)
	end
end

function setupClassPSI()
	Note("setupClassPSI")
	SetVariable("playerclass","PSI")
	setGroupValue ("classpsi", true)
	EnableTriggerGroup ("iskilling", true)
	EnableTriggerGroup ("autohammer", true)
	
	if getTierChar() == "Hero" then
		EnableTriggerGroup ("q_frenzy", true)
	else
		EnableTriggerGroup ("q_frenzy_quicken", true)
	end
	
	EnableTriggerGroup ("autocast", true)
	lag0Cast = true
	EnableTriggerGroup ("autosalv", true)
	EnableTriggerGroup ("autosend", true)
	EnableTriggerGroup ("autodecept", true)
	EnableTrigger("scanDisableStab", true)
end

function setupClassMAG()
	Note("setupClassMAG")
	SetVariable("playerclass","MAG")
	setGroupValue ("classmag", true)
	EnableTriggerGroup ("iskilling", true)
	EnableTriggerGroup ("autocast", true)
	lag0Cast = true
	EnableTriggerGroup ("areacaster", true)
	EnableTriggerGroup ("autosalv", true)
	EnableTriggerGroup ("autosend", true)
	EnableTriggerGroup ("autoportal", true)	

	--if GetVariable("playername") == "Mal" then
		--lag0Cast = false
	--end
	
end

function setupClassMND()
	Note("setupClassMND")
	SetVariable("playerclass","MND")
	setGroupValue ("classmnd", true)
	EnableTriggerGroup ("iskilling", true)
	EnableTriggerGroup ("autocast", true)
	lag0Cast = true
	EnableTriggerGroup ("autosalv", true)
	EnableTriggerGroup ("autosend", true)
	EnableTriggerGroup ("singlecaster", true)
	EnableTriggerGroup ("autodecept", true)
	EnableTrigger("scanDisableStab", true)
end

function setupClassSTM()
	Note("setupClassSTM")
	SetVariable("playerclass","STM")
	setGroupValue ("classstm", true)
	EnableTriggerGroup ("autosalv", true)
	EnableTriggerGroup ("autosend", true)
end

function setupClassBCI()
	Note("setupClassBCI")
	SetVariable("playerclass","BCI")
	setGroupValue ("classbci", true)
	EnableTriggerGroup ("iskilling", true)
	EnableTriggerGroup ("autopick", true)
	
	if getTierChar() == "Hero" then
		EnableTriggerGroup ("q_frenzy", true)
	else
		EnableTriggerGroup ("q_frenzy_quicken", true)
	end
	
	canStab = true
	EnableTriggerGroup ("autoalert", true)
	EnableTriggerGroup ("autostab", true)
	EnableTrigger("scanDisableStab", true)
end

function setupClassROG()
	Note("setupClassROG")
	SetVariable("playerclass","ROG")
	setGroupValue ("classrog", true)
	EnableTriggerGroup ("iskilling", true)
	EnableTriggerGroup ("autopick", true)
	
	if getTierChar() == "Hero" then
		EnableTriggerGroup ("q_frenzy", true)
	else
		EnableTriggerGroup ("q_frenzy_quicken", true)
	end
	
	if (GetVariable("playername") == "Way") then
		EnableTriggerGroup ("rampage", true)
	end
	
	EnableTriggerGroup ("autoalert", true)
	canStab = true
	EnableTriggerGroup ("autostab", true)
	EnableTrigger("scanDisableStab", true)
end

function setupClassFUS()
	Note("setupClassFUS")
	SetVariable("playerclass","FUS")
	setGroupValue ("classfus", true)
	EnableTriggerGroup ("iskilling", true)
	EnableTriggerGroup ("autoskin", true)
	
	if getTierChar() == "Hero" then
		EnableTriggerGroup ("q_frenzy", true)
	else
		EnableTriggerGroup ("q_frenzy_quicken", true)
	end
	
	EnableTriggerGroup ("autobow", true)
end

function setupClassCLE()	
	Note("setupClassCLE")
	SetVariable("playerclass","CLE")
	setGroupValue ("classcle", true)
	EnableTriggerGroup ("iskilling", true)
	EnableTriggerGroup ("autorc", true)	
	EnableTriggerGroup ("autostartsalv", true)
	EnableTriggerGroup ("autosend", true)
	
	if (GetVariable("playername") == "Vinyl") then
		EnableTriggerGroup ("harvest", true)
	end
end

function setupClassVIZ()	
	Note("setupClassVIZ")
	SetVariable("playerclass","VIZ")
	setGroupValue ("classviz", true)
	EnableTriggerGroup ("iskilling", true)
	EnableTriggerGroup ("autosend", true)
	EnableTriggerGroup ("autorc", true)
	vizDmgOn = true
	vizHealOn = true
	vizFrOn = true
	vizSsOn = true
end

function setupClassPAL()
	Note("setupClassPAL")
	SetVariable("playerclass","PAL")
	setGroupValue ("classpal", true)
	EnableTriggerGroup ("iskilling", true)
	
--	if getTierChar() == "Hero" then
--		EnableTriggerGroup ("q_frenzy", true)
--	else
--		EnableTriggerGroup ("q_frenzy_quicken", true)
--	end
end

function setupClassWAR()
	Note("setupClassWAR")
	SetVariable("playerclass","WAR")
	setGroupValue ("classwar", true)
	EnableTriggerGroup ("iskilling", true)
	
	if getTierChar() == "Hero" then
		EnableTriggerGroup ("q_frenzy", true)
	else
		EnableTriggerGroup ("q_frenzy_quicken", true)
	end
	
	local name = GetVariable("playername")
	
	if name == "Grande" or name == "Boi" or name == "Zup" or name == "Iforgot" or name == "Diniz" then
		EnableTriggerGroup ("autorest", true)
	end
	
end

function setupClassBOD()
	Note("setupClassBOD")
	SetVariable("playerclass","BOD")
	setGroupValue ("classbod", true)
	EnableTriggerGroup ("iskilling", true)
	EnableTriggerGroup ("autoalert", true)
	EnableTriggerGroup ("autorest", true)
	
	if getTierChar() == "Hero" then
		EnableTriggerGroup ("q_frenzy", true)
	else
		EnableTriggerGroup ("q_frenzy_quicken", true)
	end
end

function setupClassMON()
	Note("setupClassMON")
	SetVariable("playerclass","MON")
	setGroupValue ("classmon", true)
	setGroupValue("autorescue", true)	
	canRescue = true
	EnableTriggerGroup ("autogetsteel", true)
	setGroupValue("classmonshf", true)
		
	if (GetVariable("playername") == "Ica" and isMday() == true) then
		EnableTrigger("flashrescue",true)
	end
end

function setupClassBZK()
	Note("setupClassBZK")
	SetVariable("playerclass","BZK")
	setGroupValue ("classbzk", true)
	setGroupValue("autorescue", true)
    canRescue = true
	--EnableTriggerGroup ("rescuepusher", true)	
	EnableTriggerGroup ("iskilling", true)
	EnableTriggerGroup ("autorest", true)
end

function setupClassSHF()
	Note("setupClassSHF")
	SetVariable("playerclass","SHF")
	setGroupValue ("classshf", true)
	
    if GetVariable("playername") ~= "Belo" then
      setGroupValue("autorescue", true)	
      canRescue = true
	end
    
	setGroupValue("classmonshf", true)
	EnableTriggerGroup ("autopick", true)
	EnableTriggerGroup ("autoalert", true)
	EnableTriggerGroup ("autogetsteel", true)
end

function setupClassRAN()
	Note("setupClassRAN")
	SetVariable("playerclass","RAN")
	setGroupValue ("classran", true)
    EnableTriggerGroup ("iskilling", true)
	EnableTriggerGroup ("autogetsteel", true)
    
	if getTierChar() == "Hero" then
		EnableTriggerGroup ("q_frenzy", true)
	else
        setGroupValue("autorescue", true)
        canRescue = true
	end    
    
end

--Functions to set values
function psiSolo(value)
	if value == true then
		EnableTriggerGroup ("q_frenzy", false)
		EnableTriggerGroup ("autocast", false)
		lag0Cast = false
		EnableTrigger("psiwield",false)
		EnableTrigger("folmay",true)
	else
		EnableTriggerGroup ("q_frenzy", true)
		EnableTriggerGroup ("autocast", true)
		lag0Cast = true
		EnableTrigger("psiwield",true)
		EnableTrigger("folmay",false)
	end
end

function setWindowShow(param)
	WindowShow (win,  param)
	EnableTimer("groupStatsUpdate", param)
end

function setBash(status, offhand)
	isBashOn = status
	
	if offhand and offhand ~= "" and offhand ~= " " then 
		offhandName = offhand
	else
		offhandName = "sword"
	end
end

function setGroupValue(group, value)
	EnableAliasGroup (group, value)
	EnableTriggerGroup (group, value)
end

function setVizLimits(lowValue, highValue)
	lowVizHealthLimit = tonumber(lowValue)
	highVizHealthLimit = tonumber(highValue)
	Note("Viz limits set to min " .. lowValue .. ", max " .. highValue)
end

function setGmcpVitals(hpValue, maxhpValue, monhpValue, maxmonhpValue, lagValue)
	if hpValue ~= nil then
		gmcphp = hpValue
	end
	
	if maxhpValue ~= nil then
		gmcpmaxhp = maxhpValue
	end
	
	if monhpValue ~= nil then
		gmcpmonhp = monhpValue
	end
	
	if maxmonhpValue ~= nil then
		gmcpmaxmonhp = maxmonhpValue
	end
	
	if lagValue ~= nil then
		updateLag(lagValue)
	end
	
	if monhpValue ~= nil then
		avaliarChainRescue(monhpValue)
	end
	
	if isTriggerOn("multilottoadd") == true then
		showLotto()
		EnableTrigger ("multilottoadd", false)
	elseif disabledStabName == true then
		disabledStabName = false
		EnableTrigger("scanDisableStab",true)
	end	
end

function avaliarChainRescue(monHp)
	if isMday() and canRescue == true and chainrescue == true then
		hpmon = tonumber(monHp)

		if getTierChar() == "Lord" then
			limite = 20000
		elseif getTierChar() == "Hero" then
			limite = 1000
		else
			limite = 1000
		end

		--Note("hpmon " .. hpmon)

		if hpmon ~= nil and hpmon < limite and tonumber(gmcphp) > limite then
			Execute("rescue") 
			canRescue = false
			chainrescue = false
		end
	end
end


function setGmcpStatus(moblvlValue, mobnameValue, mobhealthValue, sanctimeValue, spellstimeValue, charclassValue, charraceValue, charLevel, playernameValue, shapetimeValue)
	if charLevel ~= nil then
		numCharLevel = tonumber(charLevel)
		
		if numCharLevel == 125 then
			tierChar = "Lord"
		else
			tierChar = "Hero"
		end
		
		defineStabAction(tierChar)
	end
	
	if playernameValue ~= nil then
		charLogin(playernameValue)
	end

	if charraceValue ~= nil then
		detectRace(charraceValue)
	end

	if charclassValue ~= nil then
		detectClass(charclassValue)
	end
	
	if moblvlValue ~= nil then
		gmcpmoblvl = moblvlValue
	end
	
	if mobnameValue ~= nil then
		gmcpmobname = mobnameValue
	end

	if mobhealthValue ~= nil then
		updateMobHealth(mobhealthValue)
	end

	if sanctimeValue ~= nil then
		gmcpsanctime = sanctimeValue
	end
	
	if spellstimeValue ~= nil then
		gmcpspellstime = spellstimeValue
	end
	
	if shapetimeValue ~= nil then
		checkShape(shapetimeValue)
	end
	
	UpdateInfoBar()
end

--Functions to get values
function isMday()
	if isTriggerOn("mdayorder") == true then
		return true
	else
		return false
	end
end

function isStabingByIdOn()
	return isStabingById
end

function isCheckingRoom()
	return isTriggerOn("roomcheckplayers") == true
end

function isKillingWalkingOn()
	return isKillingWalking
end

-- Groupies functions

function isPersonInGroup(name)
	--Note("name: " .. name)
	
	for k,v in pairs(groupList) do
		if string.lower(k) == string.lower(name) then       
			return true
		end
	end
	
	return false
end

function checkRoom()
	EnableTrigger ("roomcheckplayers", false)
	
	missedList = {}

	for k,v in pairs(groupList) do
		found = 0

		for j = 1, #roomList do
			if string.lower(k) == 
				string.lower(roomList[j]) then       
				found = 1 
				break
			end
		end

		if found == 0 then
			if GetVariable("playername") ~= k then
				table.insert (missedList, k)
			end
		end
	end
	
	if table.getn(missedList) == 0 then
		SendNoEcho("gt Everyone here")
	elseif table.getn(missedList) > 0 then
		SendNoEcho("gt Missing list: " .. listToString(missedList))
	end
	
end

function addRoomList(name)
	table.insert (roomList, name)
end

function addGroupie(name, hp, maxHp, mana, maxMana, leader, align, class, race, level, position)
	groupList[name] = {hp=hp, maxHp=maxHp, mana=mana, maxMana=maxMana, leader=leader, align=align, class=class, race=race, level=level, position=position}
	
	if name == GetVariable("playername") then
		--if position == "Fight" then
			--killing = true
		--else
			--killing = false		
		--end
	
		if GetVariable("playerclass") == "PRS" then
			autoPrsAbsolve(align)
		end
	end
end

function remGroupie(name)
	groupList[name] = nil
end

function orderGroupList()
	orderGroupListByMaxHp()
	
	for k,v in ipairs(sortedGroupList) do
		Send("grouporder " .. v .. " front")
	end
end

function orderGroupListByMaxHp()
	sortedGroupList = {}

	table.foreach (groupList, function (k, v) table.insert (sortedGroupList, k) end )
	table.sort (sortedGroupList, function (k1, k2) return groupList[k1].maxHp < groupList[k2].maxHp end )
end

function updateGroupLeader(leader)
	SetVariable("groupleader", leader)
	--Note("Groupleader set to " .. leader)
end

function remCurSelGroup()
	if GetSelection() == nil then
		return
	end
	
	ColourNote("red", "white", GetSelection() .. " removed from Group List!")
	remGroupie(GetSelection(), 1)
end

function checkGroupDeathInfo(name)
	if isPersonInGroup(name) == true then
		ColourNote ("white", "red", "WARNING: DEAD GROUPIE: " .. name)
	end
end

function sendOrder(msgTo, msgContent)
	if isPersonInGroup(msgTo) == true then
		SendToWorld(msgTo, msgContent)
		Note(msgTo .. " was ordered to " .. msgContent)
		--Execute("tell " .. msgTo .. " " .. world.GetVariable("strOrder") .. " " .. msgContent)
	else
		Note(msgTo .. " not in group, order not sent")
	end
end

function autoSetRescue()
	if isTriggerOn("autorescue") == true then
		Note("Setting rescuelist after clear")
		rescuelist = {}
		
		for k, v in pairs(groupList) do
			classText = v.class
			
			if classText == "SOR" or classText == "DRU" or classText == "PRS" or classText == "ASN" or 
			   classText == "BLD" or classText == "WZD" or classText == "ARC" or classText == "PSI" or 
			   classText == "MAG" or classText == "MND" or classText == "STM" or classText == "BCI" or 
			   classText == "ROG" or classText == "FUS" or classText == "CLE" or classText == "VIZ" then
			   
			   addRescue(k)
            elseif classText == "PAL" and isMday() == true then
               addRescue(k)
            end
		end
	end
end

-- Functions to deal with windows

function onWindow()
	EnableTimer ("groupStatsUpdate", true)
	setWindowShow(true)
end

function offWindow()
	EnableTimer ("groupStatsUpdate", false)
	setWindowShow(false)
	EnableTriggerGroup ("GroupList", false)
end

function groupStatsUpdateAction()
	--clearGroupList()
	Execute('sendgmcp Char.Group.List')
end

function updateGMCPGroupWindow()
	if GetTimerInfo ("groupStatsUpdate", 6) == true then
		orderGroupListByMaxHp()
		drawCharStatus()
	end
end

function drawCharStatus()
	count = 0
	
	movewindow.save_state (win)
	setupWin()
	
	--Note("tab " .. tprint(sortedGroupList))
	
	for k, v in ipairs (sortedGroupList) do 

		k1 = v
		v1 = groupList[v]
		
		if (v1 ~= nil and v1.hp ~= nil) then
            --Note("k1: " .. string.upper(k1))
           -- Note("pn: " .. string.upper(GetVariable("playername")))
            
            if string.upper(k1) == string.upper(GetVariable("playername")) then
               --Note("1")
               colour = mwFontSecondColor
            else
               --Note("2")
               colour = mwFontColor
            end
            
            hpLeftSize = barWidth - barWidth*v1.hp/v1.maxHp
			hpTakenSize = barWidth - hpLeftSize

			if tonumber(v1.maxMana) ~= 0 then
				manaLeftSize = barWidth - barWidth*v1.mana/v1.maxMana
			else
				manaLeftSize = barWidth - barWidth
			end

			manaTakenSize = barWidth - manaLeftSize
			
			leaderText = " "
			if v1.leader == "true" then
				leaderText = "*"

				if string.upper(k1) ~= string.upper(world.GetVariable("groupleader")) then
					updateGroupLeader(k1)
				end
			end
			
			nameText = string.format(nameFormat, leaderText .. " " .. k1)
			hpText = string.format(statsFormat, v1.hp, v1.maxHp)
			manaText = string.format(statsFormat, v1.mana, v1.maxMana)
			
			classText = v1.class
			raceText = v1.race
			
			levelText = string.format(levelFormat, v1.level)
			
			positionText = "."
			positionColor = colour
			
			if v1.position == "Stand" or v1.position == "Busy" then
				positionText = "S"
				positionColor = colour
			elseif v1.position == "Rest" then
				positionText = "R"
				positionColor = "limegreen"
			elseif v1.position == "Fight" then
				positionText = "F"
				positionColor = "red"
			elseif v1.position == "Sleep" then
				positionText = "Z"
				positionColor = "white"
			end

			text1 = nameText .. ': ' .. hpText .. ' Hp'
			text2 = manaText .. ' Ma'
			text3 = raceText .. " " .. classText .. " " .. levelText
			text4 = positionText

			WindowText (win, "f",
                text1,   -- text
                text1Begin,count*mwLineSize, 0, 0,        -- rectangle
                ColourNameToRGB (colour), -- colour
                false)              -- not Unicode

			WindowText (win, "f",
                text2,   -- text
                text2Begin,count*mwLineSize, 0, 0,        -- rectangle
                ColourNameToRGB (colour), -- colour
                false)              -- not Unicode

			WindowText (win, "f",
                text3,   -- text
                text3Begin,count*mwLineSize, 0, 0,        -- rectangle
                ColourNameToRGB (colour), -- colour
                false)              -- not Unicode

			WindowText (win, "f",
                text4,   -- text
                text4Begin,count*mwLineSize, 0, 0,        -- rectangle
                ColourNameToRGB (positionColor), -- colour
                false)              -- not Unicode
				
			WindowRectOp (win, miniwin.rect_fill, leftBarBegin, count*mwLineSize+upBarShift, leftBarBegin+hpTakenSize, count*mwLineSize+upBarShift+barHeight, ColourNameToRGB(mwPositiveColorBar))
			WindowRectOp (win, miniwin.rect_fill, leftBarBegin+hpTakenSize, count*mwLineSize+upBarShift, leftBarBegin+barWidth, count*mwLineSize+upBarShift+barHeight,  ColourNameToRGB(mwNegativeColorBar))

			WindowRectOp (win, miniwin.rect_fill, rightBarBegin, count*mwLineSize+upBarShift, rightBarBegin+manaTakenSize, count*mwLineSize+upBarShift+barHeight, ColourNameToRGB(mwPositiveColorBar))
			WindowRectOp (win, miniwin.rect_fill, rightBarBegin+manaTakenSize, count*mwLineSize+upBarShift, rightBarBegin+barWidth, count*mwLineSize+upBarShift+barHeight,  ColourNameToRGB(mwNegativeColorBar))

		end
		count = count + 1
	end

	setWindowShow(true)

end


-- Inventory / lotto functions
function addInventoryItem(item, qtde)
	item = trim(item)
	
	if item ~= nil and string.len(item) > 0 and string.match(item, "a pink potion") == nil and string.match(item, "lockbox") == nil then
		strQtde = ""
		
		if qtde ~= nil and string.len(qtde) > 0 then
			strQtde = qtde .. "x "
		end
		
		table.insert (inventoryList, strQtde .. item)
	end
end

function addLotto(name, showlotto)
	found = 0

	if lottoNames == nil then
	  lottoNames = {}
	end

	for i = 1, #lottoNames do
	  if string.lower(lottoNames[i]) == string.lower(name) then 
		found = 1 
		break
	  end
	end

	if found ~= 1 then
	  table.insert(lottoNames, name)
	end
	
	if showlotto == true then
		showLotto()
	end
	
	
end

function remLotto(name)
	indexToRemove = -1

	for i = 1, #lottoNames do
	  if string.lower(lottoNames[i]) == string.lower(name) then 
		indexToRemove = i 
		break
	  end
	end

	if indexToRemove ~= -1 then
	  table.remove(lottoNames, indexToRemove)
	  ColourNote("red", "white", name .. " removed from actionQueue!")
	end

	showLotto()
end

function showLotto()
	ColourNote("red", "white", "Lotto List Size: " .. tableLength(lottoNames))

	for i = 1, #lottoNames do
		ColourNote("red", "white", lottoNames[i])
	end
end

function passItemGroup(item)
	Note("Passing " .. item .. " to the group")

	for k,v in pairs(groupList) do
		Send("give " .. item .. " " .. k)
	end
end

-- Killing functions
function decept(mob)
	if disabledStabName == false then 
		Execute("quicken 9")
		Execute("c decept " .. mob)
		Execute("quicken off")
		Execute("c decept " .. mob)
	end
end

function killCurrentTarget()
	Note("")
	Send("kil " .. currentTarget)
end

function longShotFleer(dir)	
	Note("")
	Send("ls " .. dir .. " " .. currentTarget)
end

function killAfterEmote(leader, target)
	local currentPlayer = world.GetVariable("playername")
	
	if currentPlayer ~= leader then
		Note("")
		Send("kill " .. target)
		currentTarget = target
		
		if isBashOn == true then
			Send("wear shield=bash=st=wear " .. offhandName)
		end
	end
end

--Method moved to pulgin message_test
--function detectWalking(mob)
--	if isKillingWalking == true  then
--		Simulate(mob .. "\n")
--	end
--end

function attackById(idMob)
	if isStabingById == true then
		--Note("Atacking mob id " .. idMob)

		Send(stabAction .. " " .. idMob)
	end
end

function autoSlip(mob)
	lastdirmoved = 	GetVariable("lastdirmoved")
	usingBow = false
	
	if isTriggerOn("autoreloadbow") == true then
		usingBow = true
	end
	
	canStab = false
	
	if usingBow == true then
		if lastdirmoved == "north" then
			Execute("south=remove bow=slip north " .. mob .. "=wield bow=assassinate " .. mob)
		elseif lastdirmoved == "south" then
			Execute("north=remove bow=slip south " .. mob .. "=wield bow=assassinate " .. mob)
		elseif lastdirmoved == "east" then
			Execute("west=remove bow=slip east " .. mob .. "=wield bow=assassinate " .. mob)
		elseif lastdirmoved == "west" then
			Execute("east=remove bow=slip west " .. mob .. "=wield bow=assassinate " .. mob)
		elseif lastdirmoved == "up" then
			Execute("down=remove bow=slip up " .. mob .. "=wield bow=assassinate " .. mob)
		elseif lastdirmoved == "down" then
			Execute("up=remove bow=slip down " .. mob .. "=wield bow=assassinate " .. mob)
		end
	else
		if lastdirmoved == "north" then
			Execute("south=slip north " .. mob .. "=assassinate " .. mob)
		elseif lastdirmoved == "south" then
			Execute("north=slip south " .. mob .. "=assassinate " .. mob)
		elseif lastdirmoved == "east" then
			Execute("west=slip east " .. mob .. "=assassinate " .. mob)
		elseif lastdirmoved == "west" then
			Execute("east=slip west " .. mob .. "=assassinate " .. mob)
		elseif lastdirmoved == "up" then
			Execute("down=slip up " .. mob .. "=assassinate " .. mob)
		elseif lastdirmoved == "down" then
			Execute("up=slip down " .. mob .. "=assassinate " .. mob)
		end
	end
	
	canStab = true
end	

--On/off functions

function offRun()
	local lead = GetVariable("groupleader")
	local self = GetVariable("playername")
	
	if lead == self then
		Send("gt off run")
	end
end

function onStab(action)
	canStab = true
	
	EnableTrigger("scanDisableStab",true)

	if action and action ~= "" and action ~= " " then 
		stabAction = action
	end
	
	Note("onStab")
end

function offStab()
	stabAll = false
	canStab = false
	EnableTrigger("scanDisableStab",false)
	Note("offStab")
end

function onStabAll(action)
	stabAll = true
	
	EnableTrigger("scanDisableStab",true)

	if action and action ~= "" and action ~= " " then 
		stabAction = action
	end
	Note("stabAll true")
end

function offStabAll()
	stabAll = false
	canStab = false
	EnableTrigger("scanDisableStab",false)
	Note("stabAll false")
end

function onStabById(action)
	EnableTrigger("scanDisableStab",true)
	
	isStabingById = true

	if action and action ~= "" and action ~= " " then 
		stabAction = action
	end
end

function offStabById()
	isStabingById = false
end

function onWalking(action)
	isKillingWalking = true

	if action and action ~= "" and action ~= " " then 
		stabAction = action
	end
end

function offWalking()
	isKillingWalking = false
end

-- Update functions
function UpdateInfoBar()
	local mobInfo = ""
	
	if gmcpmoblvl ~= nil and string.len(gmcpmoblvl) > 0 and gmcpmoblvl ~= "0" then
		mobInfo = " .:. Mob: L " .. gmcpmoblvl .. " .:. " .. gmcpmobhealth .. "% .:. " .. gmcpmobname  
	end

	local brandinfo = ""
	
	if tonumber(brandlevel) and tonumber(brandlevel) > 0 then
		brandinfo =" .:. L" .. safeStringValue(brandlevel) .. " " .. safeStringValue(brandcurrent) .. "/" .. safeStringValue(brandmax)
	end
	
	SetStatus("XP: " .. safeStringValue(gainedxp) .. brandinfo .. " .:. Sanc: " .. safeStringValue(gmcpsanctime) .. " .:. Spells: " .. safeStringValue(gmcpspellstime) .. mobInfo)
end

function updateTitle(title)
	SetTitle(title)
end

function updateMobHealth(value)
	gmcpmobhealth = value
	
	numvalue = tonumber(value)
	
	if GetVariable("playerclass") == "VIZ" then
		checkVizAction(numvalue)
	elseif awfulCast == true and numvalue < 15 and numvalue > 0 and isTriggerOn("autocast") == true then
		Send("mm")
	end
end

function updateSancTime(p_sancTime)
	timesanc = p_sancTime
	UpdateInfoBar()
end

--GMCP Functions
function autoPrsAbsolve(alig)
	if tonumber(alig) and tonumber(alig) < 700 then
		Send("preach absolve")	
	end
end

function updateLag(lag)
	gmcplag = tonumber(lag)
	
	--Note("killing: " .. tostring(killing))
	if gmcplag == 0 and lag0Cast == true and killing == true and awfulCast == false and isTriggerOn("autocast") == true then
		killing = false
		lag0Cast = false
		scriptAfter(2, 'lag0Cast = true')
		Send("mm")
	end
end

function checkShape (leftTime)
	if leftTime == 25 then
		shapeNext()
	end
end

--Vizier Functions
function checkVizAction(numvalue)
	if numvalue == 0 then
		vizFinalRiteCasted = false
	elseif numvalue < lowVizHealthLimit and vizDmgOn == true and gmcplag == 0 then
		if getTierChar() == "Hero" and vizFinalRiteCasted == false then
			castPhlebotomize("")
		elseif getTierChar() == "Lord" and numvalue > 20 then
			castEnervate("")
		end
	elseif vizFinalRiteCasted == false and numvalue > highVizHealthLimit and vizFrOn == true then
		if tonumber(gmcphp) > 12000 then
			Send("c 'soul shackle'")
		end
		
		castFinalRites("")
	end
end

function castPhlebotomize(target)
	Send("c phlebotomize " .. target)
end

function castEnervate(target)
	Send("c enervate " .. target)
end

function castFinalRites(target)
	Note("casting final rites")
	Send("c 'final rites' " .. target)
	vizFinalRiteCasted = true
end

function castSanguenPax()
	Note("Casting SanguenPax")
	Send("c 'sanguen pax' pool")			
	vizFinalRiteCasted = false
end

function castVitaeFlux()
	Note("Casting VitaeFlux")
	Send("c 'vitae flux' pool")	
	Send("stance soul")	
	vizFinalRiteCasted = false
end

function noticePoolCreated()
	if showVizPool == true then
		ColourNote ("blue", "cyan", "WARNING: VIZ POOL CREATED")
	end
	
	if GetVariable("playerclass") == "VIZ" and vizHealOn == true then
		if getTierChar() == "Hero" then
			castSanguenPax()
		else
			castVitaeFlux()
		end			
	end
end

function checkVizHeal(maxMana, hpMon, monName)
  altMana = tonumber(maxMana)
  
  if altMana > 10000 then
     hpmon = tonumber(hpMon)

     if hpmon ~= nil and hpmon < 10000 and hpmon > 1000  then
        Execute("c comf " .. monName) 
     end
  end
  
end

--Shape functions
function addShape(name)
	found = 0

	if shapeNames == nil then
	  shapeNames = {}
	end

	for i = 1, #shapeNames do
	  if string.lower(shapeNames[i]) == string.lower(name) then 
		found = 1 
		break
	  end
	end

	if found == 1 then
	  ColourNote("red", "white", name .. " already in the shape list!")
	else
	  table.insert(shapeNames, name)
	  ColourNote("red", "white", name .. " added to shape list!")
	end
end

function remShape(name)
	indexToRemove = -1

	for i = 1, #shapeNames do
	  if string.lower(shapeNames[i]) == string.lower(name) then 
		indexToRemove = i 
		break
	  end
	end

	if indexToRemove == -1 then
	  ColourNote("red", "white", name .. " wasn't in the shape list!")
	else
	  table.remove(shapeNames, indexToRemove)
	  ColourNote("red", "white", name .. " removed from shape list!")
	end
end

function shapeNext()
	if shapeNames == nil then
	  shapeNames = {}
	end

	--for i = 1, #shapeNames do
	  --if shapeNames[i] ~= nil then
		--addActionQueue("rac shapeshift " .. shapeNames[i])
		--remShape(shapeNames[i])
	  --end
	--end
	
	if shapeNames[1] ~= nil then
		addActionQueue("rac shapeshift " .. shapeNames[1])
		remShape(shapeNames[1])
	end
end

--Orders functions
function castpc()
	if GetVariable("playerclass") == "PRS" then
		Send("preach comf")
	end
end

function castps()
	if GetVariable("playerclass") == "PRS" then
		Send("ps")
	end
end

function castcc(name)
	if GetVariable("playerclass") == "PRS" or GetVariable("playerclass") == "CLE" or GetVariable("playerclass") == "DRU" or GetVariable("playerclass") == "VIZ" then
		Send("c comfort " .. name)
	end
end

function castdd(name)
	if GetVariable("playerclass") == "PRS" or GetVariable("playerclass") == "CLE" or GetVariable("playerclass") == "DRU" or GetVariable("playerclass") == "VIZ" then
		Send("c div " .. name)
	end
end

function castcla()
	if GetVariable("playerclass") == "PRS" then
		Send("preach clarify")
	end
end

function castpan()
	if GetVariable("playerclass") == "PRS" then
		Send("preach panacea")
	end
end

function aug(qtde)
	if GetVariable("playerclass") == "PRS" or GetVariable("playerclass") == "VIZ" then
		Send("aug " .. qtde)
	end
end

function castmm()
	if isTriggerOn("autocast") == true then
		Send("mm")
	end
end

function castms()
	if isTriggerOn("areacaster") == true then
		Send("ms")
	end
end

function castrc(name)
	if isTriggerOn("autorctrigger") == true then
		sendOrder(name, "tell " .. GetVariable("playername") .. " rc")
	end
end

function bt()
	if GetVariable("playerclass") == "BLD" then
		Send("bt")
	end
end

function bte()
	if GetVariable("playerclass") == "BLD" then
		Send("bte")
	end
end

function ssv()
	if GetVariable("playerclass") == "BLD" then
		Send("ssv")
	end
end

function setWindowFilter()
	--Execute("offwindow")
	Execute("onfilter")

	--if GetVariable("playerclass") == "PRS" then
	--Execute("onwindow")
	--else
	
	--Note("aa: " .. GetVariable("playerclass")")
	
	if GetVariable("playerclass") == "PSI" or GetVariable("playerclass") == "WAR" then
		Execute("offfilter")
	end	
end

function setHealMon(mon)
	Note("HealMon on " ..mon .. " executed.")
	
	if GetVariable("playerclass") == "DRU" or GetVariable("playerclass") == "CLE" or GetVariable("playerclass") == "PRS" then
		Execute("wake")
		Execute("monitor " .. mon)
	end
end

--PSI Functions
function showPsiWeapons()
	tprint(weaponsWithIdOwnerList)
end

function addWeaponsAlt(altName, weaponName)
	local t = splitString(altName," ")
	local tsize = table.getn(t)

	if tsize == 1 then
		local weaponData = weaponsWithIdOwnerList[string.upper(weaponName)]
		
		if not weaponData then
			weaponsWithIdOwnerList[string.upper(weaponName)] = {}
			weaponsWithIdOwnerList[string.upper(weaponName)]["owner"] = altName
		end
	end
	
end

function findWeaponOwner(weaponName)
   unscapedWeapon = string.gsub(weaponName, '\\"', '"')
    
    local weaponData = weaponsWithIdOwnerList[string.upper(unscapedWeapon)]

	if weaponData then
		local owner = weaponsWithIdOwnerList[string.upper(unscapedWeapon)]["owner"]
		if owner then
			return owner
		end
	end
end

function pickPsiWeaponOnGround(idName)
	local t = splitString(idName,"#")

	local id = t[1]
	local name = t[2]

	local owner = findWeaponOwner(tostring(name))
	
	if owner then
		if string.upper(owner) == string.upper(GetVariable("playername")) then
			lag0Cast = false
			Execute("get " .. id)
		else
			Execute("get " .. id)
			Execute("give " .. id .. " " .. owner)
		end
	end
end

function passPsiWeaponOwner(idName)
	local t = splitString(idName,"#")
	local id = t[1]
	local name = t[2]
	local owner = findWeaponOwner(tostring(name))

	if owner then
		if string.upper(owner) == string.upper(GetVariable("playername")) then
			Execute("wear " .. id)
		else
			Execute("give " .. id .. " " .. owner)
		end
	end
end

--Queue functions
function addActionQueue(value)
	indexAdded = -1

	for i = 1, #actionQueue do
	  if string.lower(actionQueue[i]) == string.lower(value) then 
		indexAdded = i 
		break
	  end
	end

	if indexAdded == -1 then
		table.insert(actionQueue, value)
		ColourNote("red", "white", value .. " added to actionQueue!")
	else
		ColourNote("red", "white", value .. " already on actionQueue!")
	end

	--table.insert(actionQueue, value)
	--TODO Romulo - avaliar pq estava comentado o execute
	--Execute(value)
	--showActionQueue()
end

function remActionQueue(value)
	indexToRemove = -1

	for i = 1, #actionQueue do
	  if string.lower(actionQueue[i]) == string.lower(value) then 
		indexToRemove = i 
		break
	  end
	end

	if indexToRemove ~= -1 then
	  table.remove(actionQueue, indexToRemove)
	  ColourNote("red", "white", value .. " removed from actionQueue!")
      execActionQueue()
	end
end

function showActionQueue()
	ColourNote("red", "white", "Action Queue:")

	if actionQueue == nil then
	  actionQueue = {}
	end

	for i = 1, #actionQueue do
	  if actionQueue[i] ~= nil then
		ColourNote("red", "white", actionQueue[i])
	  end
	end
end

function execActionQueue()
	if actionQueue == nil then
	  actionQueue = {}
	end

--	for i = 1, #actionQueue do
--	  if actionQueue[i] ~= nil then
--		Execute(actionQueue[i])
--	  end
--	end
    
	--for i = 1, #actionQueue do
	  if actionQueue[1] ~= nil then
		Execute(actionQueue[1])
	  end
	--end
    
end

--Rescue functions
function addCurSelRescue()
	if GetSelection() == nil then
		return
	end

	addRescue(GetSelection())
end

function remCurSelRescue()
	if GetSelection() == nil then
		return
	end
	
	remRescue(GetSelection())
end

function addRescue(name)
	found = 0

	if rescuelist == nil then
	  rescuelist = {}
	end

	for i = 1, #rescuelist do
	  if string.lower(rescuelist[i]) == string.lower(name) then 
		found = 1 
		break
	  end
	end

	if found == 1 then
	  ColourNote("red", "white", name .. " already in the rescue list!")
	else
	  table.insert(rescuelist, name)
	  ColourNote("red", "white", name .. " added to rescue list!")
	end
end

function remRescue(name)
	indexToRemove = -1

	for i = 1, #rescuelist do
	  if string.lower(rescuelist[i]) == string.lower(name) then 
		indexToRemove = i 
		break
	  end
	end

	if indexToRemove == -1 then
	  ColourNote("red", "white", name .. " wasn't in the rescue list!")
	else
	  table.remove(rescuelist, indexToRemove)
	  ColourNote("red", "white", name .. " removed from rescue list!")
	end
end

function avaliarRescue(rescueCandidate)
	found = 0

	if (rescuelist ~= nil and canRescue == true and getHpPercentage() > 20) then
		for i = 1, #rescuelist do
			if string.lower(rescuelist[i]) == string.lower(rescueCandidate) then       
				found = 1 
				break
			end
		end
	end

	if found == 1 then
		Note("")
		Send("rescue " .. rescueCandidate)
		canRescue = false
	end
end

function avaliarRemRescue(alt)
	if isMday() == false then
		indexToRemove = -1

		if rescuelist == nil then
			rescuelist = {}
		end

		for i = 1, #rescuelist do
			if string.lower(rescuelist[i]) == string.lower(alt) then 
				indexToRemove = i 
				break
			end
		end

		if indexToRemove ~= -1 then
			table.remove(rescuelist, indexToRemove)
			ColourNote("red", "white", alt .. " removed from rescue list!")
		end
	end
end

--Sub names functions
function SubName(pref, name)
	--Note("aaa")
	ColourNote ("dodgerblue", "black", pref .. name)

	if disabledStabName == false then --quem define  o scan feito nas classes stabbers	
		if stabAll == true then 
			Execute(stabAction .. " " .. name)
		end
	end
end

function SubNameAggie(pref, name)
	ColourNote ("red", "black", pref .. name)
	
	if disabledStabName == false then --quem define  o scan feito nas classes stabbers	
		if isKillingWalking == true then 
			Execute(stabAction .. " " .. name)	
		elseif stabAll == true then 
			Execute(stabAction .. " " .. name)	
		elseif canStab == true then --quem define  a classe, pode ser desabilitado pelo offstab
			Execute(stabAction .. " " .. name)
			if isMday() then
				Execute(stabAction .. " 2." .. name)
			end
		end
	end
end

function SubNameLord(pref, name)
	ColourNote ("red", "black", pref .. name)
	
	if disabledStabName == false then --quem define  o scan feito nas classes stabbers	
		if canSlip == true then --quem define  o player manualmente, pode ser desabilitado pelo offslip				
			autoSlip(name)
		elseif isKillingWalking == true then 
			Execute(stabAction .. " " .. name)	
		elseif stabAll == true then 
			Execute(stabAction .. " " .. name)	
		elseif canStab == true then --quem define  a classe, pode ser desabilitado pelo offstab
			Execute(stabAction .. " " .. name)
			if isMday() then
				Execute(stabAction .. " 2." .. name)
			end
		end
	end

end

-- Auxiliary functions
function openWorlds(group)

      --openWorld("Aff")
      --openWorld("Amenadiel")
      --openWorld("Arroz")
      --openWorld("Belo")
      --openWorld("Bid")
      --openWorld("Blackmail")
      --openWorld("Boi")
      --openWorld("Bom")
      --openWorld("Cabeca")
      --openWorld("Cagao")
      --openWorld("Capelao")
      --openWorld("Diniz")
      --openWorld("Dois")
      --openWorld("Duno")
      --openWorld("Fantasma")
      --openWorld("Feiticeiro")
      --openWorld("Fido")
      --openWorld("Flecha")
      --openWorld("Grande")
      --openWorld("Hoje")
      --openWorld("Ica")
      --openWorld("Iforgot")
      --openWorld("Indio")
      --openWorld("Juvenal")
      --openWorld("Kubrick")
      --openWorld("Lais")
      --openWorld("Larin")
      --openWorld("Letigo")
      --openWorld("Lollis")
      --openWorld("Luccian")
      --openWorld("Lud")
      --openWorld("Mago")
      --openWorld("Mal")
      --openWorld("Maybe")
      --openWorld("Mecao")
      --openWorld("Medo")
      --openWorld("Meiodia")
      --openWorld("Motta")
      --openWorld("Noone")
      --openWorld("Opa")
      --openWorld("Padre")
      --openWorld("Papapop")
      --openWorld("Pequeno")
      --openWorld("Quatro")
      --openWorld("Rang")
      --openWorld("Raposao")
      --openWorld("Ravengar")
      --openWorld("Remo")
      --openWorld("Romeu")
      --openWorld("Romulo")
      --openWorld("Sombrero")
      --openWorld("Tele")
      --openWorld("Tinna")
      --openWorld("Tuazd")
      --openWorld("Tuga")
      --openWorld("Uno")
      --openWorld("Vinyl")
      --openWorld("Vizionary")
      --openWorld("Way")
      --openWorld("Williamtell")
      --openWorld("Xing")
      --openWorld("Xingu")
      --openWorld("Yay")
      --openWorld("Zingu")
      --openWorld("Zup")

   if group == "Main" then
      openWorld("Hoje")
      openWorld("Aff")
      openWorld("Amenadiel")
      openWorld("Bid")
      openWorld("Boi")
      openWorld("Cabeca")
      openWorld("Cagao")
      openWorld("Capelao")
      openWorld("Duno")
      openWorld("Flecha")
      openWorld("Grande")
      openWorld("Ica")
      openWorld("Indio")
      openWorld("Juvenal")
      openWorld("Kubrick")
      openWorld("Lollis")
      openWorld("Mal")
      openWorld("Maybe")
      openWorld("Motta")
      openWorld("Quatro")
      openWorld("Rang")
      openWorld("Raposao")
      openWorld("Ravengar")
      openWorld("Romulo")
      openWorld("Tinna")
      openWorld("Tuazd")
      openWorld("Tuga")
      openWorld("Uno")
      openWorld("Williamtell")
      openWorld("Xing")
      openWorld("Xingu")
      openWorld("Zingu")
      openWorld("Zup")    
 
   elseif group == "Camp" then

   elseif group == "Tina" then

   elseif group == "Lonestar" then
      openWorld("Arroz")
      openWorld("Blackmail")
      openWorld("Boi")
      openWorld("Bom")
      openWorld("Diniz")
      openWorld("Dois")
      openWorld("Fantasma")
      openWorld("Feiticeiro")
      openWorld("Iforgot")
      openWorld("Lais")
      openWorld("Larin")
      openWorld("Letigo")
      openWorld("Lollis")
      openWorld("Luccian")
      openWorld("Lud")
      openWorld("Mago")
      openWorld("Mecao")
      openWorld("Medo")
      openWorld("Meiodia")
      openWorld("Noone")
      openWorld("Padre")
      openWorld("Papapop")
      openWorld("Pequeno")
      openWorld("Remo")
      openWorld("Romeu")
      openWorld("Romulo")
      openWorld("Sombrero")
      openWorld("Tele")
      openWorld("Vinyl")
      openWorld("Yay")
   elseif group == "All" then
      openWorld("Aff")
      openWorld("Amenadiel")
      openWorld("Arroz")
      openWorld("Belo")
      openWorld("Bid")
      openWorld("Blackmail")
      openWorld("Boi")
      openWorld("Bom")
      openWorld("Cabeca")
      openWorld("Cagao")
      openWorld("Capelao")
      openWorld("Diniz")
      openWorld("Dois")
      openWorld("Duno")
      openWorld("Fantasma")
      openWorld("Feiticeiro")
      openWorld("Fido")
      openWorld("Flecha")
      openWorld("Grande")
      openWorld("Hoje")
      openWorld("Ica")
      openWorld("Iforgot")
      openWorld("Indio")
      openWorld("Juvenal")
      openWorld("Kubrick")
      openWorld("Lais")
      openWorld("Larin")
      openWorld("Letigo")
      openWorld("Lollis")
      openWorld("Luccian")
      openWorld("Lud")
      openWorld("Mago")
      openWorld("Mal")
      openWorld("Maybe")
      openWorld("Mecao")
      openWorld("Medo")
      openWorld("Meiodia")
      openWorld("Motta")
      openWorld("Noone")
      openWorld("Opa")
      openWorld("Padre")
      openWorld("Papapop")
      openWorld("Pequeno")
      openWorld("Quatro")
      openWorld("Rang")
      openWorld("Raposao")
      openWorld("Ravengar")
      openWorld("Remo")
      openWorld("Romeu")
      openWorld("Romulo")
      openWorld("Sombrero")
      openWorld("Tele")
      openWorld("Tinna")
      openWorld("Tuazd")
      openWorld("Tuga")
      openWorld("Uno")
      openWorld("Vinyl")
      openWorld("Vizionary")
      openWorld("Way")
      openWorld("Williamtell")
      openWorld("Xing")
      openWorld("Xingu")
      openWorld("Yay")
      openWorld("Zingu")
      openWorld("Zup")         
   end
   
end 

function openWorld(name)
   world.Open ("worlds/" .. name .. ".mcl")
end

function ExecuteNoEcho (command)
  SetOption ("display_my_input", 0)
  Execute (command)
  SetOption ("display_my_input", 1)
end -- function

function charLogin(name)
	updateTitle(name)
	SetVariable ("playername", name)
	
	Execute("")
	
	if name == "Opa" then
		ExecuteNoEcho("onmir")
	elseif name == "Hoje" then
		ExecuteNoEcho("stand")
		ExecuteNoEcho("take")
	end
end

function defineNextChar(param)
   if param ~= nil and string.len(param) > 2 then
      local t = splitString(param," ")
      local tsize = table.getn(t)
    
      local charName = t[1]
      local comp = ""
      local itemDrop = ""
      local comm = ""
      
      if tsize == 2 then
         itemDrop = t[2]
         comm = "drop " .. itemDrop .. "=alt " .. GetVariable("playername") .. " callback " .. itemDrop
      elseif tsize == 3 then
         comp = t[2]
         itemDrop = t[3]
                  
         if comp == "ral" then
            comm = "ral " .. itemDrop .. "=alt " .. GetVariable("playername") .. " callback " .. itemDrop
         elseif comp == "callback" then
            comm = "get " .. itemDrop .. "=give " .. itemDrop .. " alleg"
         end
      end      
      
      nextComm = comm
   
      nextPlayer = charName
      EnableTriggerGroup ("autonextlogin", true)
      Execute("quit")
   
   end
end

function logNextChar()
	if nextPlayer ~= nil and string.len(nextPlayer) > 2 then
		Execute(nextPlayer)
		nextPlayer = ""
		EnableTriggerGroup ("autonextlogin", false)
	end
 end

function afterLogin()
   Send("")
   Execute(nextComm)
   --nextComm = ""
end

function getTierChar()
	return tierChar
end

function defineStabAction(tier)
	stabAction = "assassinate"
	
	if tier then
		if tier == "Hero" then
			stabAction = "backstab"
		elseif tier == "Lord" or tier == "Lady" then
			stabAction = "assassinate"
		end
	end
end

function planeTo(text)
	local plane = string.upper(text)
	local matchedText = 
	  string.match("AIRSCAPE",plane) or	
	  string.match("ARCADIA",plane) or	
	  string.match("ASTRAL",plane) or
	  string.match("FIREREALM",plane) or
	  string.match("KARNATH",plane) or
	  string.match("KZINTI",plane) or
	  string.match("HOMEWORLD",plane) or
	  string.match("MIDGAARDIA",plane) or
	  string.match("NOCTOPIA",plane) or
	  string.match("OUTLAND",plane) or
	  string.match("TARTERUS",plane) or
	  string.match("THORNGATE",plane) or
	  string.match("WATER",plane) or
	  string.match("STONE",plane) or
	  string.match("EARTH",plane) or
	  string.match("ANCHOR",plane)

	if matchedText ~= nil and string.len(matchedText) > 1 then
		SetVariable("currentPlane", text)
		groupStatsUpdateAction()
		Execute("cast plane " .. text)
	else
		Note("Invalid plane: " .. text )
	end
end

function getpassleader(item, atCorpse)
	if atCorpse == true then
		Send("get " .. item .. " corpse")
	else
		Send("get " .. item)
	end
	
	passleader(item)
end

function passleader(item)
	local lead = GetVariable("groupleader")
	local self = GetVariable("playername")
	
	if lead ~= self then
		Send("give " .. item .. " " .. lead)
	end
end

function getHpPercentage()
	local _currHp = tonumber(gmcphp)
	local _maxHp = tonumber(gmcpmaxhp)
	
	return 100*_currHp/_maxHp
end

--Utility functions
function keys_to_list(tab)
  local tmp = {}

  for k,_ in pairs(tab) do
	table.insert(tmp, k)
  end
  
  return table.concat(tmp, "|")
end

function sendToAllWorlds(command)
	for k, v in pairs (GetWorldIdList ()) do 
		--Note("k: " .. k)
		--Note("v: " .. v)
		GetWorldById (v):Execute (command)
	end
end

function scriptToAllWorlds(command)
	for k, v in pairs (GetWorldIdList ()) do 
		GetWorldById (v):Execute ("px " .. command)
	end
end

function trim(s)
  return (s:gsub("^%s*(.-)%s*$", "%1"))
end

function listToString(t)
	return table.concat(t,', ')
end

function tableLength(T)
  local count = 0
  for _ in pairs(T) do count = count + 1 end
  return count
end

function splitString(inputstr, sep)
        if sep == nil then
                sep = "%s"
        end
        local t={} ; i=1
        for str in string.gmatch(inputstr, "([^"..sep.."]+)") do
                t[i] = str
                i = i + 1
        end
        return t
end

function GetSafePluginVariable(varname)
	myVar = GetPluginVariable ("e94f6bd8509a2b00d10cb226", varname)

	if myVar == nil then
		return ""
	end
	
	return myVar
end

function GetSelection()
  -- find selection in output window, if any
  local first_line, last_line = GetSelectionStartLine(), 
                                math.min (GetSelectionEndLine(), GetLinesInBufferCount ())

  local first_column, last_column = GetSelectionStartColumn(), GetSelectionEndColumn()
  
  -- nothing selected, do normal copy
  if first_line <= 0 then
   return nil
  end -- if nothing to copy from output window
  
  local copystring = ""
  
  -- iterate to build up copy text
  for line = first_line, last_line do
  
    if line < last_line then
      copystring = copystring .. GetLineInfo(line).text:sub (first_column)  -- copy rest of line
      first_column = 1
      
      -- Is this a new line or merely the continuation of a paragraph?
      if GetLineInfo (line, 3) then
        copystring = copystring .. "\r\n"
      end  -- new line
      
    else
      copystring = copystring .. GetLineInfo(line).text:sub (first_column, last_column - 1)
    end -- if
        
  end  -- for loop
  
  -- Get rid of a spurious extra new line at the start.
  if copystring:sub (1, 2) == "\r\n" then
    copystring = copystring:sub (3)
  end   -- if newline at start
  
  -- finally return the result
  return copystring
  
end -- function GetSelection

function SendToWorld (name, message)
	local otherworld = GetWorld (name)
	if otherworld == nil then
		Note ("World " .. name .. " is not open")
		return
	end

	otherworld:Execute (message)	

end -- of SendToWorld

function safeStringValue(value)
	if value == nil then
		return ""
	else
		return tostring(value)
	end
end

function isTriggerOn(name)
	if GetTriggerInfo (name, 8) == true then
		return true
	else
		return false
	end
end

function firstToUpper(str)
    return (str:gsub("^%l", string.upper))
end

function executeAfter(delayTime, command)
	DoAfterSpecial (delayTime, command, sendto.execute)
end

function scriptAfter(delayTime, command)
	DoAfterSpecial (delayTime, command, sendto.script)
end


--Run counters functions

function counterCommand(args)
	local arg1, arg2 = ""
	if string.find(args, " ") ~= nil then
		arg1 = string.sub(args, 0, string.find(args, " ") - 1)
		arg2 = string.sub(args, string.find(args, " ") + 1)
	else
		arg1 = args
		arg2 = ""
	end
	
	if arg1 == "add" then
		if string.upper(arg2) == string.upper(world.GetVariable("playername")) then
			addTableCounter("You")
		else
			addTableCounter(arg2)		
		end
	end
	
	if arg1 == "clear" or arg1 == "reset" then
		clearDamList()
		Note("Dmg cleared")
	end
	
	if arg1 == "show" then
		calculateTotalDamNum()
		Note("Monitoring:")
		
		for k, v in pairs (damList) do 
			Note(dmgTableToString(k, v))
		end	
	end
	
	if arg1 == "populate" then		
		EnableTrigger("GroupGrabDmg", true)
		Send("group")
		scriptAfter (5, 'EnableTriggerGroup ("Counters", true)')
		scriptAfter (5, 'EnableTrigger("GroupGrabDmg", false)')
	end
	
	if arg1 == "report" then
		calculateTotalDamNum()
		Note("Monitoring:")
		
		for k, v in pairs (damList) do 
			Send("gt " .. dmgTableToString(k, v))
		end	
	end
end

function dmgTableToString(name, tab)
	local repName = name

	if repName == "You" then
		repName = 	GetVariable("playername")
	end
	
	percentDam = string.format("%.1f",(tab["totalDmg"]/totalDamNum)*100) 

	retorno = repName .. " dmg: (|BC|" .. percentDam .. "|N|%)"
		
	local verb = ""
	local val = 0
	
	verb = "pathetic"          
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "weak"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "punishing"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "surprising"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "amazing"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "astonishing"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "mauling"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "decimating"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "devastating"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "pulverizing"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "maiming"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "eviscerating"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "mutilating"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "disemboweling"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "dismembering"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "massacring"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "mangling"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "demolishing"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "obliterating"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "annihilating"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "eradicating"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "vaporizing"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "destructive"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "extreme"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "porcine"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "divine"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "daunting"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end
	verb = "terminal"
	val = tab[verb]; if val > 0 then retorno = retorno .. " - |BC|" .. val .. " |N|" .. verb end

	return retorno

 end	

function addTableCounter(name)
	found = 0

	for k,v in pairs(damList) do
		if string.upper(k) == string.upper(name) then 
			found = 1 
			break
		end
	end
	
	if damList == nil then
		ColourNote("red", "white", " nil list")
	end
	
	if found == 1 then
	  ColourNote("red", "white", name .. " already in the dmg list!")
	else
		damList[name] = {totalDmg=0, pathetic=0, weak=0, punishing=0, surprising=0, amazing=0, astonishing=0, mauling=0, decimating=0, devastating=0, pulverizing=0, maiming=0, eviscerating=0, mutilating=0, disemboweling=0, dismembering=0, massacring=0, mangling=0, demolishing=0, obliterating=0, annihilating=0, eradicating=0, vaporizing=0, destructive=0, extreme=0, porcine=0, divine=0, daunting=0, terminal=0}
		SetVariable("monDamList", keys_to_list(damList))
	end
	
	world.ColourNote("red", "white", name .. " has been added!")	
end

function findDamage(line)
	for i = 1, table.getn(dverbs) do
		if string.find(line, dverbs[i]) ~= nil then
			local fWord = string.sub(line, 0, string.find(line, " ") - 1)
			
			for k, v in pairs (damList) do 
				if string.find(string.upper(fWord), string.upper(k)) ~= nil then
					local sFind = string.find(line, dverbs[i])
					local dVerb = string.sub(line, sFind, string.find(line, " ", sFind))	
					addDamage(k, dVerb)
					return
				end
			end
		end
	end
end

function addDamage(person, verb)
	local dam = 0	
	local minVerb = string.lower(string.match(verb, "%a+"))
	local modPerson = ""
	
	if person == "Your" then
		modPerson = "You"
	else
		modPerson = person
	end
	
	modPerson = firstToUpper(string.lower(modPerson))
	
	for i = 1, table.getn(dverbs) do
		if string.find(verb, dverbs[i]) ~= nil then
			dam = tonumber(dvalues[i])
		end
	end
	
	local currTotalDmg = damList[modPerson]["totalDmg"]
	local currVerbDmg = damList[modPerson][minVerb]
	
	damList[modPerson]["totalDmg"] = currTotalDmg + dam
	damList[modPerson][minVerb] = currVerbDmg + 1
end

function calculateTotalDamNum()
	totalDamNum = 0
	
	for k, v in pairs (damList) do 
		totalDamNum = totalDamNum + v["totalDmg"]
	end	
end

function addExp(value)
	gainedxp = gainedxp + tonumber(value)
	expKills = expKills + 1
	UpdateInfoBar()
end

function afterLevel(hpgain, managain, pracgain)
	Note("")
	Send("emote increases in power!! |by|" .. hpgain .. " |n|hps, |by|" .. managain .. " |n|mana, |by|" .. pracgain .. " |n|practices.")
	Send("save")
	gainedlevel = gainedlevel + 1
end

function runreport()
	Send("gtell |bw|Run stats: |bc|" .. gainedxp .. " |bw|xp, |bc|" .. gainedlevel .. " |bw|level(s).")
end

function runreset()
	gainedxp = 0
	gainedlevel = 0
	UpdateInfoBar()
	Note("Counters reseted")
end

--End functions
--setup()



]]>
</script>


</muclient>
