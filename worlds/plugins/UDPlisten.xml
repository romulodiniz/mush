<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on Thursday, June 19, 2008, 8:29 AM -->
<!-- MuClient version 4.27 -->

<!-- Plugin "UDPlisten_demo" generated by Plugin Wizard -->

<muclient>
<plugin
   name="UDPlisten"
   author="X"
   id="63a8008c629f5904ace845aa"
   language="Lua"
   purpose="Use UdpListen"
   date_written="2008-06-19 08:27:07"
   requires="4.00"
   version="1.0"
   >

</plugin>

<!--  Script  -->

<script>
<![CDATA[

function listener (s)
   ColourNote ("white", "blue", "Got UDP packet: " .. s)
 
   local t = splitString(s)

   local target = t[1]
   local msg = t[2]

   SendToWorld (target, msg)
end -- listener 

function SendToWorld (name, message)
	local otherworld = GetWorld (name)
	if otherworld == nil then
		Note ("World " .. name .. " is not open")
		return
	end

	otherworld:Execute (message)	

end -- of SendToWorld

function splitString(inputstr, sep)
        local t={} ; i=1
        for str in string.gmatch(inputstr, "([^###]+)") do
                t[i] = str
                i = i + 1
        end
        return t
end



require "check"
check (UdpListen ("0.0.0.0", 4112, "listener"))
]]>
</script>

</muclient>